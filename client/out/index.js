(()=>{var pf=Object.create;var Ns=Object.defineProperty;var ff=Object.getOwnPropertyDescriptor;var mf=Object.getOwnPropertyNames;var df=Object.getPrototypeOf,_f=Object.prototype.hasOwnProperty;var gf=(o,t,e)=>t in o?Ns(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var xf=o=>Ns(o,"__esModule",{value:!0});var Di=(o,t)=>()=>(o&&(t=o(o=0)),t);var zt=(o,t)=>()=>(t||o((t={exports:{}}).exports,t),t.exports),yf=(o,t)=>{for(var e in t)Ns(o,e,{get:t[e],enumerable:!0})},vf=(o,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of mf(t))!_f.call(o,n)&&(e||n!=="default")&&Ns(o,n,{get:()=>t[n],enumerable:!(s=ff(t,n))||s.enumerable});return o},Pt=(o,t)=>vf(xf(Ns(o!=null?pf(df(o)):{},"default",!t&&o&&o.__esModule?{get:()=>o.default,enumerable:!0}:{value:o,enumerable:!0})),o);var Ei=(o,t,e)=>(gf(o,typeof t!="symbol"?t+"":t,e),e),wf=(o,t,e)=>{if(!t.has(o))throw TypeError("Cannot "+e)};var Ri=(o,t,e)=>(wf(o,t,"read from private field"),e?e.call(o):t.get(o)),Mi=(o,t,e)=>{if(t.has(o))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(o):t.set(o,e)};function Xe(o,t){for(var e in t)o[e]=t[e];return o}function Li(o){var t=o.parentNode;t&&t.removeChild(o)}function i(o,t,e){var s,n,c,u={};for(c in t)c=="key"?s=t[c]:c=="ref"?n=t[c]:u[c]=t[c];if(arguments.length>2&&(u.children=arguments.length>3?Os.call(arguments,2):e),typeof o=="function"&&o.defaultProps!=null)for(c in o.defaultProps)u[c]===void 0&&(u[c]=o.defaultProps[c]);return Es(o,u,s,n,null)}function Es(o,t,e,s,n){var c={type:o,props:t,key:e,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:n??++Fi};return n==null&&ot.vnode!=null&&ot.vnode(c),c}function Rs(){return{current:null}}function a(o){return o.children}function de(o,t){this.props=o,this.context=t}function jr(o,t){if(t==null)return o.__?jr(o.__,o.__.__k.indexOf(o)+1):null;for(var e;t<o.__k.length;t++)if((e=o.__k[t])!=null&&e.__e!=null)return e.__e;return typeof o.type=="function"?jr(o):null}function Bi(o){var t,e;if((o=o.__)!=null&&o.__c!=null){for(o.__e=o.__c.base=null,t=0;t<o.__k.length;t++)if((e=o.__k[t])!=null&&e.__e!=null){o.__e=o.__c.base=e.__e;break}return Bi(o)}}function dn(o){(!o.__d&&(o.__d=!0)&&Ds.push(o)&&!go.__r++||Pi!==ot.debounceRendering)&&((Pi=ot.debounceRendering)||Ii)(go)}function go(){for(var o;go.__r=Ds.length;)o=Ds.sort(function(t,e){return t.__v.__b-e.__v.__b}),Ds=[],o.some(function(t){var e,s,n,c,u,l;t.__d&&(u=(c=(e=t).__v).__e,(l=e.__P)&&(s=[],(n=Xe({},c)).__v=c.__v+1,_n(l,c,n,e.__n,l.ownerSVGElement!==void 0,c.__h!=null?[u]:null,s,u??jr(c),c.__h),Yi(s,c),c.__e!=u&&Bi(c)))})}function Wi(o,t,e,s,n,c,u,l,h,p){var f,m,d,_,g,y,v,x=s&&s.__k||Vi,T=x.length;for(e.__k=[],f=0;f<t.length;f++)if((_=e.__k[f]=(_=t[f])==null||typeof _=="boolean"?null:typeof _=="string"||typeof _=="number"||typeof _=="bigint"?Es(null,_,null,null,_):Array.isArray(_)?Es(a,{children:_},null,null,null):_.__b>0?Es(_.type,_.props,_.key,null,_.__v):_)!=null){if(_.__=e,_.__b=e.__b+1,(d=x[f])===null||d&&_.key==d.key&&_.type===d.type)x[f]=void 0;else for(m=0;m<T;m++){if((d=x[m])&&_.key==d.key&&_.type===d.type){x[m]=void 0;break}d=null}_n(o,_,d=d||_o,n,c,u,l,h,p),g=_.__e,(m=_.ref)&&d.ref!=m&&(v||(v=[]),d.ref&&v.push(d.ref,null,_),v.push(m,_.__c||g,_)),g!=null?(y==null&&(y=g),typeof _.type=="function"&&_.__k===d.__k?_.__d=h=ji(_,h,o):h=Gi(o,_,d,x,g,h),typeof e.type=="function"&&(e.__d=h)):h&&d.__e==h&&h.parentNode!=o&&(h=jr(d))}for(e.__e=y,f=T;f--;)x[f]!=null&&(typeof e.type=="function"&&x[f].__e!=null&&x[f].__e==e.__d&&(e.__d=jr(s,f+1)),Xi(x[f],x[f]));if(v)for(f=0;f<v.length;f++)$i(v[f],v[++f],v[++f])}function ji(o,t,e){for(var s,n=o.__k,c=0;n&&c<n.length;c++)(s=n[c])&&(s.__=o,t=typeof s.type=="function"?ji(s,t,e):Gi(e,s,s,n,s.__e,t));return t}function xo(o,t){return t=t||[],o==null||typeof o=="boolean"||(Array.isArray(o)?o.some(function(e){xo(e,t)}):t.push(o)),t}function Gi(o,t,e,s,n,c){var u,l,h;if(t.__d!==void 0)u=t.__d,t.__d=void 0;else if(e==null||n!=c||n.parentNode==null)t:if(c==null||c.parentNode!==o)o.appendChild(n),u=null;else{for(l=c,h=0;(l=l.nextSibling)&&h<s.length;h+=2)if(l==n)break t;o.insertBefore(n,c),u=c}return u!==void 0?u:n.nextSibling}function Af(o,t,e,s,n){var c;for(c in e)c==="children"||c==="key"||c in t||yo(o,c,null,e[c],s);for(c in t)n&&typeof t[c]!="function"||c==="children"||c==="key"||c==="value"||c==="checked"||e[c]===t[c]||yo(o,c,t[c],e[c],s)}function zi(o,t,e){t[0]==="-"?o.setProperty(t,e):o[t]=e==null?"":typeof e!="number"||Tf.test(t)?e:e+"px"}function yo(o,t,e,s,n){var c;t:if(t==="style")if(typeof e=="string")o.style.cssText=e;else{if(typeof s=="string"&&(o.style.cssText=s=""),s)for(t in s)e&&t in e||zi(o.style,t,"");if(e)for(t in e)s&&e[t]===s[t]||zi(o.style,t,e[t])}else if(t[0]==="o"&&t[1]==="n")c=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in o?t.toLowerCase().slice(2):t.slice(2),o.l||(o.l={}),o.l[t+c]=e,e?s||o.addEventListener(t,c?Hi:Ui,c):o.removeEventListener(t,c?Hi:Ui,c);else if(t!=="dangerouslySetInnerHTML"){if(n)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in o)try{o[t]=e??"";break t}catch{}typeof e=="function"||(e!=null&&(e!==!1||t[0]==="a"&&t[1]==="r")?o.setAttribute(t,e):o.removeAttribute(t))}}function Ui(o){this.l[o.type+!1](ot.event?ot.event(o):o)}function Hi(o){this.l[o.type+!0](ot.event?ot.event(o):o)}function _n(o,t,e,s,n,c,u,l,h){var p,f,m,d,_,g,y,v,x,T,N,k=t.type;if(t.constructor!==void 0)return null;e.__h!=null&&(h=e.__h,l=t.__e=e.__e,t.__h=null,c=[l]),(p=ot.__b)&&p(t);try{t:if(typeof k=="function"){if(v=t.props,x=(p=k.contextType)&&s[p.__c],T=p?x?x.props.value:p.__:s,e.__c?y=(f=t.__c=e.__c).__=f.__E:("prototype"in k&&k.prototype.render?t.__c=f=new k(v,T):(t.__c=f=new de(v,T),f.constructor=k,f.render=Cf),x&&x.sub(f),f.props=v,f.state||(f.state={}),f.context=T,f.__n=s,m=f.__d=!0,f.__h=[]),f.__s==null&&(f.__s=f.state),k.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=Xe({},f.__s)),Xe(f.__s,k.getDerivedStateFromProps(v,f.__s))),d=f.props,_=f.state,m)k.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(k.getDerivedStateFromProps==null&&v!==d&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(v,T),!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(v,f.__s,T)===!1||t.__v===e.__v){f.props=v,f.state=f.__s,t.__v!==e.__v&&(f.__d=!1),f.__v=t,t.__e=e.__e,t.__k=e.__k,t.__k.forEach(function(w){w&&(w.__=t)}),f.__h.length&&u.push(f);break t}f.componentWillUpdate!=null&&f.componentWillUpdate(v,f.__s,T),f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(d,_,g)})}f.context=T,f.props=v,f.state=f.__s,(p=ot.__r)&&p(t),f.__d=!1,f.__v=t,f.__P=o,p=f.render(f.props,f.state,f.context),f.state=f.__s,f.getChildContext!=null&&(s=Xe(Xe({},s),f.getChildContext())),m||f.getSnapshotBeforeUpdate==null||(g=f.getSnapshotBeforeUpdate(d,_)),N=p!=null&&p.type===a&&p.key==null?p.props.children:p,Wi(o,Array.isArray(N)?N:[N],t,e,s,n,c,u,l,h),f.base=t.__e,t.__h=null,f.__h.length&&u.push(f),y&&(f.__E=f.__=null),f.__e=!1}else c==null&&t.__v===e.__v?(t.__k=e.__k,t.__e=e.__e):t.__e=Sf(e.__e,t,e,s,n,c,u,h);(p=ot.diffed)&&p(t)}catch(w){t.__v=null,(h||c!=null)&&(t.__e=l,t.__h=!!h,c[c.indexOf(l)]=null),ot.__e(w,t,e)}}function Yi(o,t){ot.__c&&ot.__c(t,o),o.some(function(e){try{o=e.__h,e.__h=[],o.some(function(s){s.call(e)})}catch(s){ot.__e(s,e.__v)}})}function Sf(o,t,e,s,n,c,u,l){var h,p,f,m=e.props,d=t.props,_=t.type,g=0;if(_==="svg"&&(n=!0),c!=null){for(;g<c.length;g++)if((h=c[g])&&"setAttribute"in h==!!_&&(_?h.localName===_:h.nodeType===3)){o=h,c[g]=null;break}}if(o==null){if(_===null)return document.createTextNode(d);o=n?document.createElementNS("http://www.w3.org/2000/svg",_):document.createElement(_,d.is&&d),c=null,l=!1}if(_===null)m===d||l&&o.data===d||(o.data=d);else{if(c=c&&Os.call(o.childNodes),p=(m=e.props||_o).dangerouslySetInnerHTML,f=d.dangerouslySetInnerHTML,!l){if(c!=null)for(m={},g=0;g<o.attributes.length;g++)m[o.attributes[g].name]=o.attributes[g].value;(f||p)&&(f&&(p&&f.__html==p.__html||f.__html===o.innerHTML)||(o.innerHTML=f&&f.__html||""))}if(Af(o,d,m,n,l),f)t.__k=[];else if(g=t.props.children,Wi(o,Array.isArray(g)?g:[g],t,e,s,n&&_!=="foreignObject",c,u,c?c[0]:e.__k&&jr(e,0),l),c!=null)for(g=c.length;g--;)c[g]!=null&&Li(c[g]);l||("value"in d&&(g=d.value)!==void 0&&(g!==m.value||g!==o.value||_==="progress"&&!g)&&yo(o,"value",g,m.value,!1),"checked"in d&&(g=d.checked)!==void 0&&g!==o.checked&&yo(o,"checked",g,m.checked,!1))}return o}function $i(o,t,e){try{typeof o=="function"?o(t):o.current=t}catch(s){ot.__e(s,e)}}function Xi(o,t,e){var s,n;if(ot.unmount&&ot.unmount(o),(s=o.ref)&&(s.current&&s.current!==o.__e||$i(s,null,t)),(s=o.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(c){ot.__e(c,t)}s.base=s.__P=null}if(s=o.__k)for(n=0;n<s.length;n++)s[n]&&Xi(s[n],t,typeof o.type!="function");e||o.__e==null||Li(o.__e),o.__e=o.__d=void 0}function Cf(o,t,e){return this.constructor(o,e)}function Qi(o,t,e){var s,n,c;ot.__&&ot.__(o,t),n=(s=typeof e=="function")?null:e&&e.__k||t.__k,c=[],_n(t,o=(!s&&e||t).__k=i(a,null,[o]),n||_o,_o,t.ownerSVGElement!==void 0,!s&&e?[e]:n?null:t.firstChild?Os.call(t.childNodes):null,c,!s&&e?e:n?n.__e:t.firstChild,s),Yi(c,o)}function Zi(o,t,e){var s,n,c,u=Xe({},o.props);for(c in t)c=="key"?s=t[c]:c=="ref"?n=t[c]:u[c]=t[c];return arguments.length>2&&(u.children=arguments.length>3?Os.call(arguments,2):e),Es(o.type,u,s||o.key,n||o.ref,null)}function Ki(o,t){var e={__c:t="__cC"+qi++,__:o,Consumer:function(s,n){return s.children(n)},Provider:function(s){var n,c;return this.getChildContext||(n=[],(c={})[t]=this,this.getChildContext=function(){return c},this.shouldComponentUpdate=function(u){this.props.value!==u.value&&n.some(dn)},this.sub=function(u){n.push(u);var l=u.componentWillUnmount;u.componentWillUnmount=function(){n.splice(n.indexOf(u),1),l&&l.call(u)}}),s.children}};return e.Provider.__=e.Consumer.contextType=e}var Os,ot,Fi,bf,Ds,Ii,Pi,qi,_o,Vi,Tf,Ve=Di(()=>{r();_o={},Vi=[],Tf=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;Os=Vi.slice,ot={__e:function(o,t){for(var e,s,n;t=t.__;)if((e=t.__c)&&!e.__)try{if((s=e.constructor)&&s.getDerivedStateFromError!=null&&(e.setState(s.getDerivedStateFromError(o)),n=e.__d),e.componentDidCatch!=null&&(e.componentDidCatch(o),n=e.__d),n)return e.__E=e}catch(c){o=c}throw o}},Fi=0,bf=function(o){return o!=null&&o.constructor===void 0},de.prototype.setState=function(o,t){var e;e=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Xe({},this.state),typeof o=="function"&&(o=o(Xe({},e),this.props)),o&&Xe(e,o),o!=null&&this.__v&&(t&&this.__h.push(t),dn(this))},de.prototype.forceUpdate=function(o){this.__v&&(this.__e=!0,o&&this.__h.push(o),dn(this))},de.prototype.render=a,Ds=[],Ii=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,go.__r=0,qi=0});var r=Di(()=>{Ve()});var da=zt((eg,Fs)=>{r();function Wf(o){if(Array.isArray(o))return o}Fs.exports=Wf,Fs.exports.__esModule=!0,Fs.exports.default=Fs.exports});var _a=zt((rg,Is)=>{r();function jf(o,t){var e=o==null?null:typeof Symbol!="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(e!=null){var s=[],n=!0,c=!1,u,l;try{for(e=e.call(o);!(n=(u=e.next()).done)&&(s.push(u.value),!(t&&s.length===t));n=!0);}catch(h){c=!0,l=h}finally{try{!n&&e.return!=null&&e.return()}finally{if(c)throw l}}return s}}Is.exports=jf,Is.exports.__esModule=!0,Is.exports.default=Is.exports});var ga=zt((sg,Ps)=>{r();function Gf(o,t){(t==null||t>o.length)&&(t=o.length);for(var e=0,s=new Array(t);e<t;e++)s[e]=o[e];return s}Ps.exports=Gf,Ps.exports.__esModule=!0,Ps.exports.default=Ps.exports});var ya=zt((og,qs)=>{r();var xa=ga();function zf(o,t){if(!!o){if(typeof o=="string")return xa(o,t);var e=Object.prototype.toString.call(o).slice(8,-1);if(e==="Object"&&o.constructor&&(e=o.constructor.name),e==="Map"||e==="Set")return Array.from(o);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return xa(o,t)}}qs.exports=zf,qs.exports.__esModule=!0,qs.exports.default=qs.exports});var va=zt((ng,Vs)=>{r();function Uf(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}Vs.exports=Uf,Vs.exports.__esModule=!0,Vs.exports.default=Vs.exports});var wa=zt((ig,Ls)=>{r();var Hf=da(),Yf=_a(),$f=ya(),Xf=va();function Qf(o,t){return Hf(o)||Yf(o,t)||$f(o,t)||Xf()}Ls.exports=Qf,Ls.exports.__esModule=!0,Ls.exports.default=Ls.exports});var ba=zt((ag,Bs)=>{r();function Zf(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}Bs.exports=Zf,Bs.exports.__esModule=!0,Bs.exports.default=Bs.exports});var Aa=zt((cg,Ws)=>{r();function Ta(o,t){for(var e=0;e<t.length;e++){var s=t[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(o,s.key,s)}}function Kf(o,t,e){return t&&Ta(o.prototype,t),e&&Ta(o,e),Object.defineProperty(o,"prototype",{writable:!1}),o}Ws.exports=Kf,Ws.exports.__esModule=!0,Ws.exports.default=Ws.exports});var An=zt((wo,Sa)=>{r();(function(o,t){typeof wo=="object"&&typeof Sa!="undefined"?t(wo,wa(),ba(),Aa()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/slicedToArray","@babel/runtime/helpers/classCallCheck","@babel/runtime/helpers/createClass"],t):(o=typeof globalThis!="undefined"?globalThis:o||self,t(o.automationEvents={},o._slicedToArray,o._classCallCheck,o._createClass))})(wo,function(o,t,e,s){"use strict";function n(B){return B&&typeof B=="object"&&"default"in B?B:{default:B}}var c=n(t),u=n(e),l=n(s),h=function(D,P,O){return{endTime:P,insertTime:O,type:"exponentialRampToValue",value:D}},p=function(D,P,O){return{endTime:P,insertTime:O,type:"linearRampToValue",value:D}},f=function(D,P){return{startTime:P,type:"setValue",value:D}},m=function(D,P,O){return{duration:O,startTime:P,type:"setValueCurve",values:D}},d=function(D,P,O){var W=O.startTime,H=O.target,et=O.timeConstant;return H+(P-H)*Math.exp((W-D)/et)},_=function(D){return D.type==="exponentialRampToValue"},g=function(D){return D.type==="linearRampToValue"},y=function(D){return _(D)||g(D)},v=function(D){return D.type==="setValue"},x=function(D){return D.type==="setValueCurve"},T=function B(D,P,O,W){var H=D[P];return H===void 0?W:y(H)||v(H)?H.value:x(H)?H.values[H.values.length-1]:d(O,B(D,P-1,H.startTime,W),H)},N=function(D,P,O,W,H){return O===void 0?[W.insertTime,H]:y(O)?[O.endTime,O.value]:v(O)?[O.startTime,O.value]:x(O)?[O.startTime+O.duration,O.values[O.values.length-1]]:[O.startTime,T(D,P-1,O.startTime,H)]},k=function(D){return D.type==="cancelAndHold"},w=function(D){return D.type==="cancelScheduledValues"},A=function(D){return k(D)||w(D)?D.cancelTime:_(D)||g(D)?D.endTime:D.startTime},S=function(D,P,O,W){var H=W.endTime,et=W.value;return O===et?et:0<O&&0<et||O<0&&et<0?O*Math.pow(et/O,(D-P)/(H-P)):0},C=function(D,P,O,W){var H=W.endTime,et=W.value;return O+(D-P)/(H-P)*(et-O)},I=function(D,P){var O=Math.floor(P),W=Math.ceil(P);return O===W?D[O]:(1-(P-O))*D[O]+(1-(W-P))*D[W]},M=function(D,P){var O=P.duration,W=P.startTime,H=P.values,et=(D-W)/O*(H.length-1);return I(H,et)},R=function(D){return D.type==="setTarget"},E=function(B){function D(P){u.default(this,D),this._automationEvents=[],this._currenTime=0,this._defaultValue=P}return l.default(D,[{key:B,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(O){var W=A(O);if(k(O)||w(O)){var H=this._automationEvents.findIndex(function(qe){return w(O)&&x(qe)?qe.startTime+qe.duration>=W:A(qe)>=W}),et=this._automationEvents[H];if(H!==-1&&(this._automationEvents=this._automationEvents.slice(0,H)),k(O)){var q=this._automationEvents[this._automationEvents.length-1];if(et!==void 0&&y(et)){if(R(q))throw new Error("The internal list is malformed.");var ft=x(q)?q.startTime+q.duration:A(q),St=x(q)?q.values[q.values.length-1]:q.value,$=_(et)?S(W,ft,St,et):C(W,ft,St,et),be=_(et)?h($,W,this._currenTime):p($,W,this._currenTime);this._automationEvents.push(be)}q!==void 0&&R(q)&&this._automationEvents.push(f(this.getValue(W),W)),q!==void 0&&x(q)&&q.startTime+q.duration>W&&(this._automationEvents[this._automationEvents.length-1]=m(new Float32Array([6,7]),q.startTime,W-q.startTime))}}else{var $t=this._automationEvents.findIndex(function(qe){return A(qe)>W}),re=$t===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[$t-1];if(re!==void 0&&x(re)&&A(re)+re.duration>W)return!1;var Te=_(O)?h(O.value,O.endTime,this._currenTime):g(O)?p(O.value,W,this._currenTime):O;if($t===-1)this._automationEvents.push(Te);else{if(x(O)&&W+O.duration>A(this._automationEvents[$t]))return!1;this._automationEvents.splice($t,0,Te)}}return!0}},{key:"flush",value:function(O){var W=this._automationEvents.findIndex(function(q){return A(q)>O});if(W>1){var H=this._automationEvents.slice(W-1),et=H[0];R(et)&&H.unshift(f(T(this._automationEvents,W-2,et.startTime,this._defaultValue),et.startTime)),this._automationEvents=H}}},{key:"getValue",value:function(O){if(this._automationEvents.length===0)return this._defaultValue;var W=this._automationEvents.findIndex(function(fn){return A(fn)>O}),H=this._automationEvents[W],et=(W===-1?this._automationEvents.length:W)-1,q=this._automationEvents[et];if(q!==void 0&&R(q)&&(H===void 0||!y(H)||H.insertTime>O))return d(O,T(this._automationEvents,et-1,q.startTime,this._defaultValue),q);if(q!==void 0&&v(q)&&(H===void 0||!y(H)))return q.value;if(q!==void 0&&x(q)&&(H===void 0||!y(H)||q.startTime+q.duration>O))return O<q.startTime+q.duration?M(O,q):q.values[q.values.length-1];if(q!==void 0&&y(q)&&(H===void 0||!y(H)))return q.value;if(H!==void 0&&_(H)){var ft=N(this._automationEvents,et,q,H,this._defaultValue),St=c.default(ft,2),$=St[0],be=St[1];return S(O,$,be,H)}if(H!==void 0&&g(H)){var $t=N(this._automationEvents,et,q,H,this._defaultValue),re=c.default($t,2),Te=re[0],qe=re[1];return C(O,Te,qe,H)}return this._defaultValue}}]),D}(Symbol.iterator),j=function(D){return{cancelTime:D,type:"cancelAndHold"}},L=function(D){return{cancelTime:D,type:"cancelScheduledValues"}},Z=function(D,P){return{endTime:P,type:"exponentialRampToValue",value:D}},z=function(D,P){return{endTime:P,type:"linearRampToValue",value:D}},Y=function(D,P,O){return{startTime:P,target:D,timeConstant:O,type:"setTarget"}};o.AutomationEventList=E,o.createCancelAndHoldAutomationEvent=j,o.createCancelScheduledValuesAutomationEvent=L,o.createExponentialRampToValueAutomationEvent=Z,o.createLinearRampToValueAutomationEvent=z,o.createSetTargetAutomationEvent=Y,o.createSetValueAutomationEvent=f,o.createSetValueCurveAutomationEvent=m,Object.defineProperty(o,"__esModule",{value:!0})})});var Wh=zt((Tq,jo)=>{r();var wh,bh,Th,Ah,Sh,Ch,kh,Nh,Oh,Bo,ei,Dh,Eh,Rh,us,Mh,Fh,Ih,Ph,qh,Vh,Lh,Bh,Wo;(function(o){var t=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(s){o(e(t,e(s)))}):typeof jo=="object"&&typeof jo.exports=="object"?o(e(t,e(jo.exports))):o(e(t));function e(s,n){return s!==t&&(typeof Object.create=="function"?Object.defineProperty(s,"__esModule",{value:!0}):s.__esModule=!0),function(c,u){return s[c]=n?n(c,u):u}}})(function(o){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(s[c]=n[c])};wh=function(s,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(s,n);function c(){this.constructor=s}s.prototype=n===null?Object.create(n):(c.prototype=n.prototype,new c)},bh=Object.assign||function(s){for(var n,c=1,u=arguments.length;c<u;c++){n=arguments[c];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(s[l]=n[l])}return s},Th=function(s,n){var c={};for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&n.indexOf(u)<0&&(c[u]=s[u]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,u=Object.getOwnPropertySymbols(s);l<u.length;l++)n.indexOf(u[l])<0&&Object.prototype.propertyIsEnumerable.call(s,u[l])&&(c[u[l]]=s[u[l]]);return c},Ah=function(s,n,c,u){var l=arguments.length,h=l<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,c):u,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,n,c,u);else for(var f=s.length-1;f>=0;f--)(p=s[f])&&(h=(l<3?p(h):l>3?p(n,c,h):p(n,c))||h);return l>3&&h&&Object.defineProperty(n,c,h),h},Sh=function(s,n){return function(c,u){n(c,u,s)}},Ch=function(s,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(s,n)},kh=function(s,n,c,u){function l(h){return h instanceof c?h:new c(function(p){p(h)})}return new(c||(c=Promise))(function(h,p){function f(_){try{d(u.next(_))}catch(g){p(g)}}function m(_){try{d(u.throw(_))}catch(g){p(g)}}function d(_){_.done?h(_.value):l(_.value).then(f,m)}d((u=u.apply(s,n||[])).next())})},Nh=function(s,n){var c={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},u,l,h,p;return p={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function f(d){return function(_){return m([d,_])}}function m(d){if(u)throw new TypeError("Generator is already executing.");for(;c;)try{if(u=1,l&&(h=d[0]&2?l.return:d[0]?l.throw||((h=l.return)&&h.call(l),0):l.next)&&!(h=h.call(l,d[1])).done)return h;switch(l=0,h&&(d=[d[0]&2,h.value]),d[0]){case 0:case 1:h=d;break;case 4:return c.label++,{value:d[1],done:!1};case 5:c.label++,l=d[1],d=[0];continue;case 7:d=c.ops.pop(),c.trys.pop();continue;default:if(h=c.trys,!(h=h.length>0&&h[h.length-1])&&(d[0]===6||d[0]===2)){c=0;continue}if(d[0]===3&&(!h||d[1]>h[0]&&d[1]<h[3])){c.label=d[1];break}if(d[0]===6&&c.label<h[1]){c.label=h[1],h=d;break}if(h&&c.label<h[2]){c.label=h[2],c.ops.push(d);break}h[2]&&c.ops.pop(),c.trys.pop();continue}d=n.call(s,c)}catch(_){d=[6,_],l=0}finally{u=h=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Oh=function(s,n){for(var c in s)c!=="default"&&!Object.prototype.hasOwnProperty.call(n,c)&&Wo(n,s,c)},Wo=Object.create?function(s,n,c,u){u===void 0&&(u=c),Object.defineProperty(s,u,{enumerable:!0,get:function(){return n[c]}})}:function(s,n,c,u){u===void 0&&(u=c),s[u]=n[c]},Bo=function(s){var n=typeof Symbol=="function"&&Symbol.iterator,c=n&&s[n],u=0;if(c)return c.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&u>=s.length&&(s=void 0),{value:s&&s[u++],done:!s}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},ei=function(s,n){var c=typeof Symbol=="function"&&s[Symbol.iterator];if(!c)return s;var u=c.call(s),l,h=[],p;try{for(;(n===void 0||n-- >0)&&!(l=u.next()).done;)h.push(l.value)}catch(f){p={error:f}}finally{try{l&&!l.done&&(c=u.return)&&c.call(u)}finally{if(p)throw p.error}}return h},Dh=function(){for(var s=[],n=0;n<arguments.length;n++)s=s.concat(ei(arguments[n]));return s},Eh=function(){for(var s=0,n=0,c=arguments.length;n<c;n++)s+=arguments[n].length;for(var u=Array(s),l=0,n=0;n<c;n++)for(var h=arguments[n],p=0,f=h.length;p<f;p++,l++)u[l]=h[p];return u},Rh=function(s,n,c){if(c||arguments.length===2)for(var u=0,l=n.length,h;u<l;u++)(h||!(u in n))&&(h||(h=Array.prototype.slice.call(n,0,u)),h[u]=n[u]);return s.concat(h||Array.prototype.slice.call(n))},us=function(s){return this instanceof us?(this.v=s,this):new us(s)},Mh=function(s,n,c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u=c.apply(s,n||[]),l,h=[];return l={},p("next"),p("throw"),p("return"),l[Symbol.asyncIterator]=function(){return this},l;function p(y){u[y]&&(l[y]=function(v){return new Promise(function(x,T){h.push([y,v,x,T])>1||f(y,v)})})}function f(y,v){try{m(u[y](v))}catch(x){g(h[0][3],x)}}function m(y){y.value instanceof us?Promise.resolve(y.value.v).then(d,_):g(h[0][2],y)}function d(y){f("next",y)}function _(y){f("throw",y)}function g(y,v){y(v),h.shift(),h.length&&f(h[0][0],h[0][1])}},Fh=function(s){var n,c;return n={},u("next"),u("throw",function(l){throw l}),u("return"),n[Symbol.iterator]=function(){return this},n;function u(l,h){n[l]=s[l]?function(p){return(c=!c)?{value:us(s[l](p)),done:l==="return"}:h?h(p):p}:h}},Ih=function(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=s[Symbol.asyncIterator],c;return n?n.call(s):(s=typeof Bo=="function"?Bo(s):s[Symbol.iterator](),c={},u("next"),u("throw"),u("return"),c[Symbol.asyncIterator]=function(){return this},c);function u(h){c[h]=s[h]&&function(p){return new Promise(function(f,m){p=s[h](p),l(f,m,p.done,p.value)})}}function l(h,p,f,m){Promise.resolve(m).then(function(d){h({value:d,done:f})},p)}},Ph=function(s,n){return Object.defineProperty?Object.defineProperty(s,"raw",{value:n}):s.raw=n,s};var e=Object.create?function(s,n){Object.defineProperty(s,"default",{enumerable:!0,value:n})}:function(s,n){s.default=n};qh=function(s){if(s&&s.__esModule)return s;var n={};if(s!=null)for(var c in s)c!=="default"&&Object.prototype.hasOwnProperty.call(s,c)&&Wo(n,s,c);return e(n,s),n},Vh=function(s){return s&&s.__esModule?s:{default:s}},Lh=function(s,n,c,u){if(c==="a"&&!u)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?s!==n||!u:!n.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return c==="m"?u:c==="a"?u.call(s):u?u.value:n.get(s)},Bh=function(s,n,c,u,l){if(u==="m")throw new TypeError("Private method is not writable");if(u==="a"&&!l)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?s!==n||!l:!n.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return u==="a"?l.call(s,c):l?l.value=c:n.set(s,c),c},o("__extends",wh),o("__assign",bh),o("__rest",Th),o("__decorate",Ah),o("__param",Sh),o("__metadata",Ch),o("__awaiter",kh),o("__generator",Nh),o("__exportStar",Oh),o("__createBinding",Wo),o("__values",Bo),o("__read",ei),o("__spread",Dh),o("__spreadArrays",Eh),o("__spreadArray",Rh),o("__await",us),o("__asyncGenerator",Mh),o("__asyncDelegator",Fh),o("__asyncValues",Ih),o("__makeTemplateObject",Ph),o("__importStar",qh),o("__importDefault",Vh),o("__classPrivateFieldGet",Lh),o("__classPrivateFieldSet",Bh)})});var di=zt((q7,dp)=>{r();var d_=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,__=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];dp.exports=function(t){var e=t,s=t.indexOf("["),n=t.indexOf("]");s!=-1&&n!=-1&&(t=t.substring(0,s)+t.substring(s,n).replace(/:/g,";")+t.substring(n,t.length));for(var c=d_.exec(t||""),u={},l=14;l--;)u[__[l]]=c[l]||"";return s!=-1&&n!=-1&&(u.source=e,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=g_(u,u.path),u.queryKey=x_(u,u.query),u};function g_(o,t){var e=/\/{2,9}/g,s=t.replace(e,"/").split("/");return(t.substr(0,1)=="/"||t.length===0)&&s.splice(0,1),t.substr(t.length-1,1)=="/"&&s.splice(s.length-1,1),s}function x_(o,t){var e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,n,c){n&&(e[n]=c)}),e}});var xp=zt((L7,_i)=>{r();try{_i.exports=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch{_i.exports=!1}});var Wr=zt(vp=>{r();vp.Emitter=ee;function ee(o){if(o)return w_(o)}function w_(o){for(var t in ee.prototype)o[t]=ee.prototype[t];return o}ee.prototype.on=ee.prototype.addEventListener=function(o,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+o]=this._callbacks["$"+o]||[]).push(t),this};ee.prototype.once=function(o,t){function e(){this.off(o,e),t.apply(this,arguments)}return e.fn=t,this.on(o,e),this};ee.prototype.off=ee.prototype.removeListener=ee.prototype.removeAllListeners=ee.prototype.removeEventListener=function(o,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+o];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+o],this;for(var s,n=0;n<e.length;n++)if(s=e[n],s===t||s.fn===t){e.splice(n,1);break}return e.length===0&&delete this._callbacks["$"+o],this};ee.prototype.emit=function(o){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+o],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(e){e=e.slice(0);for(var s=0,n=e.length;s<n;++s)e[s].apply(this,t)}return this};ee.prototype.emitReserved=ee.prototype.emit;ee.prototype.listeners=function(o){return this._callbacks=this._callbacks||{},this._callbacks["$"+o]||[]};ee.prototype.hasListeners=function(o){return!!this.listeners(o).length}});var wi=zt((nK,Fp)=>{"use strict";r();var Dp="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),an=64,Ep={},Rp=0,wr=0,Mp;function yi(o){var t="";do t=Dp[o%an]+t,o=Math.floor(o/an);while(o>0);return t}function O_(o){var t=0;for(wr=0;wr<o.length;wr++)t=t*an+Ep[o.charAt(wr)];return t}function vi(){var o=yi(+new Date);return o!==Mp?(Rp=0,Mp=o):o+"."+yi(Rp++)}for(;wr<an;wr++)Ep[Dp[wr]]=wr;vi.encode=yi;vi.decode=O_;Fp.exports=vi});var cn=zt(bi=>{r();bi.encode=function(o){var t="";for(var e in o)o.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(o[e]));return t};bi.decode=function(o){for(var t={},e=o.split("&"),s=0,n=e.length;s<n;s++){var c=e[s].split("=");t[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}return t}});var ef=zt((zK,tf)=>{r();tf.exports=Cs;function Cs(o){o=o||{},this.ms=o.min||100,this.max=o.max||1e4,this.factor=o.factor||2,this.jitter=o.jitter>0&&o.jitter<=1?o.jitter:0,this.attempts=0}Cs.prototype.duration=function(){var o=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*o);o=(Math.floor(t*10)&1)==0?o-e:o+e}return Math.min(o,this.max)|0};Cs.prototype.reset=function(){this.attempts=0};Cs.prototype.setMin=function(o){this.ms=o};Cs.prototype.setMax=function(o){this.max=o};Cs.prototype.setJitter=function(o){this.jitter=o}});r();r();r();function Gr(){return Gr=Object.assign||function(o){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(o[s]=e[s])}return o},Gr.apply(this,arguments)}var zr,gn=zr||(zr={});gn.Pop="POP";gn.Push="PUSH";gn.Replace="REPLACE";var Ji=function(o){return o};function ta(o){o.preventDefault(),o.returnValue=""}function ea(){var o=[];return{get length(){return o.length},push:function(t){return o.push(t),function(){o=o.filter(function(e){return e!==t})}},call:function(t){o.forEach(function(e){return e&&e(t)})}}}function kf(){return Math.random().toString(36).substr(2,8)}function xn(o){var t=o.pathname;t=t===void 0?"/":t;var e=o.search;return e=e===void 0?"":e,o=o.hash,o=o===void 0?"":o,e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),o&&o!=="#"&&(t+=o.charAt(0)==="#"?o:"#"+o),t}function ra(o){var t={};if(o){var e=o.indexOf("#");0<=e&&(t.hash=o.substr(e),o=o.substr(0,e)),e=o.indexOf("?"),0<=e&&(t.search=o.substr(e),o=o.substr(0,e)),o&&(t.pathname=o)}return t}function sa(o){function t(){var x=ra(p.location.hash.substr(1)),T=x.pathname,N=x.search;x=x.hash;var k=f.state||{};return[k.idx,Ji({pathname:T===void 0?"/":T,search:N===void 0?"":N,hash:x===void 0?"":x,state:k.usr||null,key:k.key||"default"})]}function e(){if(m)v.call(m),m=null;else{var x=zr.Pop,T=t(),N=T[0];if(T=T[1],v.length){if(N!=null){var k=_-N;k&&(m={action:x,location:T,retry:function(){h(-1*k)}},h(k))}}else c(x)}}function s(x){var T=document.querySelector("base"),N="";return T&&T.getAttribute("href")&&(T=p.location.href,N=T.indexOf("#"),N=N===-1?T:T.slice(0,N)),N+"#"+(typeof x=="string"?x:xn(x))}function n(x,T){return T===void 0&&(T=null),Ji(Gr({pathname:g.pathname,hash:"",search:""},typeof x=="string"?ra(x):x,{state:T,key:kf()}))}function c(x){d=x,x=t(),_=x[0],g=x[1],y.call({action:d,location:g})}function u(x,T){function N(){u(x,T)}var k=zr.Push,w=n(x,T);if(!v.length||(v.call({action:k,location:w,retry:N}),!1)){var A=[{usr:w.state,key:w.key,idx:_+1},s(w)];w=A[0],A=A[1];try{f.pushState(w,"",A)}catch{p.location.assign(A)}c(k)}}function l(x,T){function N(){l(x,T)}var k=zr.Replace,w=n(x,T);v.length&&(v.call({action:k,location:w,retry:N}),1)||(w=[{usr:w.state,key:w.key,idx:_},s(w)],f.replaceState(w[0],"",w[1]),c(k))}function h(x){f.go(x)}o===void 0&&(o={}),o=o.window;var p=o===void 0?document.defaultView:o,f=p.history,m=null;p.addEventListener("popstate",e),p.addEventListener("hashchange",function(){var x=t()[1];xn(x)!==xn(g)&&e()});var d=zr.Pop;o=t();var _=o[0],g=o[1],y=ea(),v=ea();return _==null&&(_=0,f.replaceState(Gr({},f.state,{idx:_}),"")),{get action(){return d},get location(){return g},createHref:s,push:u,replace:l,go:h,back:function(){h(-1)},forward:function(){h(1)},listen:function(x){return y.push(x)},block:function(x){var T=v.push(x);return v.length===1&&p.addEventListener("beforeunload",ta),function(){T(),v.length||p.removeEventListener("beforeunload",ta)}}}}r();Ve();r();Ve();var Nf,Tr,oa;var yn=[],na=ot.__b,ia=ot.__r,aa=ot.diffed,ca=ot.__c,ua=ot.unmount;function Of(){var o;for(yn.sort(function(t,e){return t.__v.__b-e.__v.__b});o=yn.pop();)if(o.__P)try{o.__H.__h.forEach(vo),o.__H.__h.forEach(vn),o.__H.__h=[]}catch(t){o.__H.__h=[],ot.__e(t,o.__v)}}ot.__b=function(o){Tr=null,na&&na(o)},ot.__r=function(o){ia&&ia(o),Nf=0;var t=(Tr=o.__c).__H;t&&(t.__h.forEach(vo),t.__h.forEach(vn),t.__h=[])},ot.diffed=function(o){aa&&aa(o);var t=o.__c;t&&t.__H&&t.__H.__h.length&&(yn.push(t)!==1&&oa===ot.requestAnimationFrame||((oa=ot.requestAnimationFrame)||function(e){var s,n=function(){clearTimeout(c),la&&cancelAnimationFrame(s),setTimeout(e)},c=setTimeout(n,100);la&&(s=requestAnimationFrame(n))})(Of)),Tr=null},ot.__c=function(o,t){t.some(function(e){try{e.__h.forEach(vo),e.__h=e.__h.filter(function(s){return!s.__||vn(s)})}catch(s){t.some(function(n){n.__h&&(n.__h=[])}),t=[],ot.__e(s,e.__v)}}),ca&&ca(o,t)},ot.unmount=function(o){ua&&ua(o);var t,e=o.__c;e&&e.__H&&(e.__H.__.forEach(function(s){try{vo(s)}catch(n){t=n}}),t&&ot.__e(t,e.__v))};var la=typeof requestAnimationFrame=="function";function vo(o){var t=Tr,e=o.__c;typeof e=="function"&&(o.__c=void 0,e()),Tr=t}function vn(o){var t=Tr;o.__c=o.__(),Tr=t}function wn(o,t){return wn=Object.setPrototypeOf||function(e,s){return e.__proto__=s,e},wn(o,t)}var Df={};function Ef(o,t){for(var e in t)o[e]=t[e];return o}function Rf(o,t,e){var s,n=/(?:\?([^#]*))?(#.*)?$/,c=o.match(n),u={};if(c&&c[1])for(var l=c[1].split("&"),h=0;h<l.length;h++){var p=l[h].split("=");u[decodeURIComponent(p[0])]=decodeURIComponent(p.slice(1).join("="))}o=bn(o.replace(n,"")),t=bn(t||"");for(var f=Math.max(o.length,t.length),m=0;m<f;m++)if(t[m]&&t[m].charAt(0)===":"){var d=t[m].replace(/(^:|[+*?]+$)/g,""),_=(t[m].match(/[+*?]+$/)||Df)[0]||"",g=~_.indexOf("+"),y=~_.indexOf("*"),v=o[m]||"";if(!v&&!y&&(_.indexOf("?")<0||g)){s=!1;break}if(u[d]=decodeURIComponent(v),g||y){u[d]=o.slice(m).map(decodeURIComponent).join("/");break}}else if(t[m]!==o[m]){s=!1;break}return(e.default===!0||s!==!1)&&u}function Mf(o,t){return o.rank<t.rank?1:o.rank>t.rank?-1:o.index-t.index}function Ff(o,t){return o.index=t,o.rank=function(e){return e.props.default?0:bn(e.props.path).map(If).join("")}(o),o.props}function bn(o){return o.replace(/(^\/+|\/+$)/g,"").split("/")}function If(o){return o.charAt(0)==":"?1+"*+?".indexOf(o.charAt(o.length-1))||4:5}var Pf=Ki({}),le=null,Ar=[],qf={};function ha(){var o;return""+((o=le&&le.location?le.location:le&&le.getCurrentLocation?le.getCurrentLocation():typeof location!="undefined"?location:qf).pathname||"")+(o.search||"")}function Tn(o,t){return t===void 0&&(t=!1),typeof o!="string"&&o.url&&(t=o.replace,o=o.url),function(e){for(var s=Ar.length;s--;)if(Ar[s].canRoute(e))return!0;return!1}(o)&&function(e,s){s===void 0&&(s="push"),le&&le[s]?le[s](e):typeof history!="undefined"&&history[s+"State"]&&history[s+"State"](null,null,e)}(o,t?"replace":"push"),pa(o)}function pa(o){for(var t=!1,e=0;e<Ar.length;e++)Ar[e].routeTo(o)===!0&&(t=!0);return t}function Vf(o){if(o&&o.getAttribute){var t=o.getAttribute("href"),e=o.getAttribute("target");if(t&&t.match(/^\//g)&&(!e||e.match(/^_?self$/i)))return Tn(t)}}function Lf(o){return o&&(o.stopImmediatePropagation&&o.stopImmediatePropagation(),o.stopPropagation&&o.stopPropagation(),o.preventDefault()),!1}function Bf(o){if(!(o.ctrlKey||o.metaKey||o.altKey||o.shiftKey||o.button!==0)){var t=o.target;do if(String(t.nodeName).toUpperCase()==="A"&&t.getAttribute("href")){if(t.hasAttribute("data-native")||t.hasAttribute("native"))return;if(Vf(t))return Lf(o)}while(t=t.parentNode)}}var fa=!1,ma=function(o){var t,e;function s(c){var u;return u=o.call(this,c)||this,c.history&&(le=c.history),u.state={url:c.url||ha()},u.contextValue={},fa||(typeof addEventListener=="function"&&(le||addEventListener("popstate",function(){pa(ha())}),addEventListener("click",Bf)),fa=!0),u}e=o,(t=s).prototype=Object.create(e.prototype),t.prototype.constructor=t,wn(t,e);var n=s.prototype;return n.shouldComponentUpdate=function(c){return c.static!==!0||c.url!==this.props.url||c.onChange!==this.props.onChange},n.canRoute=function(c){var u=xo(this.props.children);return this.getMatchingChildren(u,c,!1).length>0},n.routeTo=function(c){this.setState({url:c});var u=this.canRoute(c);return this.updating||this.forceUpdate(),u},n.componentWillMount=function(){this.updating=!0},n.componentDidMount=function(){var c=this;Ar.push(this),le&&(this.unlisten=le.listen(function(u){var l=u.location||u;c.routeTo(""+(l.pathname||"")+(l.search||""))})),this.updating=!1},n.componentWillUnmount=function(){typeof this.unlisten=="function"&&this.unlisten(),Ar.splice(Ar.indexOf(this),1)},n.componentWillUpdate=function(){this.updating=!0},n.componentDidUpdate=function(){this.updating=!1},n.getMatchingChildren=function(c,u,l){return c.filter(Ff).sort(Mf).map(function(h){var p=Rf(u,h.props.path,h.props);if(p){if(l!==!1){var f={url:u,matches:p};return Ef(f,p),delete f.ref,delete f.key,{vnode:Zi(h,f),matches:p}}return{vnode:h,matches:p}}}).filter(Boolean)},n.render=function(c,u){var l=c.onChange,h=u.url,p=this.getMatchingChildren(xo(c.children),h,!0),f=p[0]||{vnode:null,matches:null},m=f.vnode,d=f.matches,_=this.previousUrl;return h!==_&&(this.previousUrl=h,this.contextValue={router:this,url:h,previous:_,active:p.map(function(g){return g.vnode}),current:m,path:m?m.props.path:null,matches:d},typeof l=="function"&&l(this.contextValue)),i(Pf.Provider,{value:this.contextValue},m)},s}(de);Ve();r();Ve();r();r();r();var Ms="14.7.77";r();r();var se=Pt(An());r();var Ca=()=>new DOMException("","AbortError");r();var ka=o=>(t,e,[s,n,c],u)=>{o(t[n],[e,s,c],l=>l[0]===e&&l[1]===s,u)};r();var Na=o=>(t,e,s)=>{let n=[];for(let c=0;c<s.numberOfInputs;c+=1)n.push(new Set);o.set(t,{activeInputs:n,outputs:new Set,passiveInputs:new WeakMap,renderer:e})};r();var Oa=o=>(t,e)=>{o.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})};r();r();var Le=new WeakSet,bo=new WeakMap,Ur=new WeakMap,To=new WeakMap,js=new WeakMap,Hr=new WeakMap,Ao=new WeakMap,Gs=new WeakMap,zs=new WeakMap,Us=new WeakMap;r();var Da={construct(){return Da}},Ea=o=>{try{let t=new Proxy(o,Da);new t}catch{return!1}return!0};r();var Ra=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Sn=(o,t)=>{let e=[],s=o.replace(/^[\s]+/,""),n=s.match(Ra);for(;n!==null;){let c=n[1].slice(1,-1),u=n[0].replace(/([\s]+)?;?$/,"").replace(c,new URL(c,t).toString());e.push(u),s=s.slice(n[0].length).replace(/^[\s]+/,""),n=s.match(Ra)}return[e.join(";"),s]};var Ma=o=>{if(o!==void 0&&!Array.isArray(o))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Fa=o=>{if(!Ea(o))throw new TypeError("The given value for processorCtor should be a constructor.");if(o.prototype===null||typeof o.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},Ia=(o,t,e,s,n,c,u,l,h,p,f,m,d)=>{let _=0;return(g,y,v={credentials:"omit"})=>{let x=f.get(g);if(x!==void 0&&x.has(y))return Promise.resolve();let T=p.get(g);if(T!==void 0){let w=T.get(y);if(w!==void 0)return w}let N=c(g),k=N.audioWorklet===void 0?n(y).then(([w,A])=>{let[S,C]=Sn(w,A),I=`${S};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${C}
})})(window,'_AWGS')`;return e(I)}).then(()=>{let w=d._AWGS.pop();if(w===void 0)throw new SyntaxError;s(N.currentTime,N.sampleRate,()=>w(class{},void 0,(A,S)=>{if(A.trim()==="")throw t();let C=zs.get(N);if(C!==void 0){if(C.has(A))throw t();Fa(S),Ma(S.parameterDescriptors),C.set(A,S)}else Fa(S),Ma(S.parameterDescriptors),zs.set(N,new Map([[A,S]]))},N.sampleRate,void 0,void 0))}):Promise.all([n(y),Promise.resolve(o(m,m))]).then(([[w,A],S])=>{let C=_+1;_=C;let[I,M]=Sn(w,A),L=`${I};((AudioWorkletProcessor,registerProcessor)=>{${M}
})(${S?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${S?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${S?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${C}',class extends AudioWorkletProcessor{process(){return !1}})`,Z=new Blob([L],{type:"application/javascript; charset=utf-8"}),z=URL.createObjectURL(Z);return N.audioWorklet.addModule(z,v).then(()=>{if(l(N))return N;let Y=u(N);return Y.audioWorklet.addModule(z,v).then(()=>Y)}).then(Y=>{if(h===null)throw new SyntaxError;try{new h(Y,`__sac${C}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(z))});return T===void 0?p.set(g,new Map([[y,k]])):T.set(y,k),k.then(()=>{let w=f.get(g);w===void 0?f.set(g,new Set([y])):w.add(y)}).finally(()=>{let w=p.get(g);w!==void 0&&w.delete(y)}),k}};r();r();r();var Dt=(o,t)=>{let e=o.get(t);if(e===void 0)throw new Error("A value with the given key could not be found.");return e};r();var ar=(o,t)=>{let e=Array.from(o).filter(t);if(e.length>1)throw Error("More than one element was found.");if(e.length===0)throw Error("No element was found.");let[s]=e;return o.delete(s),s};var So=(o,t,e,s)=>{let n=Dt(o,t),c=ar(n,u=>u[0]===e&&u[1]===s);return n.size===0&&o.delete(t),c};r();r();var Be=o=>Dt(Ao,o);var Ae=o=>{if(Le.has(o))throw new Error("The AudioNode is already stored.");Le.add(o),Be(o).forEach(t=>t(!0))};r();r();var Co=o=>"port"in o;r();var We=o=>{if(!Le.has(o))throw new Error("The AudioNode is not stored.");Le.delete(o),Be(o).forEach(t=>t(!1))};var Hs=(o,t)=>{!Co(o)&&t.every(e=>e.size===0)&&We(o)};var Pa=(o,t,e,s,n,c,u,l,h,p,f,m,d)=>{let _=new WeakMap;return(g,y,v,x,T)=>{let{activeInputs:N,passiveInputs:k}=c(y),{outputs:w}=c(g),A=l(g),S=C=>{let I=h(y),M=h(g);if(C){let R=So(k,g,v,x);o(N,g,R,!1),!T&&!m(g)&&e(M,I,v,x),d(y)&&Ae(y)}else{let R=s(N,g,v,x);t(k,x,R,!1),!T&&!m(g)&&n(M,I,v,x);let E=u(y);if(E===0)f(y)&&Hs(y,N);else{let j=_.get(y);j!==void 0&&clearTimeout(j),_.set(y,setTimeout(()=>{f(y)&&Hs(y,N)},E*1e3))}}};return p(w,[y,v,x],C=>C[0]===y&&C[1]===v&&C[2]===x,!0)?(A.add(S),f(g)?o(N,g,[v,x,S],!0):t(k,x,[g,v,S],!0),!0):!1}};r();var qa=o=>(t,e,[s,n,c],u)=>{let l=t.get(s);l===void 0?t.set(s,new Set([[n,e,c]])):o(l,[n,e,c],h=>h[0]===n&&h[1]===e,u)};r();var Va=o=>(t,e)=>{let s=o(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(s).connect(t.destination);let n=()=>{e.removeEventListener("ended",n),e.disconnect(s),s.disconnect()};e.addEventListener("ended",n)};r();var La=o=>(t,e)=>{o(t).add(e)};r();var Jf={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},Ba=(o,t,e,s,n,c)=>class extends o{constructor(l,h){let p=n(l),f={...Jf,...h},m=s(p,f),d=c(p)?t():null;super(l,!1,m,d);this._nativeAnalyserNode=m}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(l){this._nativeAnalyserNode.fftSize=l}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(l){let h=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=l,!(l>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=h,e()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(l){let h=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=l,!(this._nativeAnalyserNode.maxDecibels>l))throw this._nativeAnalyserNode.minDecibels=h,e()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(l){this._nativeAnalyserNode.smoothingTimeConstant=l}getByteFrequencyData(l){this._nativeAnalyserNode.getByteFrequencyData(l)}getByteTimeDomainData(l){this._nativeAnalyserNode.getByteTimeDomainData(l)}getFloatFrequencyData(l){this._nativeAnalyserNode.getFloatFrequencyData(l)}getFloatTimeDomainData(l){this._nativeAnalyserNode.getFloatTimeDomainData(l)}};r();r();var ct=(o,t)=>o.context===t;var Wa=(o,t,e)=>()=>{let s=new WeakMap,n=async(c,u)=>{let l=t(c);if(!ct(l,u)){let p={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,fftSize:l.fftSize,maxDecibels:l.maxDecibels,minDecibels:l.minDecibels,smoothingTimeConstant:l.smoothingTimeConstant};l=o(u,p)}return s.set(u,l),await e(c,u,l),l};return{render(c,u){let l=s.get(u);return l!==void 0?Promise.resolve(l):n(c,u)}}};r();r();var Yr=o=>{try{o.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0};r();r();var _e=()=>new DOMException("","IndexSizeError");var $r=o=>{o.getChannelData=(t=>e=>{try{return t.call(o,e)}catch(s){throw s.code===12?_e():s}})(o.getChannelData)};var tm={numberOfChannels:1},ja=(o,t,e,s,n,c,u,l)=>{let h=null;return class Ga{constructor(f){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");let{length:m,numberOfChannels:d,sampleRate:_}={...tm,...f};h===null&&(h=new n(1,1,44100));let g=s!==null&&t(c,c)?new s({length:m,numberOfChannels:d,sampleRate:_}):h.createBuffer(d,m,_);if(g.numberOfChannels===0)throw e();return typeof g.copyFromChannel!="function"?(u(g),$r(g)):t(Yr,()=>Yr(g))||l(g),o.add(g),g}static[Symbol.hasInstance](f){return f!==null&&typeof f=="object"&&Object.getPrototypeOf(f)===Ga.prototype||o.has(f)}}};r();r();var Ct=-34028234663852886e22,Tt=-Ct;r();var Xt=o=>Le.has(o);var em={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},za=(o,t,e,s,n,c,u,l)=>class extends o{constructor(p,f){let m=c(p),d={...em,...f},_=n(m,d),g=u(m),y=g?t():null;super(p,!1,_,y);this._audioBufferSourceNodeRenderer=y,this._isBufferNullified=!1,this._isBufferSet=d.buffer!==null,this._nativeAudioBufferSourceNode=_,this._onended=null,this._playbackRate=e(this,g,_.playbackRate,Tt,Ct)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(p){if(this._nativeAudioBufferSourceNode.buffer=p,p!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(p){this._nativeAudioBufferSourceNode.loop=p}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(p){this._nativeAudioBufferSourceNode.loopEnd=p}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(p){this._nativeAudioBufferSourceNode.loopStart=p}get onended(){return this._onended}set onended(p){let f=typeof p=="function"?l(this,p):null;this._nativeAudioBufferSourceNode.onended=f;let m=this._nativeAudioBufferSourceNode.onended;this._onended=m!==null&&m===f?p:m}get playbackRate(){return this._playbackRate}start(p=0,f=0,m){if(this._nativeAudioBufferSourceNode.start(p,f,m),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=m===void 0?[p,f]:[p,f,m]),this.context.state!=="closed"){Ae(this);let d=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",d),Xt(this)&&We(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",d)}}stop(p=0){this._nativeAudioBufferSourceNode.stop(p),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=p)}};r();var Ua=(o,t,e,s,n)=>()=>{let c=new WeakMap,u=null,l=null,h=async(p,f)=>{let m=e(p),d=ct(m,f);if(!d){let _={buffer:m.buffer,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,loop:m.loop,loopEnd:m.loopEnd,loopStart:m.loopStart,playbackRate:m.playbackRate.value};m=t(f,_),u!==null&&m.start(...u),l!==null&&m.stop(l)}return c.set(f,m),d?await o(f,p.playbackRate,m.playbackRate):await s(f,p.playbackRate,m.playbackRate),await n(p,f,m),m};return{set start(p){u=p},set stop(p){l=p},render(p,f){let m=c.get(f);return m!==void 0?Promise.resolve(m):h(p,f)}}};r();r();r();r();var Ha=o=>"playbackRate"in o;r();var Ya=o=>"frequency"in o&&"gain"in o;r();var $a=o=>"offset"in o;r();var Xa=o=>!("frequency"in o)&&"gain"in o;r();var Qa=o=>"detune"in o&&"frequency"in o;r();var Za=o=>"pan"in o;r();var Mt=o=>Dt(bo,o);r();var cr=o=>Dt(To,o);var ko=(o,t)=>{let{activeInputs:e}=Mt(o);e.forEach(n=>n.forEach(([c])=>{t.includes(o)||ko(c,[...t,o])}));let s=Ha(o)?[o.playbackRate]:Co(o)?Array.from(o.parameters.values()):Ya(o)?[o.Q,o.detune,o.frequency,o.gain]:$a(o)?[o.offset]:Xa(o)?[o.gain]:Qa(o)?[o.detune,o.frequency]:Za(o)?[o.pan]:[];for(let n of s){let c=cr(n);c!==void 0&&c.activeInputs.forEach(([u])=>ko(u,t))}Xt(o)&&We(o)};var ur=o=>{ko(o.destination,[])};r();var No=o=>o===void 0||typeof o=="number"||typeof o=="string"&&(o==="balanced"||o==="interactive"||o==="playback");var Ka=(o,t,e,s,n,c,u,l,h)=>class extends o{constructor(f={}){if(h===null)throw new Error("Missing the native AudioContext constructor.");let m;try{m=new h(f)}catch(g){throw g.code===12&&g.message==="sampleRate is not in range"?e():g}if(m===null)throw s();if(!No(f.latencyHint))throw new TypeError(`The provided value '${f.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(f.sampleRate!==void 0&&m.sampleRate!==f.sampleRate)throw e();super(m,2);let{latencyHint:d}=f,{sampleRate:_}=m;if(this._baseLatency=typeof m.baseLatency=="number"?m.baseLatency:d==="balanced"?512/_:d==="interactive"||d===void 0?256/_:d==="playback"?1024/_:Math.max(2,Math.min(128,Math.round(d*_/128)))*128/_,this._nativeAudioContext=m,h.name==="webkitAudioContext"?(this._nativeGainNode=m.createGain(),this._nativeOscillatorNode=m.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(m.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,m.state==="running"){this._state="suspended";let g=()=>{this._state==="suspended"&&(this._state=null),m.removeEventListener("statechange",g)};m.addEventListener("statechange",g)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw t()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),ur(this)}))}createMediaElementSource(f){return new n(this,{mediaElement:f})}createMediaStreamDestination(){return new c(this)}createMediaStreamSource(f){return new u(this,{mediaStream:f})}createMediaStreamTrackSource(f){return new l(this,{mediaStreamTrack:f})}resume(){return this._state==="suspended"?new Promise((f,m)=>{let d=()=>{this._nativeAudioContext.removeEventListener("statechange",d),this._nativeAudioContext.state==="running"?f():this.resume().then(f,m)};this._nativeAudioContext.addEventListener("statechange",d)}):this._nativeAudioContext.resume().catch(f=>{throw f===void 0||f.code===15?t():f})}suspend(){return this._nativeAudioContext.suspend().catch(f=>{throw f===void 0?t():f})}};r();var Ja=(o,t,e,s,n,c,u,l)=>class extends o{constructor(p,f){let m=c(p),d=u(m),_=n(m,f,d),g=d?t(l):null;super(p,!1,_,g);this._isNodeOfNativeOfflineAudioContext=d,this._nativeAudioDestinationNode=_}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(p){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(p>this._nativeAudioDestinationNode.maxChannelCount)throw e();this._nativeAudioDestinationNode.channelCount=p}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(p){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=p}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}};r();var tc=o=>{let t=new WeakMap,e=async(s,n)=>{let c=n.destination;return t.set(n,c),await o(s,n,c),c};return{render(s,n){let c=t.get(n);return c!==void 0?Promise.resolve(c):e(s,n)}}};r();var ec=(o,t,e,s,n,c,u,l)=>(h,p)=>{let f=p.listener,m=()=>{let w=new Float32Array(1),A=t(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),S=u(p),C=!1,I=[0,0,-1,0,1,0],M=[0,0,0],R=()=>{if(C)return;C=!0;let Z=s(p,256,9,0);Z.onaudioprocess=({inputBuffer:z})=>{let Y=[c(z,w,0),c(z,w,1),c(z,w,2),c(z,w,3),c(z,w,4),c(z,w,5)];Y.some((D,P)=>D!==I[P])&&(f.setOrientation(...Y),I=Y);let B=[c(z,w,6),c(z,w,7),c(z,w,8)];B.some((D,P)=>D!==M[P])&&(f.setPosition(...B),M=B)},A.connect(Z)},E=Z=>z=>{z!==I[Z]&&(I[Z]=z,f.setOrientation(...I))},j=Z=>z=>{z!==M[Z]&&(M[Z]=z,f.setPosition(...M))},L=(Z,z,Y)=>{let B=e(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:z});B.connect(A,0,Z),B.start(),Object.defineProperty(B.offset,"defaultValue",{get(){return z}});let D=o({context:h},S,B.offset,Tt,Ct);return l(D,"value",P=>()=>P.call(D),P=>O=>{try{P.call(D,O)}catch(W){if(W.code!==9)throw W}R(),S&&Y(O)}),D.cancelAndHoldAtTime=(P=>S?()=>{throw n()}:(...O)=>{let W=P.apply(D,O);return R(),W})(D.cancelAndHoldAtTime),D.cancelScheduledValues=(P=>S?()=>{throw n()}:(...O)=>{let W=P.apply(D,O);return R(),W})(D.cancelScheduledValues),D.exponentialRampToValueAtTime=(P=>S?()=>{throw n()}:(...O)=>{let W=P.apply(D,O);return R(),W})(D.exponentialRampToValueAtTime),D.linearRampToValueAtTime=(P=>S?()=>{throw n()}:(...O)=>{let W=P.apply(D,O);return R(),W})(D.linearRampToValueAtTime),D.setTargetAtTime=(P=>S?()=>{throw n()}:(...O)=>{let W=P.apply(D,O);return R(),W})(D.setTargetAtTime),D.setValueAtTime=(P=>S?()=>{throw n()}:(...O)=>{let W=P.apply(D,O);return R(),W})(D.setValueAtTime),D.setValueCurveAtTime=(P=>S?()=>{throw n()}:(...O)=>{let W=P.apply(D,O);return R(),W})(D.setValueCurveAtTime),D};return{forwardX:L(0,0,E(0)),forwardY:L(1,0,E(1)),forwardZ:L(2,-1,E(2)),positionX:L(6,0,j(0)),positionY:L(7,0,j(1)),positionZ:L(8,0,j(2)),upX:L(3,0,E(3)),upY:L(4,1,E(4)),upZ:L(5,0,E(5))}},{forwardX:d,forwardY:_,forwardZ:g,positionX:y,positionY:v,positionZ:x,upX:T,upY:N,upZ:k}=f.forwardX===void 0?m():f;return{get forwardX(){return d},get forwardY(){return _},get forwardZ(){return g},get positionX(){return y},get positionY(){return v},get positionZ(){return x},get upX(){return T},get upY(){return N},get upZ(){return k}}};r();r();var Sr=o=>"context"in o;r();var lr=o=>Sr(o[0]);r();r();var Se=(o,t,e,s)=>{for(let n of o)if(e(n)){if(s)return!1;throw Error("The set contains at least one similar element.")}return o.add(t),!0};var Cn=(o,t,[e,s],n)=>{Se(o,[t,e,s],c=>c[0]===t&&c[1]===e,n)};r();var kn=(o,[t,e,s],n)=>{let c=o.get(t);c===void 0?o.set(t,new Set([[e,s]])):Se(c,[e,s],u=>u[0]===e,n)};r();r();var ge=o=>"inputs"in o;var Xr=(o,t,e,s)=>{if(ge(t)){let n=t.inputs[s];return o.connect(n,e,0),[n,e,0]}return o.connect(t,e,s),[t,e,s]};r();var Nn=(o,t,e)=>{for(let s of o)if(s[0]===t&&s[1]===e)return o.delete(s),s;return null};r();var rc=(o,t,e)=>ar(o,s=>s[0]===t&&s[1]===e);r();var On=(o,t)=>{if(!Be(o).delete(t))throw new Error("Missing the expected event listener.")};r();var Dn=(o,t,e)=>{let s=Dt(o,t),n=ar(s,c=>c[0]===e);return s.size===0&&o.delete(t),n};r();var Qr=(o,t,e,s)=>{ge(t)?o.disconnect(t.inputs[s],e,0):o.disconnect(t,e,s)};r();var dt=o=>Dt(Ur,o);r();var Cr=o=>Dt(js,o);r();var Qe=o=>Gs.has(o);r();var Zr=o=>!Le.has(o);r();var En=(o,t)=>new Promise(e=>{if(t!==null)e(!0);else{let s=o.createScriptProcessor(256,1,1),n=o.createGain(),c=o.createBuffer(1,2,44100),u=c.getChannelData(0);u[0]=1,u[1]=1;let l=o.createBufferSource();l.buffer=c,l.loop=!0,l.connect(s).connect(o.destination),l.connect(n),l.disconnect(n),s.onaudioprocess=h=>{let p=h.inputBuffer.getChannelData(0);Array.prototype.some.call(p,f=>f===1)?e(!0):e(!1),l.stop(),s.onaudioprocess=null,l.disconnect(s),s.disconnect(o.destination)},l.start()}});r();var Oo=(o,t)=>{let e=new Map;for(let s of o)for(let n of s){let c=e.get(n);e.set(n,c===void 0?1:c+1)}e.forEach((s,n)=>t(n,s))};r();r();var kr=o=>"context"in o;var sc=o=>{let t=new Map;o.connect=(e=>(s,n=0,c=0)=>{let u=kr(s)?e(s,n,c):e(s,n),l=t.get(s);return l===void 0?t.set(s,[{input:c,output:n}]):l.every(h=>h.input!==c||h.output!==n)&&l.push({input:c,output:n}),u})(o.connect.bind(o)),o.disconnect=(e=>(s,n,c)=>{if(e.apply(o),s===void 0)t.clear();else if(typeof s=="number")for(let[u,l]of t){let h=l.filter(p=>p.output!==s);h.length===0?t.delete(u):t.set(u,h)}else if(t.has(s))if(n===void 0)t.delete(s);else{let u=t.get(s);if(u!==void 0){let l=u.filter(h=>h.output!==n&&(h.input!==c||c===void 0));l.length===0?t.delete(s):t.set(s,l)}}for(let[u,l]of t)l.forEach(h=>{kr(u)?o.connect(u,h.output,h.input):o.connect(u,h.output)})})(o.disconnect)};var rm=(o,t,e,s)=>{let{activeInputs:n,passiveInputs:c}=cr(t),{outputs:u}=Mt(o),l=Be(o),h=p=>{let f=dt(o),m=Cr(t);if(p){let d=Dn(c,o,e);Cn(n,o,d,!1),!s&&!Qe(o)&&f.connect(m,e)}else{let d=rc(n,o,e);kn(c,d,!1),!s&&!Qe(o)&&f.disconnect(m,e)}};return Se(u,[t,e],p=>p[0]===t&&p[1]===e,!0)?(l.add(h),Xt(o)?Cn(n,o,[e,h],!0):kn(c,[o,e,h],!0),!0):!1},sm=(o,t,e,s)=>{let{activeInputs:n,passiveInputs:c}=Mt(t),u=Nn(n[s],o,e);return u===null?[So(c,o,e,s)[2],!1]:[u[2],!0]},om=(o,t,e)=>{let{activeInputs:s,passiveInputs:n}=cr(t),c=Nn(s,o,e);return c===null?[Dn(n,o,e)[1],!1]:[c[2],!0]},Rn=(o,t,e,s,n)=>{let[c,u]=sm(o,e,s,n);if(c!==null&&(On(o,c),u&&!t&&!Qe(o)&&Qr(dt(o),dt(e),s,n)),Xt(e)){let{activeInputs:l}=Mt(e);Hs(e,l)}},Mn=(o,t,e,s)=>{let[n,c]=om(o,e,s);n!==null&&(On(o,n),c&&!t&&!Qe(o)&&dt(o).disconnect(Cr(e),s))},nm=(o,t)=>{let e=Mt(o),s=[];for(let n of e.outputs)lr(n)?Rn(o,t,...n):Mn(o,t,...n),s.push(n[0]);return e.outputs.clear(),s},im=(o,t,e)=>{let s=Mt(o),n=[];for(let c of s.outputs)c[1]===e&&(lr(c)?Rn(o,t,...c):Mn(o,t,...c),n.push(c[0]),s.outputs.delete(c));return n},am=(o,t,e,s,n)=>{let c=Mt(o);return Array.from(c.outputs).filter(u=>u[0]===e&&(s===void 0||u[1]===s)&&(n===void 0||u[2]===n)).map(u=>(lr(u)?Rn(o,t,...u):Mn(o,t,...u),c.outputs.delete(u),u[0]))},oc=(o,t,e,s,n,c,u,l,h,p,f,m,d,_,g,y)=>class extends p{constructor(x,T,N,k){super(N);this._context=x,this._nativeAudioNode=N;let w=f(x);m(w)&&e(En,()=>En(w,y))!==!0&&sc(N),Ur.set(this,N),Ao.set(this,new Set),x.state!=="closed"&&T&&Ae(this),o(this,k,N)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(x){this._nativeAudioNode.channelCount=x}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(x){this._nativeAudioNode.channelCountMode=x}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(x){this._nativeAudioNode.channelInterpretation=x}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(x,T=0,N=0){if(T<0||T>=this._nativeAudioNode.numberOfOutputs)throw n();let k=f(this._context),w=g(k);if(d(x)||_(x))throw c();if(Sr(x)){let C=dt(x);try{let M=Xr(this._nativeAudioNode,C,T,N),R=Zr(this);(w||R)&&this._nativeAudioNode.disconnect(...M),this.context.state!=="closed"&&!R&&Zr(x)&&Ae(x)}catch(M){throw M.code===12?c():M}if(t(this,x,T,N,w)){let M=h([this],x);Oo(M,s(w))}return x}let A=Cr(x);if(A.name==="playbackRate"&&A.maxValue===1024)throw u();try{this._nativeAudioNode.connect(A,T),(w||Zr(this))&&this._nativeAudioNode.disconnect(A,T)}catch(C){throw C.code===12?c():C}if(rm(this,x,T,w)){let C=h([this],x);Oo(C,s(w))}}disconnect(x,T,N){let k,w=f(this._context),A=g(w);if(x===void 0)k=nm(this,A);else if(typeof x=="number"){if(x<0||x>=this.numberOfOutputs)throw n();k=im(this,A,x)}else{if(T!==void 0&&(T<0||T>=this.numberOfOutputs)||Sr(x)&&N!==void 0&&(N<0||N>=x.numberOfInputs))throw n();if(k=am(this,A,x,T,N),k.length===0)throw c()}for(let S of k){let C=h([this],S);Oo(C,l)}}};r();var nc=Pt(An()),ic=(o,t,e,s,n,c,u,l,h,p,f,m,d)=>(_,g,y,v=null,x=null)=>{let T=new nc.AutomationEventList(y.defaultValue),N=g?s(T):null,k={get defaultValue(){return y.defaultValue},get maxValue(){return v===null?y.maxValue:v},get minValue(){return x===null?y.minValue:x},get value(){return y.value},set value(w){y.value=w,k.setValueAtTime(w,_.context.currentTime)},cancelAndHoldAtTime(w){if(typeof y.cancelAndHoldAtTime=="function")N===null&&T.flush(_.context.currentTime),T.add(n(w)),y.cancelAndHoldAtTime(w);else{let A=Array.from(T).pop();N===null&&T.flush(_.context.currentTime),T.add(n(w));let S=Array.from(T).pop();y.cancelScheduledValues(w),A!==S&&S!==void 0&&(S.type==="exponentialRampToValue"?y.exponentialRampToValueAtTime(S.value,S.endTime):S.type==="linearRampToValue"?y.linearRampToValueAtTime(S.value,S.endTime):S.type==="setValue"?y.setValueAtTime(S.value,S.startTime):S.type==="setValueCurve"&&y.setValueCurveAtTime(S.values,S.startTime,S.duration))}return k},cancelScheduledValues(w){return N===null&&T.flush(_.context.currentTime),T.add(c(w)),y.cancelScheduledValues(w),k},exponentialRampToValueAtTime(w,A){if(w===0)throw new RangeError;if(!Number.isFinite(A)||A<0)throw new RangeError;return N===null&&T.flush(_.context.currentTime),T.add(u(w,A)),y.exponentialRampToValueAtTime(w,A),k},linearRampToValueAtTime(w,A){return N===null&&T.flush(_.context.currentTime),T.add(l(w,A)),y.linearRampToValueAtTime(w,A),k},setTargetAtTime(w,A,S){return N===null&&T.flush(_.context.currentTime),T.add(h(w,A,S)),y.setTargetAtTime(w,A,S),k},setValueAtTime(w,A){return N===null&&T.flush(_.context.currentTime),T.add(p(w,A)),y.setValueAtTime(w,A),k},setValueCurveAtTime(w,A,S){let C=w instanceof Float32Array?w:new Float32Array(w);if(m!==null&&m.name==="webkitAudioContext"){let I=A+S,M=_.context.sampleRate,R=Math.ceil(A*M),E=Math.floor(I*M),j=E-R,L=new Float32Array(j);for(let z=0;z<j;z+=1){let Y=(C.length-1)/S*((R+z)/M-A),B=Math.floor(Y),D=Math.ceil(Y);L[z]=B===D?C[B]:(1-(Y-B))*C[B]+(1-(D-Y))*C[D]}N===null&&T.flush(_.context.currentTime),T.add(f(L,A,S)),y.setValueCurveAtTime(L,A,S);let Z=E/M;Z<I&&d(k,L[L.length-1],Z),d(k,C[C.length-1],I)}else N===null&&T.flush(_.context.currentTime),T.add(f(C,A,S)),y.setValueCurveAtTime(C,A,S);return k}};return e.set(k,y),t.set(k,_),o(k,N),k};r();var ac=o=>({replay(t){for(let e of o)if(e.type==="exponentialRampToValue"){let{endTime:s,value:n}=e;t.exponentialRampToValueAtTime(n,s)}else if(e.type==="linearRampToValue"){let{endTime:s,value:n}=e;t.linearRampToValueAtTime(n,s)}else if(e.type==="setTarget"){let{startTime:s,target:n,timeConstant:c}=e;t.setTargetAtTime(n,s,c)}else if(e.type==="setValue"){let{startTime:s,value:n}=e;t.setValueAtTime(n,s)}else if(e.type==="setValueCurve"){let{duration:s,startTime:n,values:c}=e;t.setValueCurveAtTime(c,n,s)}else throw new Error("Can't apply an unknown automation.")}});r();r();var Ys=class{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach((s,n)=>t.call(e,s,n,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}};var cm={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},cc=(o,t,e,s,n,c,u,l,h,p,f,m,d,_)=>class extends t{constructor(y,v,x){var T;let N=l(y),k=h(N),w=f({...cm,...x});d(w);let A=zs.get(N),S=A==null?void 0:A.get(v),C=k||N.state!=="closed"?N:(T=u(N))!==null&&T!==void 0?T:N,I=n(C,k?null:y.baseLatency,p,v,S,w),M=k?s(v,w,S):null;super(y,!0,I,M);let R=[];I.parameters.forEach((j,L)=>{let Z=e(this,k,j);R.push([L,Z])}),this._nativeAudioWorkletNode=I,this._onprocessorerror=null,this._parameters=new Ys(R),k&&o(N,this);let{activeInputs:E}=c(this);m(I,E)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(y){let v=typeof y=="function"?_(this,y):null;this._nativeAudioWorkletNode.onprocessorerror=v;let x=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=x!==null&&x===v?y:x}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};r();r();function Kr(o,t,e,s,n){if(typeof o.copyFromChannel=="function")t[e].byteLength===0&&(t[e]=new Float32Array(128)),o.copyFromChannel(t[e],s,n);else{let c=o.getChannelData(s);if(t[e].byteLength===0)t[e]=c.slice(n,n+128);else{let u=new Float32Array(c.buffer,n*Float32Array.BYTES_PER_ELEMENT,128);t[e].set(u)}}}r();var Do=(o,t,e,s,n)=>{typeof o.copyToChannel=="function"?t[e].byteLength!==0&&o.copyToChannel(t[e],s,n):t[e].byteLength!==0&&o.getChannelData(s).set(t[e],n)};r();var Jr=(o,t)=>{let e=[];for(let s=0;s<o;s+=1){let n=[],c=typeof t=="number"?t:t[s];for(let u=0;u<c;u+=1)n.push(new Float32Array(128));e.push(n)}return e};r();var uc=(o,t)=>{let e=Dt(Us,o),s=dt(t);return Dt(e,s)};var um=async(o,t,e,s,n,c,u)=>{let l=t===null?Math.ceil(o.context.length/128)*128:t.length,h=s.channelCount*s.numberOfInputs,p=n.reduce((v,x)=>v+x,0),f=p===0?null:e.createBuffer(p,l,e.sampleRate);if(c===void 0)throw new Error("Missing the processor constructor.");let m=Mt(o),d=await uc(e,o),_=Jr(s.numberOfInputs,s.channelCount),g=Jr(s.numberOfOutputs,n),y=Array.from(o.parameters.keys()).reduce((v,x)=>({...v,[x]:new Float32Array(128)}),{});for(let v=0;v<l;v+=128){if(s.numberOfInputs>0&&t!==null)for(let x=0;x<s.numberOfInputs;x+=1)for(let T=0;T<s.channelCount;T+=1)Kr(t,_[x],T,T,v);c.parameterDescriptors!==void 0&&t!==null&&c.parameterDescriptors.forEach(({name:x},T)=>{Kr(t,y,x,h+T,v)});for(let x=0;x<s.numberOfInputs;x+=1)for(let T=0;T<n[x];T+=1)g[x][T].byteLength===0&&(g[x][T]=new Float32Array(128));try{let x=_.map((N,k)=>m.activeInputs[k].size===0?[]:N),T=u(v/e.sampleRate,e.sampleRate,()=>d.process(x,g,y));if(f!==null)for(let N=0,k=0;N<s.numberOfOutputs;N+=1){for(let w=0;w<n[N];w+=1)Do(f,g[N],w,k+w,v);k+=n[N]}if(!T)break}catch(x){o.dispatchEvent(new ErrorEvent("processorerror",{colno:x.colno,filename:x.filename,lineno:x.lineno,message:x.message}));break}}return f},lc=(o,t,e,s,n,c,u,l,h,p,f,m,d,_,g,y)=>(v,x,T)=>{let N=new WeakMap,k=null,w=async(A,S)=>{let C=f(A),I=null,M=ct(C,S),R=Array.isArray(x.outputChannelCount)?x.outputChannelCount:Array.from(x.outputChannelCount);if(m===null){let E=R.reduce((z,Y)=>z+Y,0),j=n(S,{channelCount:Math.max(1,E),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,E)}),L=[];for(let z=0;z<A.numberOfOutputs;z+=1)L.push(s(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:R[z]}));let Z=u(S,{channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,gain:1});Z.connect=t.bind(null,L),Z.disconnect=h.bind(null,L),I=[j,L,Z]}else M||(C=new m(S,v));if(N.set(S,I===null?C:I[2]),I!==null){if(k===null){if(T===void 0)throw new Error("Missing the processor constructor.");if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");let Y=A.channelCount*A.numberOfInputs,B=T.parameterDescriptors===void 0?0:T.parameterDescriptors.length,D=Y+B;k=um(A,D===0?null:await(async()=>{let O=new d(D,Math.ceil(A.context.length/128)*128,S.sampleRate),W=[],H=[];for(let ft=0;ft<x.numberOfInputs;ft+=1)W.push(u(O,{channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,gain:1})),H.push(n(O,{channelCount:x.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:x.channelCount}));let et=await Promise.all(Array.from(A.parameters.values()).map(async ft=>{let St=c(O,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ft.value});return await _(O,ft,St.offset),St})),q=s(O,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,Y+B)});for(let ft=0;ft<x.numberOfInputs;ft+=1){W[ft].connect(H[ft]);for(let St=0;St<x.channelCount;St+=1)H[ft].connect(q,St,ft*x.channelCount+St)}for(let[ft,St]of et.entries())St.connect(q,0,Y+ft),St.start(0);return q.connect(O.destination),await Promise.all(W.map(ft=>g(A,O,ft))),y(O)})(),S,x,R,T,p)}let E=await k,j=e(S,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[L,Z,z]=I;E!==null&&(j.buffer=E,j.start(0)),j.connect(L);for(let Y=0,B=0;Y<A.numberOfOutputs;Y+=1){let D=Z[Y];for(let P=0;P<R[Y];P+=1)L.connect(D,B+P,P);B+=R[Y]}return z}if(M)for(let[E,j]of A.parameters.entries())await o(S,j,C.parameters.get(E));else for(let[E,j]of A.parameters.entries())await _(S,j,C.parameters.get(E));return await g(A,S,C),C};return{render(A,S){l(S,A);let C=N.get(S);return C!==void 0?Promise.resolve(C):w(A,S)}}};r();var hc=(o,t,e,s,n,c,u,l,h,p,f,m,d,_,g,y,v,x,T,N)=>class extends g{constructor(w,A){super(w,A);this._nativeContext=w,this._audioWorklet=o===void 0?void 0:{addModule:(S,C)=>o(this,S,C)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new n(this)}createBuffer(w,A,S){return new e({length:A,numberOfChannels:w,sampleRate:S})}createBufferSource(){return new s(this)}createChannelMerger(w=6){return new c(this,{numberOfInputs:w})}createChannelSplitter(w=6){return new u(this,{numberOfOutputs:w})}createConstantSource(){return new l(this)}createConvolver(){return new h(this)}createDelay(w=1){return new f(this,{maxDelayTime:w})}createDynamicsCompressor(){return new m(this)}createGain(){return new d(this)}createIIRFilter(w,A){return new _(this,{feedback:A,feedforward:w})}createOscillator(){return new y(this)}createPanner(){return new v(this)}createPeriodicWave(w,A,S={disableNormalization:!1}){return new x(this,{...S,imag:A,real:w})}createStereoPanner(){return new T(this)}createWaveShaper(){return new N(this)}decodeAudioData(w,A,S){return p(this._nativeContext,w).then(C=>(typeof A=="function"&&A(C),C),C=>{throw typeof S=="function"&&S(C),C})}};r();var lm={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},pc=(o,t,e,s,n,c,u,l)=>class extends o{constructor(p,f){let m=c(p),d={...lm,...f},_=n(m,d),g=u(m),y=g?e():null;super(p,!1,_,y);this._Q=t(this,g,_.Q,Tt,Ct),this._detune=t(this,g,_.detune,1200*Math.log2(Tt),-1200*Math.log2(Tt)),this._frequency=t(this,g,_.frequency,p.sampleRate/2,0),this._gain=t(this,g,_.gain,40*Math.log10(Tt),Ct),this._nativeBiquadFilterNode=_,l(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(p){this._nativeBiquadFilterNode.type=p}getFrequencyResponse(p,f,m){try{this._nativeBiquadFilterNode.getFrequencyResponse(p,f,m)}catch(d){throw d.code===11?s():d}if(p.length!==f.length||f.length!==m.length)throw s()}};r();var fc=(o,t,e,s,n)=>()=>{let c=new WeakMap,u=async(l,h)=>{let p=e(l),f=ct(p,h);if(!f){let m={Q:p.Q.value,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,detune:p.detune.value,frequency:p.frequency.value,gain:p.gain.value,type:p.type};p=t(h,m)}return c.set(h,p),f?(await o(h,l.Q,p.Q),await o(h,l.detune,p.detune),await o(h,l.frequency,p.frequency),await o(h,l.gain,p.gain)):(await s(h,l.Q,p.Q),await s(h,l.detune,p.detune),await s(h,l.frequency,p.frequency),await s(h,l.gain,p.gain)),await n(l,h,p),p};return{render(l,h){let p=c.get(h);return p!==void 0?Promise.resolve(p):u(l,h)}}};r();var mc=(o,t)=>(e,s)=>{let n=t.get(e);if(n!==void 0)return n;let c=o.get(e);if(c!==void 0)return c;try{let u=s();return u instanceof Promise?(o.set(e,u),u.catch(()=>!1).then(l=>(o.delete(e),t.set(e,l),l))):(t.set(e,u),u)}catch{return t.set(e,!1),!1}};r();var hm={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},dc=(o,t,e,s,n)=>class extends o{constructor(u,l){let h=s(u),p={...hm,...l},f=e(h,p),m=n(h)?t():null;super(u,!1,f,m)}};r();var _c=(o,t,e)=>()=>{let s=new WeakMap,n=async(c,u)=>{let l=t(c);if(!ct(l,u)){let p={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,numberOfInputs:l.numberOfInputs};l=o(u,p)}return s.set(u,l),await e(c,u,l),l};return{render(c,u){let l=s.get(u);return l!==void 0?Promise.resolve(l):n(c,u)}}};r();var pm={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},gc=(o,t,e,s,n,c)=>class extends o{constructor(l,h){let p=s(l),f=c({...pm,...h}),m=e(p,f),d=n(p)?t():null;super(l,!1,m,d)}};r();var xc=(o,t,e)=>()=>{let s=new WeakMap,n=async(c,u)=>{let l=t(c);if(!ct(l,u)){let p={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,numberOfOutputs:l.numberOfOutputs};l=o(u,p)}return s.set(u,l),await e(c,u,l),l};return{render(c,u){let l=s.get(u);return l!==void 0?Promise.resolve(l):n(c,u)}}};r();var yc=o=>(t,e,s)=>o(e,t,s);r();var vc=o=>(t,e,s=0,n=0)=>{let c=t[s];if(c===void 0)throw o();return kr(e)?c.connect(e,0,n):c.connect(e,0)};r();var wc=o=>(t,e)=>{let s=o(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),n=t.createBuffer(1,2,44100);return s.buffer=n,s.loop=!0,s.connect(e),s.start(),()=>{s.stop(),s.disconnect(e)}};r();var fm={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},bc=(o,t,e,s,n,c,u)=>class extends o{constructor(h,p){let f=n(h),m={...fm,...p},d=s(f,m),_=c(f),g=_?e():null;super(h,!1,d,g);this._constantSourceNodeRenderer=g,this._nativeConstantSourceNode=d,this._offset=t(this,_,d.offset,Tt,Ct),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(h){let p=typeof h=="function"?u(this,h):null;this._nativeConstantSourceNode.onended=p;let f=this._nativeConstantSourceNode.onended;this._onended=f!==null&&f===p?h:f}start(h=0){if(this._nativeConstantSourceNode.start(h),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=h),this.context.state!=="closed"){Ae(this);let p=()=>{this._nativeConstantSourceNode.removeEventListener("ended",p),Xt(this)&&We(this)};this._nativeConstantSourceNode.addEventListener("ended",p)}}stop(h=0){this._nativeConstantSourceNode.stop(h),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=h)}};r();var Tc=(o,t,e,s,n)=>()=>{let c=new WeakMap,u=null,l=null,h=async(p,f)=>{let m=e(p),d=ct(m,f);if(!d){let _={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,offset:m.offset.value};m=t(f,_),u!==null&&m.start(u),l!==null&&m.stop(l)}return c.set(f,m),d?await o(f,p.offset,m.offset):await s(f,p.offset,m.offset),await n(p,f,m),m};return{set start(p){u=p},set stop(p){l=p},render(p,f){let m=c.get(f);return m!==void 0?Promise.resolve(m):h(p,f)}}};r();var Ac=o=>t=>(o[0]=t,o[0]);r();var mm={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Sc=(o,t,e,s,n,c)=>class extends o{constructor(l,h){let p=s(l),f={...mm,...h},m=e(p,f),_=n(p)?t():null;super(l,!1,m,_);this._isBufferNullified=!1,this._nativeConvolverNode=m,f.buffer!==null&&c(this,f.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(l){if(this._nativeConvolverNode.buffer=l,l===null&&this._nativeConvolverNode.buffer!==null){let h=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=h.createBuffer(1,1,44100),this._isBufferNullified=!0,c(this,0)}else this._isBufferNullified=!1,c(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(l){this._nativeConvolverNode.normalize=l}};r();var Cc=(o,t,e)=>()=>{let s=new WeakMap,n=async(c,u)=>{let l=t(c);if(!ct(l,u)){let p={buffer:l.buffer,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,disableNormalization:!l.normalize};l=o(u,p)}return s.set(u,l),ge(l)?await e(c,u,l.inputs[0]):await e(c,u,l),l};return{render(c,u){let l=s.get(u);return l!==void 0?Promise.resolve(l):n(c,u)}}};r();var kc=(o,t)=>(e,s,n)=>{if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(e,s,n)}catch(c){throw c.name==="SyntaxError"?o():c}};r();var Nc=()=>new DOMException("","DataCloneError");r();r();var Fn=o=>{let{port1:t,port2:e}=new MessageChannel;return new Promise(s=>{let n=()=>{e.onmessage=null,t.close(),e.close(),s()};e.onmessage=()=>n();try{t.postMessage(o,[o])}finally{n()}})};var Oc=(o,t,e,s,n,c,u,l,h,p,f)=>(m,d)=>{let _=u(m)?m:c(m);if(n.has(d)){let g=e();return Promise.reject(g)}try{n.add(d)}catch{}return t(h,()=>h(_))?_.decodeAudioData(d).then(g=>(Fn(d).catch(()=>{}),t(l,()=>l(g))||f(g),o.add(g),g)):new Promise((g,y)=>{let v=async()=>{try{await Fn(d)}catch{}},x=T=>{y(T),v()};try{_.decodeAudioData(d,T=>{typeof T.copyFromChannel!="function"&&(p(T),$r(T)),o.add(T),v().then(()=>g(T))},T=>{x(T===null?s():T)})}catch(T){x(T)}})};r();var Dc=(o,t,e,s,n,c,u,l)=>(h,p)=>{let f=t.get(h);if(f===void 0)throw new Error("Missing the expected cycle count.");let m=c(h.context),d=l(m);if(f===p){if(t.delete(h),!d&&u(h)){let _=s(h),{outputs:g}=e(h);for(let y of g)if(lr(y)){let v=s(y[0]);o(_,v,y[1],y[2])}else{let v=n(y[0]);_.connect(v,y[1])}}}else t.set(h,f-p)};r();var dm={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Ec=(o,t,e,s,n,c,u)=>class extends o{constructor(h,p){let f=n(h),m={...dm,...p},d=s(f,m),_=c(f),g=_?e(m.maxDelayTime):null;super(h,!1,d,g);this._delayTime=t(this,_,d.delayTime),u(this,m.maxDelayTime)}get delayTime(){return this._delayTime}};r();var Rc=(o,t,e,s,n)=>c=>{let u=new WeakMap,l=async(h,p)=>{let f=e(h),m=ct(f,p);if(!m){let d={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,delayTime:f.delayTime.value,maxDelayTime:c};f=t(p,d)}return u.set(p,f),m?await o(p,h.delayTime,f.delayTime):await s(p,h.delayTime,f.delayTime),await n(h,p,f),f};return{render(h,p){let f=u.get(p);return f!==void 0?Promise.resolve(f):l(h,p)}}};r();var Mc=o=>(t,e,s,n)=>o(t[n],c=>c[0]===e&&c[1]===s);r();var Fc=o=>(t,e)=>{o(t).delete(e)};r();r();var Ic=o=>"delayTime"in o;var Pc=(o,t,e)=>function s(n,c){let u=Sr(c)?c:e(o,c);if(Ic(u))return[];if(n[0]===u)return[n];if(n.includes(u))return[];let{outputs:l}=t(u);return Array.from(l).map(h=>s([...n,u],h[0])).reduce((h,p)=>h.concat(p),[])};r();var Eo=(o,t,e)=>{let s=t[e];if(s===void 0)throw o();return s},qc=o=>(t,e=void 0,s=void 0,n=0)=>e===void 0?t.forEach(c=>c.disconnect()):typeof e=="number"?Eo(o,t,e).disconnect():kr(e)?s===void 0?t.forEach(c=>c.disconnect(e)):n===void 0?Eo(o,t,s).disconnect(e,0):Eo(o,t,s).disconnect(e,0,n):s===void 0?t.forEach(c=>c.disconnect(e)):Eo(o,t,s).disconnect(e,0);r();var _m={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Vc=(o,t,e,s,n,c,u,l)=>class extends o{constructor(p,f){let m=c(p),d={..._m,...f},_=s(m,d),g=u(m),y=g?e():null;super(p,!1,_,y);this._attack=t(this,g,_.attack),this._knee=t(this,g,_.knee),this._nativeDynamicsCompressorNode=_,this._ratio=t(this,g,_.ratio),this._release=t(this,g,_.release),this._threshold=t(this,g,_.threshold),l(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(p){let f=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=p,p>2)throw this._nativeDynamicsCompressorNode.channelCount=f,n()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(p){let f=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=p,p==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=f,n()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}};r();var Lc=(o,t,e,s,n)=>()=>{let c=new WeakMap,u=async(l,h)=>{let p=e(l),f=ct(p,h);if(!f){let m={attack:p.attack.value,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,knee:p.knee.value,ratio:p.ratio.value,release:p.release.value,threshold:p.threshold.value};p=t(h,m)}return c.set(h,p),f?(await o(h,l.attack,p.attack),await o(h,l.knee,p.knee),await o(h,l.ratio,p.ratio),await o(h,l.release,p.release),await o(h,l.threshold,p.threshold)):(await s(h,l.attack,p.attack),await s(h,l.knee,p.knee),await s(h,l.ratio,p.ratio),await s(h,l.release,p.release),await s(h,l.threshold,p.threshold)),await n(l,h,p),p};return{render(l,h){let p=c.get(h);return p!==void 0?Promise.resolve(p):u(l,h)}}};r();var Bc=()=>new DOMException("","EncodingError");r();var Wc=o=>t=>new Promise((e,s)=>{if(o===null){s(new SyntaxError);return}let n=o.document.head;if(n===null)s(new SyntaxError);else{let c=o.document.createElement("script"),u=new Blob([t],{type:"application/javascript"}),l=URL.createObjectURL(u),h=o.onerror,p=()=>{o.onerror=h,URL.revokeObjectURL(l)};o.onerror=(f,m,d,_,g)=>{if(m===l||m===o.location.href&&d===1&&_===1)return p(),s(g),!1;if(h!==null)return h(f,m,d,_,g)},c.onerror=()=>{p(),s(new SyntaxError)},c.onload=()=>{p(),e()},c.src=l,c.type="module",n.appendChild(c)}});r();var jc=o=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(e,s,n){if(s!==null){let c=this._listeners.get(s);c===void 0&&(c=o(this,s),typeof s=="function"&&this._listeners.set(s,c)),this._nativeEventTarget.addEventListener(e,c,n)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,s,n){let c=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(e,c===void 0?null:c,n)}};r();var Gc=o=>(t,e,s)=>{Object.defineProperties(o,{currentFrame:{configurable:!0,get(){return Math.round(t*e)}},currentTime:{configurable:!0,get(){return t}}});try{return s()}finally{o!==null&&(delete o.currentFrame,delete o.currentTime)}};r();var zc=o=>async t=>{try{let e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw o()};r();var gm={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Uc=(o,t,e,s,n,c)=>class extends o{constructor(l,h){let p=n(l),f={...gm,...h},m=s(p,f),d=c(p),_=d?e():null;super(l,!1,m,_);this._gain=t(this,d,m.gain,Tt,Ct)}get gain(){return this._gain}};r();var Hc=(o,t,e,s,n)=>()=>{let c=new WeakMap,u=async(l,h)=>{let p=e(l),f=ct(p,h);if(!f){let m={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,gain:p.gain.value};p=t(h,m)}return c.set(h,p),f?await o(h,l.gain,p.gain):await s(h,l.gain,p.gain),await n(l,h,p),p};return{render(l,h){let p=c.get(h);return p!==void 0?Promise.resolve(p):u(l,h)}}};r();var Yc=(o,t)=>e=>t(o,e);r();var $c=o=>t=>{let e=o(t);if(e.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer};r();var Xc=o=>t=>{var e;return(e=o.get(t))!==null&&e!==void 0?e:0};r();var Qc=o=>t=>{let e=o(t);if(e.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return e.renderer};r();var Zc=o=>t=>o.get(t);r();r();var xt=()=>new DOMException("","InvalidStateError");var Kc=o=>t=>{let e=o.get(t);if(e===void 0)throw xt();return e};r();var Jc=(o,t)=>e=>{let s=o.get(e);if(s!==void 0)return s;if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new t(1,1,44100),o.set(e,s),s};r();var tu=o=>t=>{let e=o.get(t);if(e===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return e};r();r();r();var ts=()=>new DOMException("","InvalidAccessError");var eu=o=>{o.getFrequencyResponse=(t=>(e,s,n)=>{if(e.length!==s.length||s.length!==n.length)throw ts();return t.call(o,e,s,n)})(o.getFrequencyResponse)};var xm={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},ru=(o,t,e,s,n,c)=>class extends o{constructor(l,h){let p=s(l),f=n(p),m={...xm,...h},d=t(p,f?null:l.baseLatency,m),_=f?e(m.feedback,m.feedforward):null;super(l,!1,d,_);eu(d),this._nativeIIRFilterNode=d,c(this,1)}getFrequencyResponse(l,h,p){return this._nativeIIRFilterNode.getFrequencyResponse(l,h,p)}};r();r();var Ro=(o,t,e,s,n,c,u,l,h,p,f)=>{let m=p.length,d=l;for(let _=0;_<m;_+=1){let g=e[0]*p[_];for(let y=1;y<n;y+=1){let v=d-y&h-1;g+=e[y]*c[v],g-=o[y]*u[v]}for(let y=n;y<s;y+=1)g+=e[y]*c[d-y&h-1];for(let y=n;y<t;y+=1)g-=o[y]*u[d-y&h-1];c[d]=p[_],u[d]=g,d=d+1&h-1,f[_]=g}return d};var ym=(o,t,e,s)=>{let n=e instanceof Float64Array?e:new Float64Array(e),c=s instanceof Float64Array?s:new Float64Array(s),u=n.length,l=c.length,h=Math.min(u,l);if(n[0]!==1){for(let g=0;g<u;g+=1)c[g]/=n[0];for(let g=1;g<l;g+=1)n[g]/=n[0]}let p=32,f=new Float32Array(p),m=new Float32Array(p),d=t.createBuffer(o.numberOfChannels,o.length,o.sampleRate),_=o.numberOfChannels;for(let g=0;g<_;g+=1){let y=o.getChannelData(g),v=d.getChannelData(g);f.fill(0),m.fill(0),Ro(n,u,c,l,h,f,m,0,p,y,v)}return d},su=(o,t,e,s,n)=>(c,u)=>{let l=new WeakMap,h=null,p=async(f,m)=>{let d=null,_=t(f),g=ct(_,m);if(m.createIIRFilter===void 0?d=o(m,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):g||(_=m.createIIRFilter(u,c)),l.set(m,d===null?_:d),d!==null){if(h===null){if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");let v=new e(f.context.destination.channelCount,f.context.length,m.sampleRate);h=(async()=>{await s(f,v,v.destination);let x=await n(v);return ym(x,m,c,u)})()}let y=await h;return d.buffer=y,d.start(0),d}return await s(f,m,_),_};return{render(f,m){let d=l.get(m);return d!==void 0?Promise.resolve(d):p(f,m)}}};r();var ou=(o,t,e,s,n,c)=>u=>(l,h)=>{let p=o.get(l);if(p===void 0){if(!u&&c(l)){let f=s(l),{outputs:m}=e(l);for(let d of m)if(lr(d)){let _=s(d[0]);t(f,_,d[1],d[2])}else{let _=n(d[0]);f.disconnect(_,d[1])}}o.set(l,h)}else o.set(l,p+h)};r();var nu=(o,t)=>e=>{let s=o.get(e);return t(s)||t(e)};r();var iu=(o,t)=>e=>o.has(e)||t(e);r();var au=(o,t)=>e=>o.has(e)||t(e);r();var cu=(o,t)=>e=>{let s=o.get(e);return t(s)||t(e)};r();var uu=o=>t=>o!==null&&t instanceof o;r();var lu=o=>t=>o!==null&&typeof o.AudioNode=="function"&&t instanceof o.AudioNode;r();var hu=o=>t=>o!==null&&typeof o.AudioParam=="function"&&t instanceof o.AudioParam;r();var pu=(o,t)=>e=>o(e)||t(e);r();var fu=o=>t=>o!==null&&t instanceof o;r();var mu=o=>o!==null&&o.isSecureContext;r();r();var du=(o,t,e,s)=>class extends o{constructor(c,u){let l=e(c),h=t(l,u);if(s(l))throw TypeError();super(c,!0,h,null);this._nativeMediaElementAudioSourceNode=h}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}};r();var vm={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},_u=(o,t,e,s)=>class extends o{constructor(c,u){let l=e(c);if(s(l))throw new TypeError;let h={...vm,...u},p=t(l,h);super(c,!1,p,null);this._nativeMediaStreamAudioDestinationNode=p}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}};r();var gu=(o,t,e,s)=>class extends o{constructor(c,u){let l=e(c),h=t(l,u);if(s(l))throw new TypeError;super(c,!0,h,null);this._nativeMediaStreamAudioSourceNode=h}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}};r();var xu=(o,t,e)=>class extends o{constructor(n,c){let u=e(n),l=t(u,c);super(n,!0,l,null)}};r();var yu=(o,t,e,s,n)=>class extends s{constructor(u={}){if(n===null)throw new Error("Missing the native AudioContext constructor.");let l;try{l=new n(u)}catch(f){throw f.code===12&&f.message==="sampleRate is not in range"?t():f}if(l===null)throw e();if(!No(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&l.sampleRate!==u.sampleRate)throw t();super(l,2);let{latencyHint:h}=u,{sampleRate:p}=l;if(this._baseLatency=typeof l.baseLatency=="number"?l.baseLatency:h==="balanced"?512/p:h==="interactive"||h===void 0?256/p:h==="playback"?1024/p:Math.max(2,Math.min(128,Math.round(h*p/128)))*128/p,this._nativeAudioContext=l,n.name==="webkitAudioContext"?(this._nativeGainNode=l.createGain(),this._nativeOscillatorNode=l.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(l.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,l.state==="running"){this._state="suspended";let f=()=>{this._state==="suspended"&&(this._state=null),l.removeEventListener("statechange",f)};l.addEventListener("statechange",f)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw o()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),ur(this)}))}resume(){return this._state==="suspended"?new Promise((u,l)=>{let h=()=>{this._nativeAudioContext.removeEventListener("statechange",h),this._nativeAudioContext.state==="running"?u():this.resume().then(u,l)};this._nativeAudioContext.addEventListener("statechange",h)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?o():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?o():u})}};r();var vu=(o,t,e,s,n,c)=>class extends e{constructor(l,h){super(l);this._nativeContext=l,Hr.set(this,l),s(l)&&n.set(l,new Set),this._destination=new o(this,h),this._listener=t(this,l),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(l){let h=typeof l=="function"?c(this,l):null;this._nativeContext.onstatechange=h;let p=this._nativeContext.onstatechange;this._onstatechange=p!==null&&p===h?l:p}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}};r();r();var Ce=o=>{let t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{let e=o.decodeAudioData(t.buffer,()=>{});return e===void 0?!1:(e.catch(()=>{}),!0)}catch{}return!1};var wm={numberOfChannels:1},wu=(o,t,e,s,n)=>class extends s{constructor(u){let{length:l,numberOfChannels:h,sampleRate:p}={...wm,...u},f=e(h,l,p);o(Ce,()=>Ce(f))||f.addEventListener("statechange",(()=>{let m=0,d=_=>{this._state==="running"&&(m>0?(f.removeEventListener("statechange",d),_.stopImmediatePropagation(),this._waitForThePromiseToSettle(_)):m+=1)};return d})());super(f,h);this._length=l,this._nativeOfflineAudioContext=f,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",n(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,ur(this)}))}_waitForThePromiseToSettle(u){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}};r();var bu=(o,t)=>(e,s,n)=>{let c=new Set;return e.connect=(u=>(l,h=0,p=0)=>{let f=c.size===0;if(t(l))return u.call(e,l,h,p),o(c,[l,h,p],m=>m[0]===l&&m[1]===h&&m[2]===p,!0),f&&s(),l;u.call(e,l,h),o(c,[l,h],m=>m[0]===l&&m[1]===h,!0),f&&s()})(e.connect),e.disconnect=(u=>(l,h,p)=>{let f=c.size>0;if(l===void 0)u.apply(e),c.clear();else if(typeof l=="number"){u.call(e,l);for(let d of c)d[1]===l&&c.delete(d)}else{t(l)?u.call(e,l,h,p):u.call(e,l,h);for(let d of c)d[0]===l&&(h===void 0||d[1]===h)&&(p===void 0||d[2]===p)&&c.delete(d)}let m=c.size===0;f&&m&&n()})(e.disconnect),e};r();r();var ut=(o,t,e)=>{let s=t[e];s!==void 0&&s!==o[e]&&(o[e]=s)};r();var nt=(o,t)=>{ut(o,t,"channelCount"),ut(o,t,"channelCountMode"),ut(o,t,"channelInterpretation")};r();var In=o=>typeof o.getFloatTimeDomainData=="function";r();var Tu=o=>{o.getFloatTimeDomainData=t=>{let e=new Uint8Array(t.length);o.getByteTimeDomainData(e);let s=Math.max(e.length,o.fftSize);for(let n=0;n<s;n+=1)t[n]=(e[n]-128)*.0078125;return t}};var Au=(o,t)=>(e,s)=>{let n=e.createAnalyser();if(nt(n,s),!(s.maxDecibels>s.minDecibels))throw t();return ut(n,s,"fftSize"),ut(n,s,"maxDecibels"),ut(n,s,"minDecibels"),ut(n,s,"smoothingTimeConstant"),o(In,()=>In(n))||Tu(n),n};r();var Su=o=>o===null?null:o.hasOwnProperty("AudioBuffer")?o.AudioBuffer:null;r();r();var ht=(o,t,e)=>{let s=t[e];s!==void 0&&s!==o[e].value&&(o[e].value=s)};r();var Cu=o=>{o.start=(t=>{let e=!1;return(s=0,n=0,c)=>{if(e)throw xt();t.call(o,s,n,c),e=!0}})(o.start)};r();var es=o=>{o.start=(t=>(e=0,s=0,n)=>{if(typeof n=="number"&&n<0||s<0||e<0)throw new RangeError("The parameters can't be negative.");t.call(o,e,s,n)})(o.start)};r();var rs=o=>{o.stop=(t=>(e=0)=>{if(e<0)throw new RangeError("The parameter can't be negative.");t.call(o,e)})(o.stop)};var ku=(o,t,e,s,n,c,u,l,h,p,f)=>(m,d)=>{let _=m.createBufferSource();return nt(_,d),ht(_,d,"playbackRate"),ut(_,d,"buffer"),ut(_,d,"loop"),ut(_,d,"loopEnd"),ut(_,d,"loopStart"),t(e,()=>e(m))||Cu(_),t(s,()=>s(m))||h(_),t(n,()=>n(m))||p(_,m),t(c,()=>c(m))||es(_),t(u,()=>u(m))||f(_,m),t(l,()=>l(m))||rs(_),o(m,_),_};r();var Nu=o=>o===null?null:o.hasOwnProperty("AudioContext")?o.AudioContext:o.hasOwnProperty("webkitAudioContext")?o.webkitAudioContext:null;r();var Ou=(o,t)=>(e,s,n)=>{let c=e.destination;if(c.channelCount!==s)try{c.channelCount=s}catch{}n&&c.channelCountMode!=="explicit"&&(c.channelCountMode="explicit"),c.maxChannelCount===0&&Object.defineProperty(c,"maxChannelCount",{value:s});let u=o(e,{channelCount:s,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:1});return t(u,"channelCount",l=>()=>l.call(u),l=>h=>{l.call(u,h);try{c.channelCount=h}catch(p){if(h>c.maxChannelCount)throw p}}),t(u,"channelCountMode",l=>()=>l.call(u),l=>h=>{l.call(u,h),c.channelCountMode=h}),t(u,"channelInterpretation",l=>()=>l.call(u),l=>h=>{l.call(u,h),c.channelInterpretation=h}),Object.defineProperty(u,"maxChannelCount",{get:()=>c.maxChannelCount}),u.connect(c),u};r();var Du=o=>o===null?null:o.hasOwnProperty("AudioWorkletNode")?o.AudioWorkletNode:null;r();r();var Eu=o=>{let{port1:t}=new MessageChannel;try{t.postMessage(o)}finally{t.close()}};var Ru=(o,t,e,s,n)=>(c,u,l,h,p,f)=>{if(l!==null)try{let m=new l(c,h,f),d=new Map,_=null;if(Object.defineProperties(m,{channelCount:{get:()=>f.channelCount,set:()=>{throw o()}},channelCountMode:{get:()=>"explicit",set:()=>{throw o()}},onprocessorerror:{get:()=>_,set:g=>{typeof _=="function"&&m.removeEventListener("processorerror",_),_=typeof g=="function"?g:null,typeof _=="function"&&m.addEventListener("processorerror",_)}}}),m.addEventListener=(g=>(...y)=>{if(y[0]==="processorerror"){let v=typeof y[1]=="function"?y[1]:typeof y[1]=="object"&&y[1]!==null&&typeof y[1].handleEvent=="function"?y[1].handleEvent:null;if(v!==null){let x=d.get(y[1]);x!==void 0?y[1]=x:(y[1]=T=>{T.type==="error"?(Object.defineProperties(T,{type:{value:"processorerror"}}),v(T)):v(new ErrorEvent(y[0],{...T}))},d.set(v,y[1]))}}return g.call(m,"error",y[1],y[2]),g.call(m,...y)})(m.addEventListener),m.removeEventListener=(g=>(...y)=>{if(y[0]==="processorerror"){let v=d.get(y[1]);v!==void 0&&(d.delete(y[1]),y[1]=v)}return g.call(m,"error",y[1],y[2]),g.call(m,y[0],y[1],y[2])})(m.removeEventListener),f.numberOfOutputs!==0){let g=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return m.connect(g).connect(c.destination),n(m,()=>g.disconnect(),()=>g.connect(c.destination))}return m}catch(m){throw m.code===11?s():m}if(p===void 0)throw s();return Eu(f),t(c,u,p,f)};r();r();var Mo=(o,t)=>o===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(o*t)))));r();r();r();var Mu=o=>new Promise((t,e)=>{let{port1:s,port2:n}=new MessageChannel;s.onmessage=({data:c})=>{s.close(),n.close(),t(c)},s.onmessageerror=({data:c})=>{s.close(),n.close(),e(c)},n.postMessage(o)});var Fu=async(o,t)=>{let e=await Mu(t);return new o(e)};var Iu=(o,t,e,s)=>{let n=Us.get(o);n===void 0&&(n=new WeakMap,Us.set(o,n));let c=Fu(e,s);return n.set(t,c),c};var Pu=(o,t,e,s,n,c,u,l,h,p,f,m,d)=>(_,g,y,v)=>{if(v.numberOfInputs===0&&v.numberOfOutputs===0)throw h();let x=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(x.some(G=>G<1))throw h();if(x.length!==v.numberOfOutputs)throw t();if(v.channelCountMode!=="explicit")throw h();let T=v.channelCount*v.numberOfInputs,N=x.reduce((G,J)=>G+J,0),k=y.parameterDescriptors===void 0?0:y.parameterDescriptors.length;if(T+k>6||N>6)throw h();let w=new MessageChannel,A=[],S=[];for(let G=0;G<v.numberOfInputs;G+=1)A.push(u(_,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),S.push(n(_,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));let C=[];if(y.parameterDescriptors!==void 0)for(let{defaultValue:G,maxValue:J,minValue:Rt,name:yt}of y.parameterDescriptors){let lt=c(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:v.parameterData[yt]!==void 0?v.parameterData[yt]:G===void 0?0:G});Object.defineProperties(lt.offset,{defaultValue:{get:()=>G===void 0?0:G},maxValue:{get:()=>J===void 0?Tt:J},minValue:{get:()=>Rt===void 0?Ct:Rt}}),C.push(lt)}let I=s(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,T+k)}),M=Mo(g,_.sampleRate),R=l(_,M,T+k,Math.max(1,N)),E=n(_,{channelCount:Math.max(1,N),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,N)}),j=[];for(let G=0;G<v.numberOfOutputs;G+=1)j.push(s(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:x[G]}));for(let G=0;G<v.numberOfInputs;G+=1){A[G].connect(S[G]);for(let J=0;J<v.channelCount;J+=1)S[G].connect(I,J,G*v.channelCount+J)}let L=new Ys(y.parameterDescriptors===void 0?[]:y.parameterDescriptors.map(({name:G},J)=>{let Rt=C[J];return Rt.connect(I,0,T+J),Rt.start(0),[G,Rt.offset]}));I.connect(R);let Z=v.channelInterpretation,z=null,Y=v.numberOfOutputs===0?[R]:j,B={get bufferSize(){return M},get channelCount(){return v.channelCount},set channelCount(G){throw e()},get channelCountMode(){return v.channelCountMode},set channelCountMode(G){throw e()},get channelInterpretation(){return Z},set channelInterpretation(G){for(let J of A)J.channelInterpretation=G;Z=G},get context(){return R.context},get inputs(){return A},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},get onprocessorerror(){return z},set onprocessorerror(G){typeof z=="function"&&B.removeEventListener("processorerror",z),z=typeof G=="function"?G:null,typeof z=="function"&&B.addEventListener("processorerror",z)},get parameters(){return L},get port(){return w.port2},addEventListener(...G){return R.addEventListener(G[0],G[1],G[2])},connect:o.bind(null,Y),disconnect:p.bind(null,Y),dispatchEvent(...G){return R.dispatchEvent(G[0])},removeEventListener(...G){return R.removeEventListener(G[0],G[1],G[2])}},D=new Map;w.port1.addEventListener=(G=>(...J)=>{if(J[0]==="message"){let Rt=typeof J[1]=="function"?J[1]:typeof J[1]=="object"&&J[1]!==null&&typeof J[1].handleEvent=="function"?J[1].handleEvent:null;if(Rt!==null){let yt=D.get(J[1]);yt!==void 0?J[1]=yt:(J[1]=lt=>{f(_.currentTime,_.sampleRate,()=>Rt(lt))},D.set(Rt,J[1]))}}return G.call(w.port1,J[0],J[1],J[2])})(w.port1.addEventListener),w.port1.removeEventListener=(G=>(...J)=>{if(J[0]==="message"){let Rt=D.get(J[1]);Rt!==void 0&&(D.delete(J[1]),J[1]=Rt)}return G.call(w.port1,J[0],J[1],J[2])})(w.port1.removeEventListener);let P=null;Object.defineProperty(w.port1,"onmessage",{get:()=>P,set:G=>{typeof P=="function"&&w.port1.removeEventListener("message",P),P=typeof G=="function"?G:null,typeof P=="function"&&(w.port1.addEventListener("message",P),w.port1.start())}}),y.prototype.port=w.port1;let O=null;Iu(_,B,y,v).then(G=>O=G);let H=Jr(v.numberOfInputs,v.channelCount),et=Jr(v.numberOfOutputs,x),q=y.parameterDescriptors===void 0?[]:y.parameterDescriptors.reduce((G,{name:J})=>({...G,[J]:new Float32Array(128)}),{}),ft=!0,St=()=>{v.numberOfOutputs>0&&R.disconnect(E);for(let G=0,J=0;G<v.numberOfOutputs;G+=1){let Rt=j[G];for(let yt=0;yt<x[G];yt+=1)E.disconnect(Rt,J+yt,yt);J+=x[G]}},$=new Map;R.onaudioprocess=({inputBuffer:G,outputBuffer:J})=>{if(O!==null){let Rt=m(B);for(let yt=0;yt<M;yt+=128){for(let lt=0;lt<v.numberOfInputs;lt+=1)for(let bt=0;bt<v.channelCount;bt+=1)Kr(G,H[lt],bt,bt,yt);y.parameterDescriptors!==void 0&&y.parameterDescriptors.forEach(({name:lt},bt)=>{Kr(G,q,lt,T+bt,yt)});for(let lt=0;lt<v.numberOfInputs;lt+=1)for(let bt=0;bt<x[lt];bt+=1)et[lt][bt].byteLength===0&&(et[lt][bt]=new Float32Array(128));try{let lt=H.map((me,ir)=>{if(Rt[ir].size>0)return $.set(ir,M/128),me;let mn=$.get(ir);return mn===void 0?[]:(me.every(lf=>lf.every(hf=>hf===0))&&(mn===1?$.delete(ir):$.set(ir,mn-1)),me)});ft=f(_.currentTime+yt/_.sampleRate,_.sampleRate,()=>O.process(lt,et,q));for(let me=0,ir=0;me<v.numberOfOutputs;me+=1){for(let ks=0;ks<x[me];ks+=1)Do(J,et[me],ks,ir+ks,yt);ir+=x[me]}}catch(lt){ft=!1,B.dispatchEvent(new ErrorEvent("processorerror",{colno:lt.colno,filename:lt.filename,lineno:lt.lineno,message:lt.message}))}if(!ft){for(let lt=0;lt<v.numberOfInputs;lt+=1){A[lt].disconnect(S[lt]);for(let bt=0;bt<v.channelCount;bt+=1)S[yt].disconnect(I,bt,lt*v.channelCount+bt)}if(y.parameterDescriptors!==void 0){let lt=y.parameterDescriptors.length;for(let bt=0;bt<lt;bt+=1){let me=C[bt];me.disconnect(I,0,T+bt),me.stop()}}I.disconnect(R),R.onaudioprocess=null,be?St():Te();break}}}};let be=!1,$t=u(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),re=()=>R.connect($t).connect(_.destination),Te=()=>{R.disconnect($t),$t.disconnect()},qe=()=>{if(ft){Te(),v.numberOfOutputs>0&&R.connect(E);for(let G=0,J=0;G<v.numberOfOutputs;G+=1){let Rt=j[G];for(let yt=0;yt<x[G];yt+=1)E.connect(Rt,J+yt,yt);J+=x[G]}}be=!0},fn=()=>{ft&&(re(),St()),be=!1};return re(),d(B,qe,fn)};r();var Pn=(o,t)=>{let e=o.createBiquadFilter();return nt(e,t),ht(e,t,"Q"),ht(e,t,"detune"),ht(e,t,"frequency"),ht(e,t,"gain"),ut(e,t,"type"),e};r();var qu=(o,t)=>(e,s)=>{let n=e.createChannelMerger(s.numberOfInputs);return o!==null&&o.name==="webkitAudioContext"&&t(e,n),nt(n,s),n};r();r();var Vu=o=>{let t=o.numberOfOutputs;Object.defineProperty(o,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw xt()}}),Object.defineProperty(o,"channelCountMode",{get:()=>"explicit",set:e=>{if(e!=="explicit")throw xt()}}),Object.defineProperty(o,"channelInterpretation",{get:()=>"discrete",set:e=>{if(e!=="discrete")throw xt()}})};var ss=(o,t)=>{let e=o.createChannelSplitter(t.numberOfOutputs);return nt(e,t),Vu(e),e};r();var Lu=(o,t,e,s,n)=>(c,u)=>{if(c.createConstantSource===void 0)return e(c,u);let l=c.createConstantSource();return nt(l,u),ht(l,u,"offset"),t(s,()=>s(c))||es(l),t(n,()=>n(c))||rs(l),o(c,l),l};r();r();var xe=(o,t)=>(o.connect=t.connect.bind(t),o.disconnect=t.disconnect.bind(t),o);var Bu=(o,t,e,s)=>(n,{offset:c,...u})=>{let l=n.createBuffer(1,2,44100),h=t(n,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),p=e(n,{...u,gain:c}),f=l.getChannelData(0);f[0]=1,f[1]=1,h.buffer=l,h.loop=!0;let m={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(g){p.channelCount=g},get channelCountMode(){return p.channelCountMode},set channelCountMode(g){p.channelCountMode=g},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(g){p.channelInterpretation=g},get context(){return p.context},get inputs(){return[]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get offset(){return p.gain},get onended(){return h.onended},set onended(g){h.onended=g},addEventListener(...g){return h.addEventListener(g[0],g[1],g[2])},dispatchEvent(...g){return h.dispatchEvent(g[0])},removeEventListener(...g){return h.removeEventListener(g[0],g[1],g[2])},start(g=0){h.start.call(h,g)},stop(g=0){h.stop.call(h,g)}},d=()=>h.connect(p),_=()=>h.disconnect(p);return o(n,h),s(xe(m,p),d,_)};r();var Wu=(o,t)=>(e,s)=>{let n=e.createConvolver();if(nt(n,s),s.disableNormalization===n.normalize&&(n.normalize=!s.disableNormalization),ut(n,s,"buffer"),s.channelCount>2||(t(n,"channelCount",c=>()=>c.call(n),c=>u=>{if(u>2)throw o();return c.call(n,u)}),s.channelCountMode==="max"))throw o();return t(n,"channelCountMode",c=>()=>c.call(n),c=>u=>{if(u==="max")throw o();return c.call(n,u)}),n};r();var qn=(o,t)=>{let e=o.createDelay(t.maxDelayTime);return nt(e,t),ht(e,t,"delayTime"),e};r();var ju=o=>(t,e)=>{let s=t.createDynamicsCompressor();if(nt(s,e),e.channelCount>2||e.channelCountMode==="max")throw o();return ht(s,e,"attack"),ht(s,e,"knee"),ht(s,e,"ratio"),ht(s,e,"release"),ht(s,e,"threshold"),s};r();var Qt=(o,t)=>{let e=o.createGain();return nt(e,t),ht(e,t,"gain"),e};r();var Gu=o=>(t,e,s)=>{if(t.createIIRFilter===void 0)return o(t,e,s);let n=t.createIIRFilter(s.feedforward,s.feedback);return nt(n,s),n};r();function bm(o,t){let e=t[0]*t[0]+t[1]*t[1];return[(o[0]*t[0]+o[1]*t[1])/e,(o[1]*t[0]-o[0]*t[1])/e]}function Tm(o,t){return[o[0]*t[0]-o[1]*t[1],o[0]*t[1]+o[1]*t[0]]}function zu(o,t){let e=[0,0];for(let s=o.length-1;s>=0;s-=1)e=Tm(e,t),e[0]+=o[s];return e}var Uu=(o,t,e,s)=>(n,c,{channelCount:u,channelCountMode:l,channelInterpretation:h,feedback:p,feedforward:f})=>{let m=Mo(c,n.sampleRate),d=p instanceof Float64Array?p:new Float64Array(p),_=f instanceof Float64Array?f:new Float64Array(f),g=d.length,y=_.length,v=Math.min(g,y);if(g===0||g>20)throw s();if(d[0]===0)throw t();if(y===0||y>20)throw s();if(_[0]===0)throw t();if(d[0]!==1){for(let C=0;C<y;C+=1)_[C]/=d[0];for(let C=1;C<g;C+=1)d[C]/=d[0]}let x=e(n,m,u,u);x.channelCount=u,x.channelCountMode=l,x.channelInterpretation=h;let T=32,N=[],k=[],w=[];for(let C=0;C<u;C+=1){N.push(0);let I=new Float32Array(T),M=new Float32Array(T);I.fill(0),M.fill(0),k.push(I),w.push(M)}x.onaudioprocess=C=>{let I=C.inputBuffer,M=C.outputBuffer,R=I.numberOfChannels;for(let E=0;E<R;E+=1){let j=I.getChannelData(E),L=M.getChannelData(E);N[E]=Ro(d,g,_,y,v,k[E],w[E],N[E],T,j,L)}};let A=n.sampleRate/2;return xe({get bufferSize(){return m},get channelCount(){return x.channelCount},set channelCount(C){x.channelCount=C},get channelCountMode(){return x.channelCountMode},set channelCountMode(C){x.channelCountMode=C},get channelInterpretation(){return x.channelInterpretation},set channelInterpretation(C){x.channelInterpretation=C},get context(){return x.context},get inputs(){return[x]},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},addEventListener(...C){return x.addEventListener(C[0],C[1],C[2])},dispatchEvent(...C){return x.dispatchEvent(C[0])},getFrequencyResponse(C,I,M){if(C.length!==I.length||I.length!==M.length)throw o();let R=C.length;for(let E=0;E<R;E+=1){let j=-Math.PI*(C[E]/A),L=[Math.cos(j),Math.sin(j)],Z=zu(_,L),z=zu(d,L),Y=bm(Z,z);I[E]=Math.sqrt(Y[0]*Y[0]+Y[1]*Y[1]),M[E]=Math.atan2(Y[1],Y[0])}},removeEventListener(...C){return x.removeEventListener(C[0],C[1],C[2])}},x)};r();var Hu=(o,t)=>o.createMediaElementSource(t.mediaElement);r();var Yu=(o,t)=>{let e=o.createMediaStreamDestination();return nt(e,t),e.numberOfOutputs===1&&Object.defineProperty(e,"numberOfOutputs",{get:()=>0}),e};r();var $u=(o,{mediaStream:t})=>{let e=t.getAudioTracks();e.sort((c,u)=>c.id<u.id?-1:c.id>u.id?1:0);let s=e.slice(0,1),n=o.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(n,"mediaStream",{value:t}),n};r();var Xu=(o,t)=>(e,{mediaStreamTrack:s})=>{if(typeof e.createMediaStreamTrackSource=="function")return e.createMediaStreamTrackSource(s);let n=new MediaStream([s]),c=e.createMediaStreamSource(n);if(s.kind!=="audio")throw o();if(t(e))throw new TypeError;return c};r();var Qu=o=>o===null?null:o.hasOwnProperty("OfflineAudioContext")?o.OfflineAudioContext:o.hasOwnProperty("webkitOfflineAudioContext")?o.webkitOfflineAudioContext:null;r();var Zu=(o,t,e,s,n,c)=>(u,l)=>{let h=u.createOscillator();return nt(h,l),ht(h,l,"detune"),ht(h,l,"frequency"),l.periodicWave!==void 0?h.setPeriodicWave(l.periodicWave):ut(h,l,"type"),t(e,()=>e(u))||es(h),t(s,()=>s(u))||c(h,u),t(n,()=>n(u))||rs(h),o(u,h),h};r();var Ku=o=>(t,e)=>{let s=t.createPanner();return s.orientationX===void 0?o(t,e):(nt(s,e),ht(s,e,"orientationX"),ht(s,e,"orientationY"),ht(s,e,"orientationZ"),ht(s,e,"positionX"),ht(s,e,"positionY"),ht(s,e,"positionZ"),ut(s,e,"coneInnerAngle"),ut(s,e,"coneOuterAngle"),ut(s,e,"coneOuterGain"),ut(s,e,"distanceModel"),ut(s,e,"maxDistance"),ut(s,e,"panningModel"),ut(s,e,"refDistance"),ut(s,e,"rolloffFactor"),s)};r();var Ju=(o,t,e,s,n,c,u,l,h,p)=>(f,{coneInnerAngle:m,coneOuterAngle:d,coneOuterGain:_,distanceModel:g,maxDistance:y,orientationX:v,orientationY:x,orientationZ:T,panningModel:N,positionX:k,positionY:w,positionZ:A,refDistance:S,rolloffFactor:C,...I})=>{let M=f.createPanner();if(I.channelCount>2||I.channelCountMode==="max")throw u();nt(M,I);let R={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},E=e(f,{...R,channelInterpretation:"speakers",numberOfInputs:6}),j=s(f,{...I,gain:1}),L=s(f,{...R,gain:1}),Z=s(f,{...R,gain:0}),z=s(f,{...R,gain:0}),Y=s(f,{...R,gain:0}),B=s(f,{...R,gain:0}),D=s(f,{...R,gain:0}),P=n(f,256,6,1),O=c(f,{...R,curve:new Float32Array([1,1]),oversample:"none"}),W=[v,x,T],H=[k,w,A],et=new Float32Array(1);P.onaudioprocess=({inputBuffer:$})=>{let be=[h($,et,0),h($,et,1),h($,et,2)];be.some((re,Te)=>re!==W[Te])&&(M.setOrientation(...be),W=be);let $t=[h($,et,3),h($,et,4),h($,et,5)];$t.some((re,Te)=>re!==H[Te])&&(M.setPosition(...$t),H=$t)},Object.defineProperty(Z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Y.gain,"defaultValue",{get:()=>0}),Object.defineProperty(B.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"defaultValue",{get:()=>0});let q={get bufferSize(){},get channelCount(){return M.channelCount},set channelCount($){if($>2)throw u();j.channelCount=$,M.channelCount=$},get channelCountMode(){return M.channelCountMode},set channelCountMode($){if($==="max")throw u();j.channelCountMode=$,M.channelCountMode=$},get channelInterpretation(){return M.channelInterpretation},set channelInterpretation($){j.channelInterpretation=$,M.channelInterpretation=$},get coneInnerAngle(){return M.coneInnerAngle},set coneInnerAngle($){M.coneInnerAngle=$},get coneOuterAngle(){return M.coneOuterAngle},set coneOuterAngle($){M.coneOuterAngle=$},get coneOuterGain(){return M.coneOuterGain},set coneOuterGain($){if($<0||$>1)throw t();M.coneOuterGain=$},get context(){return M.context},get distanceModel(){return M.distanceModel},set distanceModel($){M.distanceModel=$},get inputs(){return[j]},get maxDistance(){return M.maxDistance},set maxDistance($){if($<0)throw new RangeError;M.maxDistance=$},get numberOfInputs(){return M.numberOfInputs},get numberOfOutputs(){return M.numberOfOutputs},get orientationX(){return L.gain},get orientationY(){return Z.gain},get orientationZ(){return z.gain},get panningModel(){return M.panningModel},set panningModel($){M.panningModel=$},get positionX(){return Y.gain},get positionY(){return B.gain},get positionZ(){return D.gain},get refDistance(){return M.refDistance},set refDistance($){if($<0)throw new RangeError;M.refDistance=$},get rolloffFactor(){return M.rolloffFactor},set rolloffFactor($){if($<0)throw new RangeError;M.rolloffFactor=$},addEventListener(...$){return j.addEventListener($[0],$[1],$[2])},dispatchEvent(...$){return j.dispatchEvent($[0])},removeEventListener(...$){return j.removeEventListener($[0],$[1],$[2])}};m!==q.coneInnerAngle&&(q.coneInnerAngle=m),d!==q.coneOuterAngle&&(q.coneOuterAngle=d),_!==q.coneOuterGain&&(q.coneOuterGain=_),g!==q.distanceModel&&(q.distanceModel=g),y!==q.maxDistance&&(q.maxDistance=y),v!==q.orientationX.value&&(q.orientationX.value=v),x!==q.orientationY.value&&(q.orientationY.value=x),T!==q.orientationZ.value&&(q.orientationZ.value=T),N!==q.panningModel&&(q.panningModel=N),k!==q.positionX.value&&(q.positionX.value=k),w!==q.positionY.value&&(q.positionY.value=w),A!==q.positionZ.value&&(q.positionZ.value=A),S!==q.refDistance&&(q.refDistance=S),C!==q.rolloffFactor&&(q.rolloffFactor=C),(W[0]!==1||W[1]!==0||W[2]!==0)&&M.setOrientation(...W),(H[0]!==0||H[1]!==0||H[2]!==0)&&M.setPosition(...H);let ft=()=>{j.connect(M),o(j,O,0,0),O.connect(L).connect(E,0,0),O.connect(Z).connect(E,0,1),O.connect(z).connect(E,0,2),O.connect(Y).connect(E,0,3),O.connect(B).connect(E,0,4),O.connect(D).connect(E,0,5),E.connect(P).connect(f.destination)},St=()=>{j.disconnect(M),l(j,O,0,0),O.disconnect(L),L.disconnect(E),O.disconnect(Z),Z.disconnect(E),O.disconnect(z),z.disconnect(E),O.disconnect(Y),Y.disconnect(E),O.disconnect(B),B.disconnect(E),O.disconnect(D),D.disconnect(E),E.disconnect(P),P.disconnect(f.destination)};return p(xe(q,M),ft,St)};r();var tl=o=>(t,{disableNormalization:e,imag:s,real:n})=>{let c=s instanceof Float32Array?s:new Float32Array(s),u=n instanceof Float32Array?n:new Float32Array(n),l=t.createPeriodicWave(u,c,{disableNormalization:e});if(Array.from(s).length<2)throw o();return l};r();var os=(o,t,e,s)=>o.createScriptProcessor(t,e,s);r();var el=(o,t)=>(e,s)=>{let n=s.channelCountMode;if(n==="clamped-max")throw t();if(e.createStereoPanner===void 0)return o(e,s);let c=e.createStereoPanner();return nt(c,s),ht(c,s,"pan"),Object.defineProperty(c,"channelCountMode",{get:()=>n,set:u=>{if(u!==n)throw t()}}),c};r();var rl=(o,t,e,s,n,c)=>{let u=16385,l=new Float32Array([1,1]),h=Math.PI/2,p={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},f={...p,oversample:"none"},m=(g,y,v,x)=>{let T=new Float32Array(u),N=new Float32Array(u);for(let I=0;I<u;I+=1){let M=I/(u-1)*h;T[I]=Math.cos(M),N[I]=Math.sin(M)}let k=e(g,{...p,gain:0}),w=s(g,{...f,curve:T}),A=s(g,{...f,curve:l}),S=e(g,{...p,gain:0}),C=s(g,{...f,curve:N});return{connectGraph(){y.connect(k),y.connect(A.inputs===void 0?A:A.inputs[0]),y.connect(S),A.connect(v),v.connect(w.inputs===void 0?w:w.inputs[0]),v.connect(C.inputs===void 0?C:C.inputs[0]),w.connect(k.gain),C.connect(S.gain),k.connect(x,0,0),S.connect(x,0,1)},disconnectGraph(){y.disconnect(k),y.disconnect(A.inputs===void 0?A:A.inputs[0]),y.disconnect(S),A.disconnect(v),v.disconnect(w.inputs===void 0?w:w.inputs[0]),v.disconnect(C.inputs===void 0?C:C.inputs[0]),w.disconnect(k.gain),C.disconnect(S.gain),k.disconnect(x,0,0),S.disconnect(x,0,1)}}},d=(g,y,v,x)=>{let T=new Float32Array(u),N=new Float32Array(u),k=new Float32Array(u),w=new Float32Array(u),A=Math.floor(u/2);for(let Y=0;Y<u;Y+=1)if(Y>A){let B=(Y-A)/(u-1-A)*h;T[Y]=Math.cos(B),N[Y]=Math.sin(B),k[Y]=0,w[Y]=1}else{let B=Y/(u-1-A)*h;T[Y]=1,N[Y]=0,k[Y]=Math.cos(B),w[Y]=Math.sin(B)}let S=t(g,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),C=e(g,{...p,gain:0}),I=s(g,{...f,curve:T}),M=e(g,{...p,gain:0}),R=s(g,{...f,curve:N}),E=s(g,{...f,curve:l}),j=e(g,{...p,gain:0}),L=s(g,{...f,curve:k}),Z=e(g,{...p,gain:0}),z=s(g,{...f,curve:w});return{connectGraph(){y.connect(S),y.connect(E.inputs===void 0?E:E.inputs[0]),S.connect(C,0),S.connect(M,0),S.connect(j,1),S.connect(Z,1),E.connect(v),v.connect(I.inputs===void 0?I:I.inputs[0]),v.connect(R.inputs===void 0?R:R.inputs[0]),v.connect(L.inputs===void 0?L:L.inputs[0]),v.connect(z.inputs===void 0?z:z.inputs[0]),I.connect(C.gain),R.connect(M.gain),L.connect(j.gain),z.connect(Z.gain),C.connect(x,0,0),j.connect(x,0,0),M.connect(x,0,1),Z.connect(x,0,1)},disconnectGraph(){y.disconnect(S),y.disconnect(E.inputs===void 0?E:E.inputs[0]),S.disconnect(C,0),S.disconnect(M,0),S.disconnect(j,1),S.disconnect(Z,1),E.disconnect(v),v.disconnect(I.inputs===void 0?I:I.inputs[0]),v.disconnect(R.inputs===void 0?R:R.inputs[0]),v.disconnect(L.inputs===void 0?L:L.inputs[0]),v.disconnect(z.inputs===void 0?z:z.inputs[0]),I.disconnect(C.gain),R.disconnect(M.gain),L.disconnect(j.gain),z.disconnect(Z.gain),C.disconnect(x,0,0),j.disconnect(x,0,0),M.disconnect(x,0,1),Z.disconnect(x,0,1)}}},_=(g,y,v,x,T)=>{if(y===1)return m(g,v,x,T);if(y===2)return d(g,v,x,T);throw n()};return(g,{channelCount:y,channelCountMode:v,pan:x,...T})=>{if(v==="max")throw n();let N=o(g,{...T,channelCount:1,channelCountMode:v,numberOfInputs:2}),k=e(g,{...T,channelCount:y,channelCountMode:v,gain:1}),w=e(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:x}),{connectGraph:A,disconnectGraph:S}=_(g,y,k,w,N);Object.defineProperty(w.gain,"defaultValue",{get:()=>0}),Object.defineProperty(w.gain,"maxValue",{get:()=>1}),Object.defineProperty(w.gain,"minValue",{get:()=>-1});let C={get bufferSize(){},get channelCount(){return k.channelCount},set channelCount(E){k.channelCount!==E&&(I&&S(),{connectGraph:A,disconnectGraph:S}=_(g,E,k,w,N),I&&A()),k.channelCount=E},get channelCountMode(){return k.channelCountMode},set channelCountMode(E){if(E==="clamped-max"||E==="max")throw n();k.channelCountMode=E},get channelInterpretation(){return k.channelInterpretation},set channelInterpretation(E){k.channelInterpretation=E},get context(){return k.context},get inputs(){return[k]},get numberOfInputs(){return k.numberOfInputs},get numberOfOutputs(){return k.numberOfOutputs},get pan(){return w.gain},addEventListener(...E){return k.addEventListener(E[0],E[1],E[2])},dispatchEvent(...E){return k.dispatchEvent(E[0])},removeEventListener(...E){return k.removeEventListener(E[0],E[1],E[2])}},I=!1,M=()=>{A(),I=!0},R=()=>{S(),I=!1};return c(xe(C,N),M,R)}};r();var sl=(o,t,e,s,n,c,u)=>(l,h)=>{let p=l.createWaveShaper();if(c!==null&&c.name==="webkitAudioContext"&&l.createGain().gain.automationRate===void 0)return e(l,h);nt(p,h);let f=h.curve===null||h.curve instanceof Float32Array?h.curve:new Float32Array(h.curve);if(f!==null&&f.length<2)throw t();ut(p,{curve:f},"curve"),ut(p,h,"oversample");let m=null,d=!1;return u(p,"curve",y=>()=>y.call(p),y=>v=>(y.call(p,v),d&&(s(v)&&m===null?m=o(l,p):!s(v)&&m!==null&&(m(),m=null)),v)),n(p,()=>{d=!0,s(p.curve)&&(m=o(l,p))},()=>{d=!1,m!==null&&(m(),m=null)})};r();var ol=(o,t,e,s,n)=>(c,{curve:u,oversample:l,...h})=>{let p=c.createWaveShaper(),f=c.createWaveShaper();nt(p,h),nt(f,h);let m=e(c,{...h,gain:1}),d=e(c,{...h,gain:-1}),_=e(c,{...h,gain:1}),g=e(c,{...h,gain:-1}),y=null,v=!1,x=null,T={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(w){m.channelCount=w,d.channelCount=w,p.channelCount=w,_.channelCount=w,f.channelCount=w,g.channelCount=w},get channelCountMode(){return p.channelCountMode},set channelCountMode(w){m.channelCountMode=w,d.channelCountMode=w,p.channelCountMode=w,_.channelCountMode=w,f.channelCountMode=w,g.channelCountMode=w},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(w){m.channelInterpretation=w,d.channelInterpretation=w,p.channelInterpretation=w,_.channelInterpretation=w,f.channelInterpretation=w,g.channelInterpretation=w},get context(){return p.context},get curve(){return x},set curve(w){if(w!==null&&w.length<2)throw t();if(w===null)p.curve=w,f.curve=w;else{let A=w.length,S=new Float32Array(A+2-A%2),C=new Float32Array(A+2-A%2);S[0]=w[0],C[0]=-w[A-1];let I=Math.ceil((A+1)/2),M=(A+1)/2-1;for(let R=1;R<I;R+=1){let E=R/I*M,j=Math.floor(E),L=Math.ceil(E);S[R]=j===L?w[j]:(1-(E-j))*w[j]+(1-(L-E))*w[L],C[R]=j===L?-w[A-1-j]:-((1-(E-j))*w[A-1-j])-(1-(L-E))*w[A-1-L]}S[I]=A%2===1?w[I-1]:(w[I-2]+w[I-1])/2,p.curve=S,f.curve=C}x=w,v&&(s(x)&&y===null?y=o(c,m):y!==null&&(y(),y=null))},get inputs(){return[m]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get oversample(){return p.oversample},set oversample(w){p.oversample=w,f.oversample=w},addEventListener(...w){return m.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return m.dispatchEvent(w[0])},removeEventListener(...w){return m.removeEventListener(w[0],w[1],w[2])}};u!==null&&(T.curve=u instanceof Float32Array?u:new Float32Array(u)),l!==T.oversample&&(T.oversample=l);let N=()=>{m.connect(p).connect(_),m.connect(d).connect(f).connect(g).connect(_),v=!0,s(x)&&(y=o(c,m))},k=()=>{m.disconnect(p),p.disconnect(_),m.disconnect(d),d.disconnect(f),f.disconnect(g),g.disconnect(_),v=!1,y!==null&&(y(),y=null)};return n(xe(T,_),N,k)};r();var Wt=()=>new DOMException("","NotSupportedError");r();var Am={numberOfChannels:1},nl=(o,t,e,s,n)=>class extends o{constructor(u,l,h){let p;if(typeof u=="number"&&l!==void 0&&h!==void 0)p={length:l,numberOfChannels:u,sampleRate:h};else if(typeof u=="object")p=u;else throw new Error("The given parameters are not valid.");let{length:f,numberOfChannels:m,sampleRate:d}={...Am,...p},_=s(m,f,d);t(Ce,()=>Ce(_))||_.addEventListener("statechange",(()=>{let g=0,y=v=>{this._state==="running"&&(g>0?(_.removeEventListener("statechange",y),v.stopImmediatePropagation(),this._waitForThePromiseToSettle(v)):g+=1)};return y})());super(_,m);this._length=f,this._nativeOfflineAudioContext=_,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(e()):(this._state="running",n(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,ur(this)}))}_waitForThePromiseToSettle(u){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}};r();var Sm={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},il=(o,t,e,s,n,c,u)=>class extends o{constructor(h,p){let f=n(h),m={...Sm,...p},d=e(f,m),_=c(f),g=_?s():null,y=h.sampleRate/2;super(h,!1,d,g);this._detune=t(this,_,d.detune,153600,-153600),this._frequency=t(this,_,d.frequency,y,-y),this._nativeOscillatorNode=d,this._onended=null,this._oscillatorNodeRenderer=g,this._oscillatorNodeRenderer!==null&&m.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=m.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(h){let p=typeof h=="function"?u(this,h):null;this._nativeOscillatorNode.onended=p;let f=this._nativeOscillatorNode.onended;this._onended=f!==null&&f===p?h:f}get type(){return this._nativeOscillatorNode.type}set type(h){this._nativeOscillatorNode.type=h,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(h){this._nativeOscillatorNode.setPeriodicWave(h),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=h)}start(h=0){if(this._nativeOscillatorNode.start(h),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=h),this.context.state!=="closed"){Ae(this);let p=()=>{this._nativeOscillatorNode.removeEventListener("ended",p),Xt(this)&&We(this)};this._nativeOscillatorNode.addEventListener("ended",p)}}stop(h=0){this._nativeOscillatorNode.stop(h),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=h)}};r();var al=(o,t,e,s,n)=>()=>{let c=new WeakMap,u=null,l=null,h=null,p=async(f,m)=>{let d=e(f),_=ct(d,m);if(!_){let g={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:u===null?void 0:u,type:d.type};d=t(m,g),l!==null&&d.start(l),h!==null&&d.stop(h)}return c.set(m,d),_?(await o(m,f.detune,d.detune),await o(m,f.frequency,d.frequency)):(await s(m,f.detune,d.detune),await s(m,f.frequency,d.frequency)),await n(f,m,d),d};return{set periodicWave(f){u=f},set start(f){l=f},set stop(f){h=f},render(f,m){let d=c.get(m);return d!==void 0?Promise.resolve(d):p(f,m)}}};r();var Cm={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},cl=(o,t,e,s,n,c,u)=>class extends o{constructor(h,p){let f=n(h),m={...Cm,...p},d=e(f,m),_=c(f),g=_?s():null;super(h,!1,d,g);this._nativePannerNode=d,this._orientationX=t(this,_,d.orientationX,Tt,Ct),this._orientationY=t(this,_,d.orientationY,Tt,Ct),this._orientationZ=t(this,_,d.orientationZ,Tt,Ct),this._positionX=t(this,_,d.positionX,Tt,Ct),this._positionY=t(this,_,d.positionY,Tt,Ct),this._positionZ=t(this,_,d.positionZ,Tt,Ct),u(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(h){this._nativePannerNode.coneInnerAngle=h}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(h){this._nativePannerNode.coneOuterAngle=h}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(h){this._nativePannerNode.coneOuterGain=h}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(h){this._nativePannerNode.distanceModel=h}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(h){this._nativePannerNode.maxDistance=h}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(h){this._nativePannerNode.panningModel=h}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(h){this._nativePannerNode.refDistance=h}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(h){this._nativePannerNode.rolloffFactor=h}};r();var ul=(o,t,e,s,n,c,u,l,h,p)=>()=>{let f=new WeakMap,m=null,d=async(_,g)=>{let y=null,v=c(_),x={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation},T={...x,coneInnerAngle:v.coneInnerAngle,coneOuterAngle:v.coneOuterAngle,coneOuterGain:v.coneOuterGain,distanceModel:v.distanceModel,maxDistance:v.maxDistance,panningModel:v.panningModel,refDistance:v.refDistance,rolloffFactor:v.rolloffFactor},N=ct(v,g);if("bufferSize"in v)y=s(g,{...x,gain:1});else if(!N){let k={...T,orientationX:v.orientationX.value,orientationY:v.orientationY.value,orientationZ:v.orientationZ.value,positionX:v.positionX.value,positionY:v.positionY.value,positionZ:v.positionZ.value};v=n(g,k)}if(f.set(g,y===null?v:y),y!==null){if(m===null){if(u===null)throw new Error("Missing the native OfflineAudioContext constructor.");let R=new u(6,_.context.length,g.sampleRate),E=t(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});E.connect(R.destination),m=(async()=>{let j=await Promise.all([_.orientationX,_.orientationY,_.orientationZ,_.positionX,_.positionY,_.positionZ].map(async(L,Z)=>{let z=e(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Z===0?1:0});return await l(R,L,z.offset),z}));for(let L=0;L<6;L+=1)j[L].connect(E,0,L),j[L].start(0);return p(R)})()}let k=await m,w=s(g,{...x,gain:1});await h(_,g,w);let A=[];for(let R=0;R<k.numberOfChannels;R+=1)A.push(k.getChannelData(R));let S=[A[0][0],A[1][0],A[2][0]],C=[A[3][0],A[4][0],A[5][0]],I=s(g,{...x,gain:1}),M=n(g,{...T,orientationX:S[0],orientationY:S[1],orientationZ:S[2],positionX:C[0],positionY:C[1],positionZ:C[2]});w.connect(I).connect(M.inputs[0]),M.connect(y);for(let R=128;R<k.length;R+=128){let E=[A[0][R],A[1][R],A[2][R]],j=[A[3][R],A[4][R],A[5][R]];if(E.some((L,Z)=>L!==S[Z])||j.some((L,Z)=>L!==C[Z])){S=E,C=j;let L=R/g.sampleRate;I.gain.setValueAtTime(0,L),I=s(g,{...x,gain:0}),M=n(g,{...T,orientationX:S[0],orientationY:S[1],orientationZ:S[2],positionX:C[0],positionY:C[1],positionZ:C[2]}),I.gain.setValueAtTime(1,L),w.connect(I).connect(M.inputs[0]),M.connect(y)}}return y}return N?(await o(g,_.orientationX,v.orientationX),await o(g,_.orientationY,v.orientationY),await o(g,_.orientationZ,v.orientationZ),await o(g,_.positionX,v.positionX),await o(g,_.positionY,v.positionY),await o(g,_.positionZ,v.positionZ)):(await l(g,_.orientationX,v.orientationX),await l(g,_.orientationY,v.orientationY),await l(g,_.orientationZ,v.orientationZ),await l(g,_.positionX,v.positionX),await l(g,_.positionY,v.positionY),await l(g,_.positionZ,v.positionZ)),ge(v)?await h(_,g,v.inputs[0]):await h(_,g,v),v};return{render(_,g){let y=f.get(g);return y!==void 0?Promise.resolve(y):d(_,g)}}};r();var km={disableNormalization:!1},ll=(o,t,e,s)=>class hl{constructor(c,u){let l=t(c),h=s({...km,...u}),p=o(l,h);return e.add(p),p}static[Symbol.hasInstance](c){return c!==null&&typeof c=="object"&&Object.getPrototypeOf(c)===hl.prototype||e.has(c)}};r();var pl=(o,t)=>(e,s,n)=>(o(s).replay(n),t(s,e,n));r();var fl=(o,t,e)=>async(s,n,c)=>{let u=o(s);await Promise.all(u.activeInputs.map((l,h)=>Array.from(l).map(async([p,f])=>{let d=await t(p).render(p,n),_=s.context.destination;!e(p)&&(s!==_||!e(s))&&d.connect(c,f,h)})).reduce((l,h)=>[...l,...h],[]))};r();var ml=(o,t,e)=>async(s,n,c)=>{let u=t(s);await Promise.all(Array.from(u.activeInputs).map(async([l,h])=>{let f=await o(l).render(l,n);e(l)||f.connect(c,h)}))};r();var dl=(o,t,e,s)=>n=>o(Ce,()=>Ce(n))?Promise.resolve(o(s,s)).then(c=>{if(!c){let u=e(n,512,0,1);n.oncomplete=()=>{u.onaudioprocess=null,u.disconnect()},u.onaudioprocess=()=>n.currentTime,u.connect(n.destination)}return n.startRendering()}):new Promise(c=>{let u=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.oncomplete=l=>{u.disconnect(),c(l.renderedBuffer)},u.connect(n.destination),n.startRendering()});r();var _l=o=>(t,e)=>{o.set(t,e)};r();var gl=o=>(t,e)=>o.set(t,e);r();var xl=(o,t,e,s,n,c,u,l)=>(h,p)=>e(h).render(h,p).then(()=>Promise.all(Array.from(s(p)).map(f=>e(f).render(f,p)))).then(()=>n(p)).then(f=>(typeof f.copyFromChannel!="function"?(u(f),$r(f)):t(c,()=>c(f))||l(f),o.add(f),f));r();var Nm={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},yl=(o,t,e,s,n,c)=>class extends o{constructor(l,h){let p=n(l),f={...Nm,...h},m=e(p,f),d=c(p),_=d?s():null;super(l,!1,m,_);this._pan=t(this,d,m.pan)}get pan(){return this._pan}};r();var vl=(o,t,e,s,n)=>()=>{let c=new WeakMap,u=async(l,h)=>{let p=e(l),f=ct(p,h);if(!f){let m={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,pan:p.pan.value};p=t(h,m)}return c.set(h,p),f?await o(h,l.pan,p.pan):await s(h,l.pan,p.pan),ge(p)?await n(l,h,p.inputs[0]):await n(l,h,p),p};return{render(l,h){let p=c.get(h);return p!==void 0?Promise.resolve(p):u(l,h)}}};r();var wl=o=>()=>{if(o===null)return!1;try{new o({length:1,sampleRate:44100})}catch{return!1}return!0};r();r();r();r();r();r();r();var bl=(o,t)=>async()=>{if(o===null)return!0;if(t===null)return!1;let e=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new t(1,128,44100),n=URL.createObjectURL(e),c=!1,u=!1;try{await s.audioWorklet.addModule(n);let l=new o(s,"a",{numberOfOutputs:0}),h=s.createOscillator();l.port.onmessage=()=>c=!0,l.onprocessorerror=()=>u=!0,h.connect(l),h.start(0),await s.startRendering()}catch{}finally{URL.revokeObjectURL(n)}return c&&!u};r();r();r();r();r();r();r();var Tl=(o,t)=>()=>{if(t===null)return Promise.resolve(!1);let e=new t(1,1,44100),s=o(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(n=>{e.oncomplete=()=>{s.disconnect(),n(e.currentTime!==0)},e.startRendering()})};r();r();var Vn=()=>new DOMException("","UnknownError");r();var Om={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Al=(o,t,e,s,n,c,u)=>class extends o{constructor(h,p){let f=n(h),m={...Om,...p},d=e(f,m),g=c(f)?s():null;super(h,!0,d,g);this._isCurveNullified=!1,this._nativeWaveShaperNode=d,u(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(h){if(h===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(h.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=h}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(h){this._nativeWaveShaperNode.oversample=h}};r();var Sl=(o,t,e)=>()=>{let s=new WeakMap,n=async(c,u)=>{let l=t(c);if(!ct(l,u)){let p={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,curve:l.curve,oversample:l.oversample};l=o(u,p)}return s.set(u,l),ge(l)?await e(c,u,l.inputs[0]):await e(c,u,l),l};return{render(c,u){let l=s.get(u);return l!==void 0?Promise.resolve(l):n(c,u)}}};r();var Cl=()=>typeof window=="undefined"?null:window;r();var kl=(o,t)=>e=>{e.copyFromChannel=(s,n,c=0)=>{let u=o(c),l=o(n);if(l>=e.numberOfChannels)throw t();let h=e.length,p=e.getChannelData(l),f=s.length;for(let m=u<0?-u:0;m+u<h&&m<f;m+=1)s[m]=p[m+u]},e.copyToChannel=(s,n,c=0)=>{let u=o(c),l=o(n);if(l>=e.numberOfChannels)throw t();let h=e.length,p=e.getChannelData(l),f=s.length;for(let m=u<0?-u:0;m+u<h&&m<f;m+=1)p[m+u]=s[m]}};r();var Nl=o=>t=>{t.copyFromChannel=(e=>(s,n,c=0)=>{let u=o(c),l=o(n);if(u<t.length)return e.call(t,s,l,u)})(t.copyFromChannel),t.copyToChannel=(e=>(s,n,c=0)=>{let u=o(c),l=o(n);if(u<t.length)return e.call(t,s,l,u)})(t.copyToChannel)};r();var Ol=o=>(t,e)=>{let s=e.createBuffer(1,1,44100);t.buffer===null&&(t.buffer=s),o(t,"buffer",n=>()=>{let c=n.call(t);return c===s?null:c},n=>c=>n.call(t,c===null?s:c))};r();var Dl=(o,t)=>(e,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw o()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw o()}});let n=e.createBufferSource();t(s,()=>{let l=s.numberOfInputs;for(let h=0;h<l;h+=1)n.connect(s,0,h)},()=>n.disconnect(s))};r();var Ln=(o,t,e)=>o.copyFromChannel===void 0?o.getChannelData(e)[0]:(o.copyFromChannel(t,e),t[0]);r();var Bn=o=>{if(o===null)return!1;let t=o.length;return t%2!==0?o[Math.floor(t/2)]!==0:o[t/2-1]+o[t/2]!==0};r();var ns=(o,t,e,s)=>{let n=o;for(;!n.hasOwnProperty(t);)n=Object.getPrototypeOf(n);let{get:c,set:u}=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(o,t,{get:e(c),set:s(u)})};r();var El=o=>({...o,outputChannelCount:o.outputChannelCount!==void 0?o.outputChannelCount:o.numberOfInputs===1&&o.numberOfOutputs===1?[o.channelCount]:Array.from({length:o.numberOfOutputs},()=>1)});r();var Rl=o=>({...o,channelCount:o.numberOfOutputs});r();var Ml=o=>{let{imag:t,real:e}=o;return t===void 0?e===void 0?{...o,imag:[0,0],real:[0,0]}:{...o,imag:Array.from(e,()=>0),real:e}:e===void 0?{...o,imag:t,real:Array.from(t,()=>0)}:{...o,imag:t,real:e}};r();var Wn=(o,t,e)=>{try{o.setValueAtTime(t,e)}catch(s){if(s.code!==9)throw s;Wn(o,t,e+1e-7)}};r();var Fl=o=>{let t=o.createBufferSource();t.start();try{t.start()}catch{return!0}return!1};r();var Il=o=>{let t=o.createBufferSource(),e=o.createBuffer(1,1,44100);t.buffer=e;try{t.start(0,1)}catch{return!1}return!0};r();var Pl=o=>{let t=o.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0};r();var Fo=o=>{let t=o.createOscillator();try{t.start(-1)}catch(e){return e instanceof RangeError}return!1};r();var jn=o=>{let t=o.createBuffer(1,1,44100),e=o.createBufferSource();e.buffer=t,e.start(),e.stop();try{return e.stop(),!0}catch{return!1}};r();var Io=o=>{let t=o.createOscillator();try{t.stop(-1)}catch(e){return e instanceof RangeError}return!1};r();var ql=o=>{let{port1:t,port2:e}=new MessageChannel;try{t.postMessage(o)}finally{t.close(),e.close()}};r();r();r();var Vl=o=>{o.start=(t=>(e=0,s=0,n)=>{let c=o.buffer,u=c===null?s:Math.min(c.duration,s);c!==null&&u>c.duration-.5/o.context.sampleRate?t.call(o,e,0,0):t.call(o,e,u,n)})(o.start)};r();var Gn=(o,t)=>{let e=t.createGain();o.connect(e);let s=(n=>()=>{n.call(o,e),o.removeEventListener("ended",s)})(o.disconnect);o.addEventListener("ended",s),xe(o,e),o.stop=(n=>{let c=!1;return(u=0)=>{if(c)try{n.call(o,u)}catch{e.gain.setValueAtTime(0,u)}else n.call(o,u),c=!0}})(o.stop)};r();var Nr=(o,t)=>e=>{let s={value:o};return Object.defineProperties(e,{currentTarget:s,target:s}),typeof t=="function"?t.call(o,e):t.handleEvent.call(o,e)};r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();var Dm=ka(Se),Em=qa(Se),Rm=Mc(ar),Ll=new WeakMap,Mm=Xc(Ll),ye=mc(new Map,new WeakMap),je=Cl(),Bl=Au(ye,_e),zn=$c(Mt),jt=fl(Mt,zn,Qe),Fm=Wa(Bl,dt,jt),gt=Kc(Hr),Ze=Qu(je),_t=fu(Ze),Wl=new WeakMap,jl=jc(Nr),is=Nu(je),Un=uu(is),Hn=lu(je),Gl=hu(je),$s=Du(je),kt=oc(Na(bo),Pa(Dm,Em,Xr,Rm,Qr,Mt,Mm,Be,dt,Se,Xt,Qe,Zr),ye,ou(Gs,Qr,Mt,dt,Cr,Xt),_e,ts,Wt,Dc(Xr,Gs,Mt,dt,Cr,gt,Xt,_t),Pc(Wl,Mt,Dt),jl,gt,Un,Hn,Gl,_t,$s),Im=Ba(kt,Fm,_e,Bl,gt,_t);var Yn=new WeakSet,zl=Su(je),Ul=Ac(new Uint32Array(1)),$n=kl(Ul,_e),Xn=Nl(Ul),Pm=ja(Yn,ye,Wt,zl,Ze,wl(zl),$n,Xn);var Po=Va(Qt),Hl=ml(zn,cr,Qe),Ge=yc(Hl),as=ku(Po,ye,Fl,Il,Pl,Fo,jn,Io,Vl,Ol(ns),Gn),ze=pl(Qc(cr),Hl),qm=Ua(Ge,as,dt,ze,jt),ke=ic(Oa(To),Wl,js,ac,se.createCancelAndHoldAutomationEvent,se.createCancelScheduledValuesAutomationEvent,se.createExponentialRampToValueAutomationEvent,se.createLinearRampToValueAutomationEvent,se.createSetTargetAutomationEvent,se.createSetValueAutomationEvent,se.createSetValueCurveAutomationEvent,is,Wn),Vm=za(kt,qm,ke,xt,as,gt,_t,Nr);var Lm=Ja(kt,tc,_e,xt,Ou(Qt,ns),gt,_t,jt),Bm=fc(Ge,Pn,dt,ze,jt),Or=gl(Ll),Wm=pc(kt,ke,Bm,ts,Pn,gt,_t,Or),hr=bu(Se,Hn),jm=Dl(xt,hr),pr=qu(is,jm),Gm=_c(pr,dt,jt),zm=dc(kt,Gm,pr,gt,_t),Um=xc(ss,dt,jt),Hm=gc(kt,Um,ss,gt,_t,Rl),Ym=Bu(Po,as,Qt,hr),cs=Lu(Po,ye,Ym,Fo,Io),$m=Tc(Ge,cs,dt,ze,jt),Xm=bc(kt,ke,$m,cs,gt,_t,Nr),Yl=Wu(Wt,ns),Qm=Cc(Yl,dt,jt),Zm=Sc(kt,Qm,Yl,gt,_t,Or),Km=Rc(Ge,qn,dt,ze,jt),Jm=Ec(kt,ke,Km,qn,gt,_t,Or),$l=ju(Wt),td=Lc(Ge,$l,dt,ze,jt),ed=Vc(kt,ke,td,$l,Wt,gt,_t,Or),rd=Hc(Ge,Qt,dt,ze,jt),sd=Uc(kt,ke,rd,Qt,gt,_t),od=Uu(ts,xt,os,Wt),qo=dl(ye,Qt,os,Tl(Qt,Ze)),nd=su(as,dt,Ze,jt,qo),id=Gu(od),ad=ru(kt,id,nd,gt,_t,Or),cd=ec(ke,pr,cs,os,Wt,Ln,_t,ns),Xl=new WeakMap,Qn=vu(Lm,cd,jl,_t,Xl,Nr),Ql=Zu(Po,ye,Fo,jn,Io,Gn),ud=al(Ge,Ql,dt,ze,jt),ld=il(kt,ke,Ql,ud,gt,_t,Nr),Zl=wc(as),hd=ol(Zl,xt,Qt,Bn,hr),Vo=sl(Zl,xt,hd,Bn,hr,is,ns),pd=Ju(Xr,xt,pr,Qt,os,Vo,Wt,Qr,Ln,hr),Kl=Ku(pd),fd=ul(Ge,pr,cs,Qt,Kl,dt,Ze,ze,jt,qo),md=cl(kt,ke,Kl,fd,gt,_t,Or),dd=tl(_e),_d=ll(dd,gt,new WeakSet,Ml),gd=rl(pr,ss,Qt,Vo,Wt,hr),Jl=el(gd,Wt),xd=vl(Ge,Jl,dt,ze,jt),yd=yl(kt,ke,Jl,xd,gt,_t),vd=Sl(Vo,dt,jt),wd=Al(kt,xt,Vo,vd,gt,_t,Or),th=mu(je),Zn=Gc(je),eh=new WeakMap,bd=Jc(eh,Ze),Td=th?Ia(ye,Wt,Wc(je),Zn,zc(Ca),gt,bd,_t,$s,new WeakMap,new WeakMap,bl($s,Ze),je):void 0,Ad=pu(Un,_t),Sd=Oc(Yn,ye,Nc,Bc,new WeakSet,gt,Ad,Yr,Ce,$n,Xn),rh=hc(Td,Im,Pm,Vm,Wm,zm,Hm,Xm,Zm,Sd,Jm,ed,sd,ad,Qn,ld,md,_d,yd,wd),Cd=du(kt,Hu,gt,_t),kd=_u(kt,Yu,gt,_t),Nd=gu(kt,$u,gt,_t),Od=Xu(xt,_t),Dd=xu(kt,Od,gt),sh=Ka(rh,xt,Wt,Vn,Cd,kd,Nd,Dd,is);var Kn=tu(Xl),Ed=La(Kn),oh=vc(_e),Rd=Fc(Kn),nh=qc(_e),ih=new WeakMap,Md=Yc(ih,Dt),Fd=Pu(oh,_e,xt,pr,ss,cs,Qt,os,Wt,nh,Zn,Md,hr),Id=Ru(xt,Fd,Qt,Wt,hr),Pd=lc(Ge,oh,as,pr,ss,cs,Qt,Rd,nh,Zn,dt,$s,Ze,ze,jt,qo),qd=Zc(eh),Vd=_l(ih),Jn=th?cc(Ed,kt,ke,Pd,Id,Mt,qd,gt,_t,$s,El,Vd,ql,Nr):void 0;var pq=yu(xt,Wt,Vn,Qn,is);var ah=kc(Wt,Ze),ch=xl(Yn,ye,zn,Kn,qo,Yr,$n,Xn),fq=wu(ye,xt,ah,Qn,ch);var uh=nl(rh,ye,xt,ah,ch);var lh=nu(Hr,Un),hh=iu(Ur,Hn),ph=au(js,Gl),fh=cu(Hr,_t);r();function U(o,t){if(!o)throw new Error(t)}function qt(o,t,e=1/0){if(!(t<=o&&o<=e))throw new RangeError(`Value must be within [${t}, ${e}], got: ${o}`)}function Lo(o){!o.isOffline&&o.state!=="running"&&Xs('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}var mh=console;function dh(...o){mh.log(...o)}function Xs(...o){mh.warn(...o)}r();function Et(o){return typeof o=="undefined"}function Q(o){return!Et(o)}function _h(o){return typeof o=="function"}function Zt(o){return typeof o=="number"}function Ne(o){return Object.prototype.toString.call(o)==="[object Object]"&&o.constructor===Object}function ti(o){return typeof o=="boolean"}function Nt(o){return Array.isArray(o)}function Vt(o){return typeof o=="string"}function Qs(o){return Vt(o)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(o)}function gh(o){return new sh(o)}function xh(o,t,e){return new uh(o,t,e)}var Ue=typeof self=="object"?self:null,yh=Ue&&(Ue.hasOwnProperty("AudioContext")||Ue.hasOwnProperty("webkitAudioContext"));function vh(o,t,e){return U(Q(Jn),"This node only works in a secure context (https or localhost)"),new Jn(o,t,e)}r();r();var jh=Pt(Wh(),1),{__extends:Aq,__assign:Sq,__rest:Cq,__decorate:Ut,__param:kq,__metadata:Nq,__awaiter:st,__generator:Oq,__exportStar:Dq,__createBinding:Eq,__values:Rq,__read:Mq,__spread:Fq,__spreadArrays:Iq,__spreadArray:Pq,__await:qq,__asyncGenerator:Vq,__asyncDelegator:Lq,__asyncValues:Bq,__makeTemplateObject:Wq,__importStar:jq,__importDefault:Gq,__classPrivateFieldGet:zq,__classPrivateFieldSet:Uq}=jh.default;r();var ri=class{constructor(t,e,s){this._callback=t,this._type=e,this._updateInterval=s,this._createClock()}_createWorker(){let t=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),e=URL.createObjectURL(t),s=new Worker(e);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){this._updateInterval=Math.max(t,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(t*1e3,1))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}};r();function Oe(o){return ph(o)}function He(o){return hh(o)}function ls(o){return fh(o)}function fr(o){return lh(o)}function Go(o){return o instanceof AudioBuffer}r();function Wd(o,t){return o==="value"||Oe(t)||He(t)||Go(t)}function De(o,...t){if(!t.length)return o;let e=t.shift();if(Ne(o)&&Ne(e))for(let s in e)Wd(s,e[s])?o[s]=e[s]:Ne(e[s])?(o[s]||Object.assign(o,{[s]:{}}),De(o[s],e[s])):Object.assign(o,{[s]:e[s]});return De(o,...t)}function Gh(o,t){return o.length===t.length&&o.every((e,s)=>t[s]===e)}function b(o,t,e=[],s){let n={},c=Array.from(t);if(Ne(c[0])&&s&&!Reflect.has(c[0],s)&&(Object.keys(c[0]).some(l=>Reflect.has(o,l))||(De(n,{[s]:c[0]}),e.splice(e.indexOf(s),1),c.shift())),c.length===1&&Ne(c[0]))De(n,c[0]);else for(let u=0;u<e.length;u++)Q(c[u])&&(n[e[u]]=c[u]);return De(o,n)}function zh(o){return o.constructor.getDefaults()}function he(o,t){return Et(o)?t:o}function Ye(o,t){return t.forEach(e=>{Reflect.has(o,e)&&delete o[e]}),o}r();r();var Lt=class{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||Ue&&this.toString()===Ue.TONE_DEBUG_CLASS)&&dh(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}};Lt.version=Ms;r();var si=1e-6;function hs(o,t){return o>t+si}function Zs(o,t){return hs(o,t)||Kt(o,t)}function zo(o,t){return o+si<t}function Kt(o,t){return Math.abs(o-t)<si}function oi(o,t,e){return Math.max(Math.min(o,e),t)}var Ft=class extends Lt{constructor(){super();this.name="Timeline",this._timeline=[];let t=b(Ft.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(U(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){let e=this._timeline[this.length-1];U(Zs(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{let e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){let e=this.length-this.memory;this._timeline.splice(0,e)}return this}remove(t){let e=this._timeline.indexOf(t);return e!==-1&&this._timeline.splice(e,1),this}get(t,e="time"){let s=this._search(t,e);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){let s=this._search(t,e);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(t){let e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];let s=this._search(t);return s-1>=0?this._timeline[s-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(Kt(this._timeline[e].time,t)){for(let s=e;s>=0&&Kt(this._timeline[s].time,t);s--)e=s;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else this._timeline.length===1&&Zs(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){let e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){let e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(this._timeline.length===0)return-1;let s=0,n=this._timeline.length,c=n;if(n>0&&this._timeline[n-1][e]<=t)return n-1;for(;s<c;){let u=Math.floor(s+(c-s)/2),l=this._timeline[u],h=this._timeline[u+1];if(Kt(l[e],t)){for(let p=u;p<this._timeline.length;p++){let f=this._timeline[p];if(Kt(f[e],t))u=p;else break}return u}else{if(zo(l[e],t)&&hs(h[e],t))return u;hs(l[e],t)?c=u:s=u+1}}return-1}_iterate(t,e=0,s=this._timeline.length-1){this._timeline.slice(e,s+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){let s=this._search(t);return s!==-1&&this._iterate(e,0,s),this}forEachAfter(t,e){let s=this._search(t);return this._iterate(e,s+1),this}forEachBetween(t,e,s){let n=this._search(t),c=this._search(e);return n!==-1&&c!==-1?(this._timeline[n].time!==t&&(n+=1),this._timeline[c].time===e&&(c-=1),this._iterate(s,n,c)):n===-1&&this._iterate(s,0,c),this}forEachFrom(t,e){let s=this._search(t);for(;s>=0&&this._timeline[s].time>=t;)s--;return this._iterate(e,s+1),this}forEachAtTime(t,e){let s=this._search(t);if(s!==-1&&Kt(this._timeline[s].time,t)){let n=s;for(let c=s;c>=0&&Kt(this._timeline[c].time,t);c--)n=c;this._iterate(c=>{e(c)},n,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}};r();var Uh=[];function mr(o){Uh.push(o)}function Hh(o){Uh.forEach(t=>t(o))}var Yh=[];function dr(o){Yh.push(o)}function $h(o){Yh.forEach(t=>t(o))}r();r();var Ke=class extends Lt{constructor(){super(...arguments);this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach(n=>{Et(this._events)&&(this._events={}),this._events.hasOwnProperty(n)||(this._events[n]=[]),this._events[n].push(e)}),this}once(t,e){let s=(...n)=>{e(...n),this.off(t,s)};return this.on(t,s),this}off(t,e){return t.split(/\W+/).forEach(n=>{if(Et(this._events)&&(this._events={}),this._events.hasOwnProperty(t))if(Et(e))this._events[t]=[];else{let c=this._events[t];for(let u=c.length-1;u>=0;u--)c[u]===e&&c.splice(u,1)}}),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){let s=this._events[t].slice(0);for(let n=0,c=s.length;n<c;n++)s[n].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach(e=>{let s=Object.getOwnPropertyDescriptor(Ke.prototype,e);Object.defineProperty(t.prototype,e,s)})}dispose(){return super.dispose(),this._events=void 0,this}};var Ks=class extends Ke{constructor(){super(...arguments);this.isOffline=!1}toJSON(){return{}}};var _r=class extends Ks{constructor(){super();this.name="Context",this._constants=new Map,this._timeouts=new Ft,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;let t=b(_r.getDefaults(),arguments,["context"]);t.context?this._context=t.context:this._context=gh({latencyHint:t.latencyHint}),this._ticker=new ri(this.emit.bind(this,"tick"),t.clockSource,t.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(t.latencyHint),this.lookAhead=t.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(Hh(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,s){return this._context.createBuffer(t,e,s)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,s){return this._context.createPeriodicWave(t,e,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return U(fr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return U(fr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return U(fr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){U(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){U(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){U(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){U(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return vh(this.rawContext,t,e)}addAudioWorkletModule(t,e){return st(this,void 0,void 0,function*(){U(Q(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(e)||this._workletModules.set(e,this.rawContext.audioWorklet.addModule(t)),yield this._workletModules.get(e)})}workletsAreReady(){return st(this,void 0,void 0,function*(){let t=[];this._workletModules.forEach(e=>t.push(e)),yield Promise.all(t)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get latencyHint(){return this._latencyHint}_setLatencyHint(t){let e=0;if(this._latencyHint=t,Vt(t))switch(t){case"interactive":e=.1;break;case"playback":e=.5;break;case"balanced":e=.25;break}this.lookAhead=e,this.updateInterval=e/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return fr(this._context)?this._context.resume():Promise.resolve()}close(){return st(this,void 0,void 0,function*(){fr(this._context)&&(yield this._context.close()),this._initialized&&$h(this)})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{let e=this._context.createBuffer(1,128,this._context.sampleRate),s=e.getChannelData(0);for(let c=0;c<s.length;c++)s[c]=t;let n=this._context.createBufferSource();return n.channelCount=1,n.channelCountMode="explicit",n.buffer=e,n.loop=!0,n.start(0),this._constants.set(t,n),n}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this}_timeoutLoop(){let t=this.now(),e=this._timeouts.peek();for(;this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}setTimeout(t,e){this._timeoutIds++;let s=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:s+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(e=>{e.id===t&&this._timeouts.remove(e)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){let s=++this._timeoutIds,n=()=>{let c=this.now();this._timeouts.add({callback:()=>{t(),n()},id:s,time:c+e})};return n(),s}};r();var ni=class extends Ks{constructor(){super(...arguments);this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,s){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t,e){return st(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}};r();r();r();function V(o,t){Nt(t)?t.forEach(e=>V(o,e)):Object.defineProperty(o,t,{enumerable:!0,writable:!1})}function ps(o,t){Nt(t)?t.forEach(e=>ps(o,e)):Object.defineProperty(o,t,{writable:!0})}var tt=()=>{};var it=class extends Lt{constructor(){super();this.name="ToneAudioBuffer",this.onload=tt;let t=b(it.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,t.url&&Go(t.url)||t.url instanceof it?this.set(t.url):Vt(t.url)&&this.load(t.url).catch(t.onerror)}static getDefaults(){return{onerror:tt,onload:tt,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Ot().sampleRate}set(t){return t instanceof it?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return st(this,void 0,void 0,function*(){let e=it.load(t).then(s=>{this.set(s),this.onload(this)});it.downloads.push(e);try{yield e}finally{let s=it.downloads.indexOf(e);it.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){let e=Nt(t)&&t[0].length>0,s=e?t.length:1,n=e?t[0].length:t.length,c=Ot(),u=c.createBuffer(s,n,c.sampleRate),l=!e&&s===1?[t]:t;for(let h=0;h<s;h++)u.copyToChannel(l[h],h);return this._buffer=u,this}toMono(t){if(Zt(t))this.fromArray(this.toArray(t));else{let e=new Float32Array(this.length),s=this.numberOfChannels;for(let n=0;n<s;n++){let c=this.toArray(n);for(let u=0;u<c.length;u++)e[u]+=c[u]}e=e.map(n=>n/s),this.fromArray(e)}return this}toArray(t){if(Zt(t))return this.getChannelData(t);if(this.numberOfChannels===1)return this.toArray(0);{let e=[];for(let s=0;s<this.numberOfChannels;s++)e[s]=this.getChannelData(s);return e}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){let s=Math.floor(t*this.sampleRate),n=Math.floor(e*this.sampleRate);U(s<n,"The start time must be less than the end time");let c=n-s,u=Ot().createBuffer(this.numberOfChannels,c,this.sampleRate);for(let l=0;l<this.numberOfChannels;l++)u.copyToChannel(this.getChannelData(l).subarray(s,n),l);return new it(u)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return new it().fromArray(t)}static fromUrl(t){return st(this,void 0,void 0,function*(){return yield new it().load(t)})}static load(t){return st(this,void 0,void 0,function*(){let e=t.match(/\[([^\]\[]+\|.+)\]$/);if(e){let l=e[1].split("|"),h=l[0];for(let p of l)if(it.supportsType(p)){h=p;break}t=t.replace(e[0],h)}let s=it.baseUrl===""||it.baseUrl.endsWith("/")?it.baseUrl:it.baseUrl+"/",n=yield fetch(s+t);if(!n.ok)throw new Error(`could not load url: ${t}`);let c=yield n.arrayBuffer();return yield Ot().decodeAudioData(c)})}static supportsType(t){let e=t.split("."),s=e[e.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return st(this,void 0,void 0,function*(){for(yield Promise.resolve();it.downloads.length;)yield it.downloads[0]})}};it.baseUrl="";it.downloads=[];var Je=class extends _r{constructor(){super({clockSource:"offline",context:ls(arguments[0])?arguments[0]:xh(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:ls(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]});this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=ls(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return st(this,void 0,void 0,function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;let s=Math.floor(this.sampleRate/128);t&&e%s===0&&(yield new Promise(n=>setTimeout(n,1)))}})}render(t=!0){return st(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(t);let e=yield this._context.startRendering();return new it(e)})}close(){return Promise.resolve()}};var Xh=new ni,Js=Xh;function Ot(){return Js===Xh&&yh&&ii(new _r),Js}function ii(o){fr(o)?Js=new _r(o):ls(o)?Js=new Je(o):Js=o}if(Ue&&!Ue.TONE_SILENCE_LOGGING){let o="v";Ms==="dev"&&(o="");let t=` * Tone.js ${o}${Ms} * `;console.log(`%c${t}`,"background: #000; color: #fff")}r();r();r();r();r();r();function fs(o){return Math.pow(10,o/20)}function ms(o){return 20*(Math.log(o)/Math.LN10)}function Dr(o){return Math.pow(2,o/12)}var Uo=440;function Qh(){return Uo}function Zh(o){Uo=o}function Er(o){return Math.round(ai(o))}function ai(o){return 69+12*Math.log2(o/Uo)}function Ho(o){return Uo*Math.pow(2,(o-69)/12)}r();r();var to=class extends Lt{constructor(t,e,s){super();this.defaultUnits="s",this._val=e,this._units=s,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{let s=parseInt(t,10),n=e==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*n:this._beatsToUnits(4/s)*n},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{let e=parseInt(t,10);return this._beatsToUnits(8/(Math.floor(e)*3))},regexp:/^(\d+)t$/i},tr:{method:(t,e,s)=>{let n=0;return t&&t!=="0"&&(n+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&e!=="0"&&(n+=this._beatsToUnits(parseFloat(e))),s&&s!=="0"&&(n+=this._beatsToUnits(parseFloat(s)/4)),n},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof to&&this.fromType(this._val),Et(this._val))return this._noArg();if(Vt(this._val)&&Et(this._units)){for(let t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(Ne(this._val)){let t=0;for(let e in this._val)if(Q(this._val[e])){let s=this._val[e];t+=new this.constructor(this.context,e).valueOf()*s}return t}if(Q(this._units)){let t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}else return Vt(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}};var Ht=class extends to{constructor(){super(...arguments);this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{let e=new Ht(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){let s=new this.constructor(this.context,t).valueOf(),n=this.valueOf(),l=Math.round(n/s)*s-n;return n+l*e}toNotation(){let t=this.toSeconds(),e=["1m"];for(let c=1;c<9;c++){let u=Math.pow(2,c);e.push(u+"n."),e.push(u+"n"),e.push(u+"t")}e.push("0");let s=e[0],n=new Ht(this.context,e[0]).toSeconds();return e.forEach(c=>{let u=new Ht(this.context,c).toSeconds();Math.abs(u-t)<Math.abs(n-t)&&(s=c,n=u)}),s}toBarsBeatsSixteenths(){let t=this._beatsToUnits(1),e=this.valueOf()/t;e=parseFloat(e.toFixed(4));let s=Math.floor(e/this._getTimeSignature()),n=e%1*4;e=Math.floor(e)%this._getTimeSignature();let c=n.toString();return c.length>3&&(n=parseFloat(parseFloat(c).toFixed(3))),[s,e,n].join(":")}toTicks(){let t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Er(this.toFrequency())}_now(){return this.context.now()}};var Bt=class extends Ht{constructor(){super(...arguments);this.name="Frequency",this.defaultUnits="hz"}static get A4(){return Qh()}static set A4(t){Zh(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return this.defaultUnits==="midi"?t:Bt.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(t,e){let n=jd[t.toLowerCase()]+(parseInt(e,10)+1)*12;return this.defaultUnits==="midi"?n:Bt.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,s){let n=1;return t&&t!=="0"&&(n*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&e!=="0"&&(n*=this._beatsToUnits(parseFloat(e))),s&&s!=="0"&&(n*=this._beatsToUnits(parseFloat(s)/4)),n}}})}transpose(t){return new Bt(this.context,this.valueOf()*Dr(t))}harmonize(t){return t.map(e=>this.transpose(e))}toMidi(){return Er(this.valueOf())}toNote(){let t=this.toFrequency(),e=Math.log2(t/Bt.A4),s=Math.round(12*e)+57,n=Math.floor(s/12);return n<0&&(s+=-12*n),Gd[s%12]+n.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){let t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(t*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return Ho(t)}static ftom(t){return Er(t)}},jd={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},Gd=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];r();var Ee=class extends Ht{constructor(){super(...arguments);this.name="TransportTime"}_now(){return this.context.transport.seconds}};var vt=class extends Lt{constructor(){super();let t=b(vt.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:Ot()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return new Ht(this.context,t).toSeconds()}toFrequency(t){return new Bt(this.context,t).toFrequency()}toTicks(t){return new Ee(this.context,t).toTicks()}_getPartialProperties(t){let e=this.get();return Object.keys(e).forEach(s=>{Et(t[s])&&delete e[s]}),e}get(){let t=zh(this);return Object.keys(t).forEach(e=>{if(Reflect.has(this,e)){let s=this[e];Q(s)&&Q(s.value)&&Q(s.setValueAtTime)?t[e]=s.value:s instanceof vt?t[e]=s._getPartialProperties(t[e]):Nt(s)||Zt(s)||Vt(s)||ti(s)?t[e]=s:delete t[e]}}),t}set(t){return Object.keys(t).forEach(e=>{Reflect.has(this,e)&&Q(this[e])&&(this[e]&&Q(this[e].value)&&Q(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof vt?this[e].set(t[e]):this[e]=t[e])}),this}};r();var tr=class extends Ft{constructor(t="stopped"){super();this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){let e=this.get(t);return e!==null?e.state:this._initial}setStateAtTime(t,e,s){return qt(e,0),this.add(Object.assign({},s,{state:t,time:e})),this}getLastState(t,e){let s=this._search(e);for(let n=s;n>=0;n--){let c=this._timeline[n];if(c.state===t)return c}}getNextState(t,e){let s=this._search(e);if(s!==-1)for(let n=s;n<this._timeline.length;n++){let c=this._timeline[n];if(c.state===t)return c}}};r();r();r();r();var rt=class extends vt{constructor(){super(b(rt.getDefaults(),arguments,["param","units","convert"]));this.name="Param",this.overridden=!1,this._minOutput=1e-7;let t=b(rt.getDefaults(),arguments,["param","units","convert"]);for(U(Q(t.param)&&(Oe(t.param)||t.param instanceof rt),"param must be an AudioParam");!Oe(t.param);)t.param=t.param._param;this._swappable=Q(t.swappable)?t.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new Ft(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,Q(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(vt.getDefaults(),{convert:!0,units:"number"})}get value(){let t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return Q(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Q(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return Q(this.maxValue)&&Q(this.minValue)&&qt(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?fs(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&this.units==="decibels"?ms(t):t}setValueAtTime(t,e){let s=this.toSeconds(e),n=this._fromType(t);return U(isFinite(n)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(n),this.log(this.units,"setValueAtTime",t,s),this._events.add({time:s,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,s),this}getValueAtTime(t){let e=Math.max(this.toSeconds(t),0),s=this._events.getAfter(e),n=this._events.get(e),c=this._initialValue;if(n===null)c=this._initialValue;else if(n.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){let u=this._events.getBefore(n.time),l;u===null?l=this._initialValue:l=u.value,n.type==="setTargetAtTime"&&(c=this._exponentialApproach(n.time,l,n.value,n.constant,e))}else if(s===null)c=n.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let u=n.value;if(n.type==="setTargetAtTime"){let l=this._events.getBefore(n.time);l===null?u=this._initialValue:u=l.value}s.type==="linearRampToValueAtTime"?c=this._linearInterpolate(n.time,u,s.time,s.value,e):c=this._exponentialInterpolate(n.time,u,s.time,s.value,e)}else c=n.value;return this._toType(c)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),this._fromType(e)===0&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){let s=this._fromType(t),n=this.toSeconds(e);return U(isFinite(s)&&isFinite(n),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(s),this._events.add({time:n,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",t,n),this._param.linearRampToValueAtTime(s,n),this}exponentialRampToValueAtTime(t,e){let s=this._fromType(t);s=Kt(s,0)?this._minOutput:s,this._assertRange(s);let n=this.toSeconds(e);return U(isFinite(s)&&isFinite(n),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:n,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",t,n),this._param.exponentialRampToValueAtTime(s,n),this}exponentialRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(t,s+this.toSeconds(e)),this}linearRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(t,s+this.toSeconds(e)),this}targetRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(t,s,e),this}exponentialApproachValueAtTime(t,e,s){e=this.toSeconds(e),s=this.toSeconds(s);let n=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(t,e,n),this.cancelAndHoldAtTime(e+s*.9),this.linearRampToValueAtTime(t,e+s),this}setTargetAtTime(t,e,s){let n=this._fromType(t);U(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");let c=this.toSeconds(e);return this._assertRange(n),U(isFinite(n)&&isFinite(c),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:s,time:c,type:"setTargetAtTime",value:n}),this.log(this.units,"setTargetAtTime",t,c,s),this._param.setTargetAtTime(n,c,s),this}setValueCurveAtTime(t,e,s,n=1){s=this.toSeconds(s),e=this.toSeconds(e);let c=this._fromType(t[0])*n;this.setValueAtTime(this._toType(c),e);let u=s/(t.length-1);for(let l=1;l<t.length;l++){let h=this._fromType(t[l])*n;this.linearRampToValueAtTime(this._toType(h),e+l*u)}return this}cancelScheduledValues(t){let e=this.toSeconds(t);return U(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){let e=this.toSeconds(t),s=this._fromType(this.getValueAtTime(e));U(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+s);let n=this._events.get(e),c=this._events.getAfter(e);return n&&Kt(n.time,e)?c?(this._param.cancelScheduledValues(c.time),this._events.cancel(c.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):c&&(this._param.cancelScheduledValues(c.time),this._events.cancel(c.time),c.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),e):c.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),e)),this._events.add({time:e,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,e),this}rampTo(t,e=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(t,e,s):this.linearRampTo(t,e,s),this}apply(t){let e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);let s=this._events.get(e);if(s&&s.type==="setTargetAtTime"){let n=this._events.getAfter(s.time),c=n?n.time:e+2,u=(c-e)/10;for(let l=e;l<c;l+=u)t.linearRampToValueAtTime(this.getValueAtTime(l),l)}return this._events.forEachAfter(this.context.currentTime,n=>{n.type==="cancelScheduledValues"?t.cancelScheduledValues(n.time):n.type==="setTargetAtTime"?t.setTargetAtTime(n.value,n.time,n.constant):t[n.type](n.value,n.time)}),this}setParam(t){U(this._swappable,"The Param must be assigned as 'swappable' in the constructor");let e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,s,n,c){return s+(e-s)*Math.exp(-(c-t)/n)}_linearInterpolate(t,e,s,n,c){return e+(n-e)*((c-t)/(s-t))}_exponentialInterpolate(t,e,s,n,c){return e*Math.pow(n/e,(c-t)/(s-t))}};r();var F=class extends vt{constructor(){super(...arguments);this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return Q(this.input)?Oe(this.input)||this.input instanceof rt?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Q(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return Q(t)&&(t instanceof F||He(t))}_getInternalNodes(){let t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(s=>{s.channelCount=t.channelCount,s.channelCountMode=t.channelCountMode,s.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){let t=this._getInternalNodes();U(t.length>0,"ToneAudioNode does not have any internal nodes");let e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){let e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){let e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){let e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,s=0){return Jt(this,t,e,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Xs("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,s=0){return Kh(this,t,e,s),this}chain(...t){return Re(this,...t),this}fan(...t){return t.forEach(e=>this.connect(e)),this}dispose(){return super.dispose(),Q(this.input)&&(this.input instanceof F?this.input.dispose():He(this.input)&&this.input.disconnect()),Q(this.output)&&(this.output instanceof F?this.output.dispose():He(this.output)&&this.output.disconnect()),this._internalChannels=[],this}};function Re(...o){let t=o.shift();o.reduce((e,s)=>(e instanceof F?e.connect(s):He(e)&&Jt(e,s),s),t)}function Jt(o,t,e=0,s=0){for(U(Q(o),"Cannot connect from undefined node"),U(Q(t),"Cannot connect to undefined node"),(t instanceof F||He(t))&&U(t.numberOfInputs>0,"Cannot connect to node with no inputs"),U(o.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof F||t instanceof rt;)Q(t.input)&&(t=t.input);for(;o instanceof F;)Q(o.output)&&(o=o.output);Oe(t)?o.connect(t,e):o.connect(t,e,s)}function Kh(o,t,e=0,s=0){if(Q(t))for(;t instanceof F;)t=t.input;for(;!He(o);)Q(o.output)&&(o=o.output);Oe(t)?o.disconnect(t,e):He(t)?o.disconnect(t,e,s):o.disconnect()}r();r();r();var X=class extends F{constructor(){super(b(X.getDefaults(),arguments,["gain","units"]));this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;let t=b(X.getDefaults(),arguments,["gain","units"]);this.gain=new rt({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),V(this,"gain")}static getDefaults(){return Object.assign(F.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}};var $e=class extends F{constructor(t){super(t);this.onended=tt,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new X({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(e){let s=this.toSeconds(e);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(F.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:tt})}_startGain(t,e=1){U(this._startTime===-1,"Source cannot be started more than once");let s=this.toSeconds(this._fadeIn);return this._startTime=t+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,t),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(e,t+s):this._gainNode.gain.exponentialApproachValueAtTime(e,t,s)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){U(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();let e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.context.currentTime),e>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{let s=this._curve==="exponential"?e*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==tt&&(this.onended(this),this.onended=tt,!this.context.isOffline)){let t=()=>this.dispose();typeof window.requestIdleCallback!="undefined"?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),U(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}};var Rr=class extends $e{constructor(){super(b(Rr.getDefaults(),arguments,["offset"]));this.name="ToneConstantSource",this._source=this.context.createConstantSource();let t=b(Rr.getDefaults(),arguments,["offset"]);Jt(this._source,this._gainNode),this.offset=new rt({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign($e.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){let e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}};var K=class extends F{constructor(){super(b(K.getDefaults(),arguments,["value","units"]));this.name="Signal",this.override=!0;let t=b(K.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Rr({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(F.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,s=0){return ds(this,t,e,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,s){return this._param.exponentialRampTo(t,e,s),this}linearRampTo(t,e,s){return this._param.linearRampTo(t,e,s),this}targetRampTo(t,e,s){return this._param.targetRampTo(t,e,s),this}exponentialApproachValueAtTime(t,e,s){return this._param.exponentialApproachValueAtTime(t,e,s),this}setTargetAtTime(t,e,s){return this._param.setTargetAtTime(t,e,s),this}setValueCurveAtTime(t,e,s,n){return this._param.setValueCurveAtTime(t,e,s,n),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,s){return this._param.rampTo(t,e,s),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}};function ds(o,t,e,s){(t instanceof rt||Oe(t)||t instanceof K&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof K&&(t.overridden=!0)),Jt(o,t,e,s)}r();var _s=class extends rt{constructor(){super(b(_s.getDefaults(),arguments,["value"]));this.name="TickParam",this._events=new Ft(1/0),this._multiplier=1;let t=b(_s.getDefaults(),arguments,["value"]);this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(rt.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,s){e=this.toSeconds(e),this.setRampPoint(e);let n=this._fromType(t),c=this._events.get(e),u=Math.round(Math.max(1/s,1));for(let l=0;l<=u;l++){let h=s*l+e,p=this._exponentialApproach(c.time,c.value,n,s,h);this.linearRampToValueAtTime(this._toType(p),h)}return this}setValueAtTime(t,e){let s=this.toSeconds(e);super.setValueAtTime(t,e);let n=this._events.get(s),c=this._events.previousEvent(n),u=this._getTicksUntilEvent(c,s);return n.ticks=Math.max(u,0),this}linearRampToValueAtTime(t,e){let s=this.toSeconds(e);super.linearRampToValueAtTime(t,e);let n=this._events.get(s),c=this._events.previousEvent(n),u=this._getTicksUntilEvent(c,s);return n.ticks=Math.max(u,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);let s=this._fromType(t),n=this._events.get(e),c=Math.round(Math.max((e-n.time)*10,1)),u=(e-n.time)/c;for(let l=0;l<=c;l++){let h=u*l+n.time,p=this._exponentialInterpolate(n.time,n.value,e,s,h);this.linearRampToValueAtTime(this._toType(p),h)}return this}_getTicksUntilEvent(t,e){if(t===null)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Et(t.ticks)){let u=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(u,t.time)}let s=this._fromType(this.getValueAtTime(t.time)),n=this._fromType(this.getValueAtTime(e)),c=this._events.get(e);return c&&c.time===e&&c.type==="setValueAtTime"&&(n=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(s+n)+t.ticks}getTicksAtTime(t){let e=this.toSeconds(t),s=this._events.get(e);return Math.max(this._getTicksUntilEvent(s,e),0)}getDurationOfTicks(t,e){let s=this.toSeconds(e),n=this.getTicksAtTime(e);return this.getTimeOfTick(n+t)-s}getTimeOfTick(t){let e=this._events.get(t,"ticks"),s=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&s&&s.type==="linearRampToValueAtTime"&&e.value!==s.value){let n=this._fromType(this.getValueAtTime(e.time)),u=(this._fromType(this.getValueAtTime(s.time))-n)/(s.time-e.time),l=Math.sqrt(Math.pow(n,2)-2*u*(e.ticks-t)),h=(-n+l)/u,p=(-n-l)/u;return(h>0?h:p)+e.time}else return e?e.value===0?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){let s=this.toSeconds(e),n=this.toSeconds(t),c=this.getTicksAtTime(s);return this.getTicksAtTime(s+n)-c}_fromType(t){return this.units==="bpm"&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return this.units==="bpm"&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){let e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}};var gs=class extends K{constructor(){super(b(gs.getDefaults(),arguments,["value"]));this.name="TickSignal";let t=b(gs.getDefaults(),arguments,["value"]);this.input=this._param=new _s({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(K.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}};var xs=class extends vt{constructor(){super(b(xs.getDefaults(),arguments,["frequency"]));this.name="TickSource",this._state=new tr,this._tickOffset=new Ft;let t=b(xs.getDefaults(),arguments,["frequency"]);this.frequency=new gs({context:this.context,units:t.units,value:t.frequency}),V(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},vt.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){let s=this.toSeconds(t);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),Q(e)&&this.setTicksAtTime(e,s)),this}stop(t){let e=this.toSeconds(t);if(this._state.getValueAtTime(e)==="stopped"){let s=this._state.get(e);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this}pause(t){let e=this.toSeconds(t);return this._state.getValueAtTime(e)==="started"&&this._state.setStateAtTime("paused",e),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this}getTicksAtTime(t){let e=this.toSeconds(t),s=this._state.getLastState("stopped",e),n={state:"paused",time:e};this._state.add(n);let c=s,u=0;return this._state.forEachBetween(s.time,e+this.sampleTime,l=>{let h=c.time,p=this._tickOffset.get(l.time);p&&p.time>=c.time&&(u=p.ticks,h=p.time),c.state==="started"&&l.state!=="started"&&(u+=this.frequency.getTicksAtTime(l.time)-this.frequency.getTicksAtTime(h)),c=l}),this._state.remove(n),u}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){let e=this.now(),s=this.frequency.timeToTicks(t,e);this.setTicksAtTime(s,e)}getSecondsAtTime(t){t=this.toSeconds(t);let e=this._state.getLastState("stopped",t),s={state:"paused",time:t};this._state.add(s);let n=e,c=0;return this._state.forEachBetween(e.time,t+this.sampleTime,u=>{let l=n.time,h=this._tickOffset.get(u.time);h&&h.time>=n.time&&(c=h.seconds,l=h.time),n.state==="started"&&u.state!=="started"&&(c+=u.time-l),n=u}),this._state.remove(s),c}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){let s=this._tickOffset.get(e),n=this._state.get(e),c=Math.max(s.time,n.time),u=this.frequency.getTicksAtTime(c)+t-s.ticks;return this.frequency.getTimeOfTick(u)}forEachTickBetween(t,e,s){let n=this._state.get(t);this._state.forEachBetween(t,e,u=>{n&&n.state==="started"&&u.state!=="started"&&this.forEachTickBetween(Math.max(n.time,t),u.time-this.sampleTime,s),n=u});let c=null;if(n&&n.state==="started"){let u=Math.max(n.time,t),l=this.frequency.getTicksAtTime(u),h=this.frequency.getTicksAtTime(n.time),p=l-h,f=Math.ceil(p)-p;f=Kt(f,1)?0:f;let m=this.frequency.getTimeOfTick(l+f);for(;m<e;){try{s(m,Math.round(this.getTicksAtTime(m)))}catch(d){c=d;break}m+=this.frequency.getDurationOfTicks(1,m)}}if(c)throw c;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}};var gr=class extends vt{constructor(){super(b(gr.getDefaults(),arguments,["callback","frequency"]));this.name="Clock",this.callback=tt,this._lastUpdate=0,this._state=new tr("stopped"),this._boundLoop=this._loop.bind(this);let t=b(gr.getDefaults(),arguments,["callback","frequency"]);this.callback=t.callback,this._tickSource=new xs({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,V(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(vt.getDefaults(),{callback:tt,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){Lo(this.context);let s=this.toSeconds(t);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,e),s<this._lastUpdate&&this.emit("start",s,e)),this}stop(t){let e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){let e=this.toSeconds(t);return this._state.getValueAtTime(e)==="started"&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){let s=this.toSeconds(e),n=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(n+t,s)}_loop(){let t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,s=>{switch(s.state){case"started":let n=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,n);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(t,e,(s,n)=>{this.callback(s,n)}))}getStateAtTime(t){let e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}};Ke.mixin(gr);r();r();r();var Mr=class extends Lt{constructor(){super();this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;let t=b(Mr.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(e=>{this._loadingCount++;let s=t.urls[e];this.add(e,s,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:tt,onload:tt,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return U(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,this._loadingCount===0&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,e])=>e.loaded)}add(t,e,s=tt,n=tt){return Vt(e)?this._buffers.set(t.toString(),new it(this.baseUrl+e,s,n)):this._buffers.set(t.toString(),new it(e,s,n)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}};r();r();var te=class extends Ee{constructor(){super(...arguments);this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}};r();var Jh=class extends vt{constructor(){super(...arguments);this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Ft,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){let t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){let e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}};mr(o=>{o.draw=new Jh({context:o})});dr(o=>{o.draw.dispose()});r();var ci=class extends Lt{constructor(){super(...arguments);this.name="IntervalTimeline",this._root=null,this._length=0}add(t){U(Q(t.time),"Events must have a time property"),U(Q(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new tp(t.time,t.time+t.duration,t);for(this._root===null?this._root=e:this._root.insert(e),this._length++;e!==null;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(this._root!==null){let e=[];this._root.search(t.time,e);for(let s of e)if(s.event===t){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,e=>this.remove(e)),this}_setRoot(t){this._root=t,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(t,e){t.parent!==null?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(t.left===null&&t.right===null)this._replaceNodeInParent(t,null);else if(t.right===null)this._replaceNodeInParent(t,t.left);else if(t.left===null)this._replaceNodeInParent(t,t.right);else{let e=t.getBalance(),s,n=null;if(e>0)if(t.left.right===null)s=t.left,s.right=t.right,n=s;else{for(s=t.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,n=s.parent,s.left=t.left,s.right=t.right)}else if(t.right.left===null)s=t.right,s.left=t.left,n=s;else{for(s=t.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,n=s.parent,s.left=t.left,s.right=t.right)}t.parent!==null?t.isLeftChild()?t.parent.left=s:t.parent.right=s:this._setRoot(s),n&&this._rebalance(n)}t.dispose()}_rotateLeft(t){let e=t.parent,s=t.isLeftChild(),n=t.right;n&&(t.right=n.left,n.left=t),e!==null?s?e.left=n:e.right=n:this._setRoot(n)}_rotateRight(t){let e=t.parent,s=t.isLeftChild(),n=t.left;n&&(t.left=n.right,n.right=t),e!==null?s?e.left=n:e.right=n:this._setRoot(n)}_rebalance(t){let e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(this._root!==null){let e=[];if(this._root.search(t,e),e.length>0){let s=e[0];for(let n=1;n<e.length;n++)e[n].low>s.low&&(s=e[n]);return s.event}}return null}forEach(t){if(this._root!==null){let e=[];this._root.traverse(s=>e.push(s)),e.forEach(s=>{s.event&&t(s.event)})}return this}forEachAtTime(t,e){if(this._root!==null){let s=[];this._root.search(t,s),s.forEach(n=>{n.event&&e(n.event)})}return this}forEachFrom(t,e){if(this._root!==null){let s=[];this._root.searchAfter(t,s),s.forEach(n=>{n.event&&e(n.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(t=>t.dispose()),this._root=null,this}},tp=class{constructor(t,e,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?this.left===null?this.left=t:this.left.insert(t):this.right===null?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(this.left!==null&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),!(this.low>t)&&this.right!==null&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),this.left!==null&&this.left.searchAfter(t,e)),this.right!==null&&this.right.searchAfter(t,e)}traverse(t){t(this),this.left!==null&&this.left.traverse(t),this.right!==null&&this.right.traverse(t)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return this.left!==null&&this.right!==null?t=this.left.height-this.right.height:this.left!==null?t=this.left.height+1:this.right!==null&&(t=-(this.right.height+1)),t}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}};r();r();r();r();r();r();var oe=class extends F{constructor(){super(b(oe.getDefaults(),arguments,["volume"]));this.name="Volume";let t=b(oe.getDefaults(),arguments,["volume"]);this.input=this.output=new X({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,V(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(F.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}};r();var eo=class extends F{constructor(){super(b(eo.getDefaults(),arguments));this.name="Destination",this.input=new oe({context:this.context}),this.output=new X({context:this.context}),this.volume=this.input.volume;let t=b(eo.getDefaults(),arguments);Re(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(F.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),Re(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}};mr(o=>{o.destination=new eo({context:o})});dr(o=>{o.destination.dispose()});r();r();var ui=class extends Lt{constructor(t){super();this.name="TimelineValue",this._timeline=new Ft({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){let e=this._timeline.get(t);return e?e.value:this._initialValue}};r();var Me=class{constructor(t,e){this.id=Me._eventId++;let s=Object.assign(Me.getDefaults(),e);this.transport=t,this.callback=s.callback,this._once=s.once,this.time=s.time}static getDefaults(){return{callback:tt,once:!1,time:0}}invoke(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}};Me._eventId=0;r();var ro=class extends Me{constructor(t,e){super(t,e);this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);let s=Object.assign(ro.getDefaults(),e);this.duration=new te(t.context,s.duration).valueOf(),this._interval=new te(t.context,s.interval).valueOf(),this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Me.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvents(t){let e=this.transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new te(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;let e=this.transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new te(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new te(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}};var ys=class extends vt{constructor(){super(b(ys.getDefaults(),arguments));this.name="Transport",this._loop=new ui(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Ft,this._repeatedEvents=new ci,this._syncedSignals=[],this._swingAmount=0;let t=b(ys.getDefaults(),arguments);this._ppq=t.ppq,this._clock=new gr({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),V(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(vt.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!==0&&e%(this._swingTicks*2)!==0){let s=e%(this._swingTicks*2)/(this._swingTicks*2),n=Math.sin(s*Math.PI)*this._swingAmount;t+=new te(this.context,this._swingTicks*2/3).toSeconds()*n}this._timeline.forEachAtTime(e,s=>s.invoke(t))}schedule(t,e){let s=new Me(this,{callback:t,time:new Ee(this.context,e).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(t,e,s,n=1/0){let c=new ro(this,{callback:t,duration:new Ht(this.context,n).toTicks(),interval:new Ht(this.context,e).toTicks(),time:new Ee(this.context,s).toTicks()});return this._addEvent(c,this._repeatedEvents)}scheduleOnce(t,e){let s=new Me(this,{callback:t,once:!0,time:new Ee(this.context,e).toTicks()});return this._addEvent(s,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){let e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){let e=this.toTicks(t);return this._timeline.forEachFrom(e,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(e,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(t,e)=>{e=new te(this.context,e).toSeconds(),this.emit("start",t,e)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){let s;return Q(e)&&(s=this.toTicks(e)),this._clock.start(t,s),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),this._clock.getStateAtTime(t)!=="started"?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){Nt(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new Ht(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new Ht(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new te(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){let t=this.now(),e=this._clock.getTicksAtTime(t);return new te(this.context,e).toBarsBeatsSixteenths()}set position(t){let e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){let e=this.now(),s=this._clock.frequency.timeToTicks(t,e);this.ticks=s}get progress(){if(this.loop){let t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){let e=this.now();if(this.state==="started"){let s=this._clock.getTicksAtTime(e),n=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,e),c=e+n;this.emit("stop",c),this._clock.setTicksAtTime(t,c),this.emit("start",c,this._clock.getSecondsAtTime(c))}else this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return Math.round(this._clock.getTicksAtTime(t))}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),this.state!=="started")return 0;{let e=this.now(),s=this.getTicksAtTime(e),n=t-s%t;return this._clock.nextTickTime(n,e)}}syncSignal(t,e){if(!e){let n=this.now();if(t.getValueAtTime(n)!==0){let c=this.bpm.getValueAtTime(n),u=1/(60/c/this.PPQ);e=t.getValueAtTime(n)/u}else e=0}let s=new X(e);return this.bpm.connect(s),s.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:s,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){let s=this._syncedSignals[e];s.signal===t&&(s.ratio.dispose(),s.signal.value=s.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),ps(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}};Ke.mixin(ys);mr(o=>{o.transport=new ys({context:o})});dr(o=>{o.transport.dispose()});var mt=class extends F{constructor(t){super(t);this.input=void 0,this._state=new tr("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=tt,this._syncedStop=tt,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new oe({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,V(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(F.getDefaults(),{mute:!1,onstop:tt,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,s){let n=Et(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(n=this._clampToCurrentTime(n),!this._synced&&this._state.getValueAtTime(n)==="started")U(hs(n,this._state.get(n).time),"Start time must be strictly greater than previous start time"),this._state.cancel(n),this._state.setStateAtTime("started",n),this.log("restart",n),this.restart(n,e,s);else if(this.log("start",n),this._state.setStateAtTime("started",n),this._synced){let c=this._state.get(n);c&&(c.offset=this.toSeconds(he(e,0)),c.duration=s?this.toSeconds(s):void 0);let u=this.context.transport.schedule(l=>{this._start(l,e,s)},n);this._scheduled.push(u),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>n&&this._syncedStart(this.now(),this.context.transport.seconds)}else Lo(this.context),this._start(n,e,s);return this}stop(t){let e=Et(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),this._state.getValueAtTime(e)==="started"||Q(this._state.getNextState("started",e))){if(this.log("stop",e),!this._synced)this._stop(e);else{let s=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(s)}this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,s){return t=this.toSeconds(t),this._state.getValueAtTime(t)==="started"&&(this._state.cancel(t),this._restart(t,e,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(e>0){let s=this._state.get(e);if(s&&s.state==="started"&&s.time!==e){let n=e-this.toSeconds(s.time),c;s.duration&&(c=this.toSeconds(s.duration)-n),this._start(t,this.toSeconds(s.offset)+n,c)}}},this._syncedStop=t=>{let e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));this._state.getValueAtTime(e)==="started"&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=tt,this.unsync(),this._volume.dispose(),this._state.dispose(),this}};r();var Fe=class extends $e{constructor(){super(b(Fe.getDefaults(),arguments,["url","onload"]));this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;let t=b(Fe.getDefaults(),arguments,["url","onload"]);Jt(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new rt({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new it(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign($e.getDefaults(),{url:new it,loop:!1,loopEnd:0,loopStart:0,onload:tt,onerror:tt,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,s,n=1){U(this.buffer.loaded,"buffer is either not set or not loaded");let c=this.toSeconds(t);this._startGain(c,n),this.loop?e=he(e,this.loopStart):e=he(e,0);let u=Math.max(this.toSeconds(e),0);if(this.loop){let l=this.toSeconds(this.loopEnd)||this.buffer.duration,h=this.toSeconds(this.loopStart),p=l-h;Zs(u,l)&&(u=(u-h)%p+h),Kt(u,this.buffer.duration)&&(u=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,zo(u,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(c,u)),Q(s)){let l=this.toSeconds(s);l=Math.max(l,0),this.stop(c+l)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}};var $W=44100*5;r();r();r();function ne(o,t){return st(this,void 0,void 0,function*(){let e=t/o.context.sampleRate,s=new Je(1,e,o.context.sampleRate);return new o.constructor(Object.assign(o.get(),{frequency:2/e,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}r();var Fr=class extends $e{constructor(){super(b(Fr.getDefaults(),arguments,["frequency","type"]));this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];let t=b(Fr.getDefaults(),arguments,["frequency","type"]);Jt(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new rt({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new rt({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),V(this,["frequency","detune"])}static getDefaults(){return Object.assign($e.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){let e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}};var pt=class extends mt{constructor(){super(b(pt.getDefaults(),arguments,["frequency","type"]));this.name="Oscillator",this._oscillator=null;let t=b(pt.getDefaults(),arguments,["frequency","type"]);this.frequency=new K({context:this.context,units:"frequency",value:t.frequency}),V(this,"frequency"),this.detune=new K({context:this.context,units:"cents",value:t.detune}),V(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&t.type!=="custom"&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(mt.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){let e=this.toSeconds(t),s=new Fr({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){let e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){let e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return pt._periodicWaveCache.find(e=>e.phase===this._phase&&Gh(e.partials,this._partials));{let t=pt._periodicWaveCache.find(e=>e.type===this._type&&e.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;let e=["sine","square","sawtooth","triangle"].indexOf(t)!==-1;if(this._phase===0&&e)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=t);else{let s=this._getCachedPeriodicWave();if(Q(s)){let{partials:n,wave:c}=s;this._wave=c,this._partials=n,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{let[n,c]=this._getRealImaginary(t,this._phase),u=this.context.createPeriodicWave(n,c);this._wave=u,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),pt._periodicWaveCache.push({imag:c,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:n,type:this._type,wave:this._wave}),pt._periodicWaveCache.length>100&&pt._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&this._type!=="custom"&&t!=="custom"?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){qt(t,0);let e=this._type,s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(e=s[1]),this._type!=="custom")t===0?this.type=e:this.type=e+t.toString();else{let n=new Float32Array(t);this._partials.forEach((c,u)=>n[u]=c),this._partials=Array.from(n),this.type=this._type}}_getRealImaginary(t,e){let n=4096/2,c=new Float32Array(n),u=new Float32Array(n),l=1;if(t==="custom"){if(l=this._partials.length+1,this._partialCount=this._partials.length,n=l,this._partials.length===0)return[c,u]}else{let h=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);h?(l=parseInt(h[2],10)+1,this._partialCount=parseInt(h[2],10),t=h[1],l=Math.max(l,2),n=l):this._partialCount=0,this._partials=[]}for(let h=1;h<n;++h){let p=2/(h*Math.PI),f;switch(t){case"sine":f=h<=l?1:0,this._partials[h-1]=f;break;case"square":f=h&1?2*p:0,this._partials[h-1]=f;break;case"sawtooth":f=p*(h&1?1:-1),this._partials[h-1]=f;break;case"triangle":h&1?f=2*(p*p)*(h-1>>1&1?-1:1):f=0,this._partials[h-1]=f;break;case"custom":f=this._partials[h-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}f!==0?(c[h]=-f*Math.sin(e*h),u[h]=f*Math.cos(e*h)):(c[h]=0,u[h]=0)}return[c,u]}_inverseFFT(t,e,s){let n=0,c=t.length;for(let u=0;u<c;u++)n+=t[u]*Math.cos(u*s)+e[u]*Math.sin(u*s);return n}getInitialValue(){let[t,e]=this._getRealImaginary(this._type,0),s=0,n=Math.PI*2,c=32;for(let u=0;u<c;u++)s=Math.max(this._inverseFFT(t,e,u/c*n),s);return oi(-this._inverseFFT(t,e,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(t=1024){return st(this,void 0,void 0,function*(){return ne(this,t)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}};pt._periodicWaveCache=[];r();r();r();var ie=class extends F{constructor(){super(Object.assign(b(ie.getDefaults(),arguments,["context"])))}connect(t,e=0,s=0){return ds(this,t,e,s),this}};r();var ae=class extends ie{constructor(){super(Object.assign(b(ae.getDefaults(),arguments,["mapping","length"])));this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;let t=b(ae.getDefaults(),arguments,["mapping","length"]);Nt(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):_h(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(K.getDefaults(),{length:1024})}setMap(t,e=1024){let s=new Float32Array(e);for(let n=0,c=e;n<c;n++){let u=n/(c-1)*2-1;s[n]=t(u,n)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){let e=["none","2x","4x"].some(s=>s.includes(t));U(e,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}};var so=class extends ie{constructor(){super(...arguments);this.name="AudioToGain",this._norm=new ae({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}};r();var At=class extends K{constructor(){super(Object.assign(b(At.getDefaults(),arguments,["value"])));this.name="Multiply",this.override=!1;let t=b(At.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new X({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(K.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}};var Ir=class extends mt{constructor(){super(b(Ir.getDefaults(),arguments,["frequency","type","modulationType"]));this.name="AMOscillator",this._modulationScale=new so({context:this.context}),this._modulationNode=new X({context:this.context});let t=b(Ir.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new pt({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new pt({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new At({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),V(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(pt.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return st(this,void 0,void 0,function*(){return ne(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}};r();var xr=class extends mt{constructor(){super(b(xr.getDefaults(),arguments,["frequency","type","modulationType"]));this.name="FMOscillator",this._modulationNode=new X({context:this.context,gain:0});let t=b(xr.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new pt({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new K({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new pt({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new At({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new At({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),V(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(pt.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return st(this,void 0,void 0,function*(){return ne(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}};r();var er=class extends mt{constructor(){super(b(er.getDefaults(),arguments,["frequency","width"]));this.name="PulseOscillator",this._widthGate=new X({context:this.context,gain:0}),this._thresh=new ae({context:this.context,mapping:e=>e<=0?-1:1});let t=b(er.getDefaults(),arguments,["frequency","width"]);this.width=new K({context:this.context,units:"audioRange",value:t.width}),this._triangle=new pt({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),V(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(mt.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(t=1024){return st(this,void 0,void 0,function*(){return ne(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}};r();var Pr=class extends mt{constructor(){super(b(Pr.getDefaults(),arguments,["frequency","type","spread"]));this.name="FatOscillator",this._oscillators=[];let t=b(Pr.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new K({context:this.context,units:"frequency",value:t.frequency}),this.detune=new K({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,V(this,["frequency","detune"])}static getDefaults(){return Object.assign(pt.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(e=>e.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(e=>e.stop(t))}_restart(t){this._forEach(e=>e.restart(t))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach(e=>e.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){let e=-t/2,s=t/(this._oscillators.length-1);this._forEach((n,c)=>n.detune.value=e+s*c)}}get count(){return this._oscillators.length}set count(t){if(qt(t,1),this._oscillators.length!==t){this._forEach(e=>e.dispose()),this._oscillators=[];for(let e=0;e<t;e++){let s=new pt({context:this.context,volume:-6-t*1.1,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:e===0?()=>this.onstop(this):tt});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[e]=s}this.spread=this._spread,this.state==="started"&&this._forEach(e=>e.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((e,s)=>e.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(e=>e.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(e=>e.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(e=>e.partialCount=t),this._type=this._oscillators[0].type}asArray(t=1024){return st(this,void 0,void 0,function*(){return ne(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}};r();var qr=class extends mt{constructor(){super(b(qr.getDefaults(),arguments,["frequency","modulationFrequency"]));this.name="PWMOscillator",this.sourceType="pwm",this._scale=new At({context:this.context,value:2});let t=b(qr.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new er({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new pt({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),V(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(mt.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(t=1024){return st(this,void 0,void 0,function*(){return ne(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}};r();var ep={am:Ir,fat:Pr,fm:xr,oscillator:pt,pulse:er,pwm:qr},rr=class extends mt{constructor(){super(b(rr.getDefaults(),arguments,["frequency","type"]));this.name="OmniOscillator";let t=b(rr.getDefaults(),arguments,["frequency","type"]);this.frequency=new K({context:this.context,units:"frequency",value:t.frequency}),this.detune=new K({context:this.context,units:"cents",value:t.detune}),V(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(pt.getDefaults(),xr.getDefaults(),Ir.getDefaults(),Pr.getDefaults(),er.getDefaults(),qr.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(e=>this._sourceType===e)&&(t=this._sourceType),t+this._oscillator.type}set type(t){t.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):t==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):t==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;let e=ep[t],s=this.now();if(this._oscillator){let n=this._oscillator;n.stop(s),this.context.setTimeout(()=>n.dispose(),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(e=this._oscillator.type),t==="fm"?this.type="fm"+e:t==="am"?this.type="am"+e:t==="fat"?this.type="fat"+e:t==="oscillator"?this.type=e:t==="pulse"?this.type="pulse":t==="pwm"&&(this.type="pwm")}_getOscType(t,e){return t instanceof ep[e]}get baseType(){return this._oscillator.baseType}set baseType(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&t!=="pulse"&&t!=="pwm"&&(this._oscillator.baseType=t)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(t){this._getOscType(this._oscillator,"fat")&&Zt(t)&&(this._oscillator.count=t)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(t){this._getOscType(this._oscillator,"fat")&&Zt(t)&&(this._oscillator.spread=t)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Vt(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(t=1024){return st(this,void 0,void 0,function*(){return ne(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}};r();r();r();r();r();r();function $o(o,t=1/0){let e=new WeakMap;return function(s,n){Reflect.defineProperty(s,n,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(c){qt(c,o,t),e.set(this,c)}})}}function ce(o,t=1/0){let e=new WeakMap;return function(s,n){Reflect.defineProperty(s,n,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(c){qt(this.toSeconds(c),o,t),e.set(this,c)}})}}var Vr=class extends mt{constructor(){super(b(Vr.getDefaults(),arguments,["url","onload"]));this.name="Player",this._activeSources=new Set;let t=b(Vr.getDefaults(),arguments,["url","onload"]);this._buffer=new it({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(mt.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:tt,onerror:tt,playbackRate:1,reverse:!1})}load(t){return st(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=tt){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,s){return super.start(t,e,s),this}_start(t,e,s){this._loop?e=he(e,this._loopStart):e=he(e,0);let n=this.toSeconds(e),c=s;s=he(s,Math.max(this._buffer.duration-n,0));let u=this.toSeconds(s);u=u/this._playbackRate,t=this.toSeconds(t);let l=new Fe({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(t+u),this._state.setStateAtTime("stopped",t+u,{implicitEnd:!0})),this._activeSources.add(l),this._loop&&Et(c)?l.start(t,n):l.start(t,n,u-this.toSeconds(this.fadeOut))}_stop(t){let e=this.toSeconds(t);this._activeSources.forEach(s=>s.stop(e))}restart(t,e,s){return super.restart(t,e,s),this}_restart(t,e,s){this._stop(t),this._start(t,e,s)}seek(t,e){let s=this.toSeconds(e);if(this._state.getValueAtTime(s)==="started"){let n=this.toSeconds(t);this._stop(s),this._start(s,n)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&qt(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&qt(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(e=>{e.loop=t}),t)){let e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;let e=this.now(),s=this._state.getNextState("stopped",e);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(n=>n.cancelStop())),this._activeSources.forEach(n=>{n.playbackRate.setValueAtTime(t,e)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}};Ut([ce(0)],Vr.prototype,"fadeIn",void 0);Ut([ce(0)],Vr.prototype,"fadeOut",void 0);r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();var Gt=class extends F{constructor(){super(b(Gt.getDefaults(),arguments,["attack","decay","sustain","release"]));this.name="Envelope",this._sig=new K({context:this.context,value:0}),this.output=this._sig,this.input=void 0;let t=b(Gt.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(F.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(Vt(t))return t;{let s;for(s in Xo)if(Xo[s][e]===t)return s;return t}}_setCurve(t,e,s){if(Vt(s)&&Reflect.has(Xo,s)){let n=Xo[s];Ne(n)?t!=="_decayCurve"&&(this[t]=n[e]):this[t]=n}else if(Nt(s)&&t!=="_decayCurve")this[t]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._decayCurve}set decayCurve(t){U(["linear","exponential"].some(e=>e===t),`Invalid envelope curve: ${t}`),this._decayCurve=t}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let n=this.toSeconds(this.attack),c=this.toSeconds(this.decay),u=this.getValueAtTime(t);if(u>0){let l=1/n;n=(1-u)/l}if(n<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if(this._attackCurve==="linear")this._sig.linearRampTo(e,n,t);else if(this._attackCurve==="exponential")this._sig.targetRampTo(e,n,t);else{this._sig.cancelAndHoldAtTime(t);let l=this._attackCurve;for(let h=1;h<l.length;h++)if(l[h-1]<=u&&u<=l[h]){l=this._attackCurve.slice(h),l[0]=u;break}this._sig.setValueCurveAtTime(l,t,n,e)}if(c&&this.sustain<1){let l=e*this.sustain,h=t+n;this.log("decay",h),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(l,c+h):this._sig.exponentialApproachValueAtTime(l,h,c)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);let e=this.getValueAtTime(t);if(e>0){let s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,t):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,t):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,t):(U(Nt(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,s,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,s=1){return e=this.toSeconds(e),this.triggerAttack(e,s),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,s=0){return ds(this,t,e,s),this}asArray(t=1024){return st(this,void 0,void 0,function*(){let e=t/this.context.sampleRate,s=new Je(1,e,this.context.sampleRate),n=this.toSeconds(this.attack)+this.toSeconds(this.decay),c=n+this.toSeconds(this.release),u=c*.1,l=c+u,h=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/l,decay:e*this.toSeconds(this.decay)/l,release:e*this.toSeconds(this.release)/l,context:s}));return h._sig.toDestination(),h.triggerAttackRelease(e*(n+u)/l,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}};Ut([ce(0)],Gt.prototype,"attack",void 0);Ut([ce(0)],Gt.prototype,"decay",void 0);Ut([$o(0,1)],Gt.prototype,"sustain",void 0);Ut([ce(0)],Gt.prototype,"release",void 0);var Xo=(()=>{let o=128,t,e,s=[];for(t=0;t<o;t++)s[t]=Math.sin(t/(o-1)*(Math.PI/2));let n=[],c=6.4;for(t=0;t<o-1;t++){e=t/(o-1);let d=Math.sin(e*(Math.PI*2)*c-Math.PI/2)+1;n[t]=d/10+e*.83}n[o-1]=1;let u=[],l=5;for(t=0;t<o;t++)u[t]=Math.ceil(t/(o-1)*l)/l;let h=[];for(t=0;t<o;t++)e=t/(o-1),h[t]=.5*(1-Math.cos(Math.PI*e));let p=[];for(t=0;t<o;t++){e=t/(o-1);let d=Math.pow(e,3)*4+.2,_=Math.cos(d*Math.PI*2*e);p[t]=Math.abs(_*(1-e))}function f(d){let _=new Array(d.length);for(let g=0;g<d.length;g++)_[g]=1-d[g];return _}function m(d){return d.slice(0).reverse()}return{bounce:{In:f(p),Out:p},cosine:{In:s,Out:m(s)},exponential:"exponential",linear:"linear",ripple:{In:n,Out:f(n)},sine:{In:h,Out:f(h)},step:{In:u,Out:f(u)}}})();r();r();var pe=class extends F{constructor(){super(b(pe.getDefaults(),arguments));this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;let t=b(pe.getDefaults(),arguments);this._volume=this.output=new oe({context:this.context,volume:t.volume}),this.volume=this._volume.volume,V(this,"volume")}static getDefaults(){return Object.assign(F.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){let s=this["_original_"+t]=this[t];this[t]=(...n)=>{let c=n[e],u=this.context.transport.schedule(l=>{n[e]=l,s.apply(this,n)},c);this._scheduledEvents.push(u)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(t,e,s,n){let c=this.toSeconds(s),u=this.toSeconds(e);return this.triggerAttack(t,c,n),this.triggerRelease(c+u),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}};var ue=class extends pe{constructor(){super(b(ue.getDefaults(),arguments));let t=b(ue.getDefaults(),arguments);this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(pe.getDefaults(),{detune:0,onsilence:tt,portamento:0})}triggerAttack(t,e,s=1){this.log("triggerAttack",t,e,s);let n=this.toSeconds(e);return this._triggerEnvelopeAttack(n,s),this.setNote(t,n),this}triggerRelease(t){this.log("triggerRelease",t);let e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){let s=this.toSeconds(e),n=t instanceof Bt?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(s)>.05){let c=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(n,c,s)}else this.frequency.setValueAtTime(n,s);return this}};Ut([ce(0)],ue.prototype,"portamento",void 0);r();r();var Lr=class extends Gt{constructor(){super(b(Lr.getDefaults(),arguments,["attack","decay","sustain","release"]));this.name="AmplitudeEnvelope",this._gainNode=new X({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}};var sr=class extends ue{constructor(){super(b(sr.getDefaults(),arguments));this.name="Synth";let t=b(sr.getDefaults(),arguments);this.oscillator=new rr(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Lr(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),V(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(ue.getDefaults(),{envelope:Object.assign(Ye(Gt.getDefaults(),Object.keys(F.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Ye(rr.getDefaults(),[...Object.keys(mt.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),this.envelope.sustain===0){let s=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+s+n)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}};r();r();r();r();r();r();r();r();var ws=class extends sr{constructor(){super(b(ws.getDefaults(),arguments));this.name="MembraneSynth",this.portamento=0;let t=b(ws.getDefaults(),arguments);this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,V(this,["oscillator","envelope"])}static getDefaults(){return De(ue.getDefaults(),sr.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){let s=this.toSeconds(e),n=this.toFrequency(t instanceof Bt?t.toFrequency():t),c=n*this.octaves;return this.oscillator.frequency.setValueAtTime(c,s),this.oscillator.frequency.exponentialRampToValueAtTime(n,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}};Ut([$o(0)],ws.prototype,"octaves",void 0);Ut([ce(0)],ws.prototype,"pitchDecay",void 0);r();r();r();r();r();r();var sp=new Set;function bs(o){sp.add(o)}function Zo(o,t){let e=`registerProcessor("${o}", ${t})`;sp.add(e)}r();r();r();var Yd=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;bs(Yd);var $d=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;bs($d);r();var Xd=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;bs(Xd);var op="feedback-comb-filter",Qd=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;Zo(op,Qd);r();r();r();var yr=class extends pe{constructor(){super(b(yr.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"));this.name="Sampler",this._activeSources=new Map;let t=b(yr.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),e={};Object.keys(t.urls).forEach(s=>{let n=parseInt(s,10);if(U(Qs(s)||Zt(n)&&isFinite(n),`url key is neither a note or midi pitch: ${s}`),Qs(s)){let c=new Bt(this.context,s).toMidi();e[c]=t.urls[s]}else Zt(n)&&isFinite(n)&&(e[n]=t.urls[n])}),this._buffers=new Mr({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(pe.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:tt,onerror:tt,release:.1,urls:{}})}_findClosest(t){let e=96,s=0;for(;s<e;){if(this._buffers.has(t+s))return-s;if(this._buffers.has(t-s))return s;s++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,s=1){return this.log("triggerAttack",t,e,s),Array.isArray(t)||(t=[t]),t.forEach(n=>{let c=ai(new Bt(this.context,n).toFrequency()),u=Math.round(c),l=c-u,h=this._findClosest(u),p=u-h,f=this._buffers.get(p),m=Dr(h+l),d=new Fe({url:f,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:m}).connect(this.output);d.start(e,0,f.duration/m,s),Nt(this._activeSources.get(u))||this._activeSources.set(u,[]),this._activeSources.get(u).push(d),d.onended=()=>{if(this._activeSources&&this._activeSources.has(u)){let _=this._activeSources.get(u),g=_.indexOf(d);g!==-1&&_.splice(g,1)}}}),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(s=>{let n=new Bt(this.context,s).toMidi();if(this._activeSources.has(n)&&this._activeSources.get(n).length){let c=this._activeSources.get(n);e=this.toSeconds(e),c.forEach(u=>{u.stop(e)}),this._activeSources.set(n,[])}}),this}releaseAll(t){let e=this.toSeconds(t);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(e)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,s,n=1){let c=this.toSeconds(s);return this.triggerAttack(t,c,n),Nt(e)?(U(Nt(t),"notes must be an array when duration is array"),t.forEach((u,l)=>{let h=e[Math.min(l,e.length-1)];this.triggerRelease(u,c+this.toSeconds(h))})):this.triggerRelease(t,c+this.toSeconds(e)),this}add(t,e,s){if(U(Qs(t)||isFinite(t),`note must be a pitch or midi: ${t}`),Qs(t)){let n=new Bt(this.context,t).toMidi();this._buffers.add(n,e,s)}else this._buffers.add(t,e,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(e=>e.dispose())}),this._activeSources.clear(),this}};Ut([ce(0)],yr.prototype,"attack",void 0);Ut([ce(0)],yr.prototype,"release",void 0);r();r();r();r();r();r();r();r();r();r();r();r();r();r();var Br=class extends F{constructor(){super(Object.assign(b(Br.getDefaults(),arguments,["pan"])));this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;let t=b(Br.getDefaults(),arguments,["pan"]);this.pan=new rt({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",V(this,"pan")}static getDefaults(){return Object.assign(F.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}};r();r();r();r();var ap="bit-crusher",s_=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;Zo(ap,s_);r();r();r();r();r();r();r();r();r();r();r();r();var QY=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100];r();var o$=[1687/25e3,1601/25e3,2053/25e3,2251/25e3];r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();r();var wt=class extends F{constructor(){super(b(wt.getDefaults(),arguments,["solo"]));this.name="Solo";let t=b(wt.getDefaults(),arguments,["solo"]);this.input=this.output=new X({context:this.context}),wt._allSolos.has(this.context)||wt._allSolos.set(this.context,new Set),wt._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(F.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),wt._allSolos.get(this.context).forEach(e=>e._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){wt._soloed.has(this.context)||wt._soloed.set(this.context,new Set),wt._soloed.get(this.context).add(this)}_removeSolo(){wt._soloed.has(this.context)&&wt._soloed.get(this.context).delete(this)}_isSoloed(){return wt._soloed.has(this.context)&&wt._soloed.get(this.context).has(this)}_noSolos(){return!wt._soloed.has(this.context)||wt._soloed.has(this.context)&&wt._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),wt._allSolos.get(this.context).delete(this),this._removeSolo(),this}};wt._allSolos=new Map;wt._soloed=new Map;r();var Ts=class extends F{constructor(){super(b(Ts.getDefaults(),arguments,["pan","volume"]));this.name="PanVol";let t=b(Ts.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Br({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new oe({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,V(this,["pan","volume"])}static getDefaults(){return Object.assign(F.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}};var vr=class extends F{constructor(){super(b(vr.getDefaults(),arguments,["volume","pan"]));this.name="Channel";let t=b(vr.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new wt({solo:t.solo,context:this.context}),this._panVol=this.output=new Ts({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),V(this,["pan","volume"])}static getDefaults(){return Object.assign(F.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return vr.buses.has(t)||vr.buses.set(t,new X({context:this.context})),vr.buses.get(t)}send(t,e=0){let s=this._getBus(t),n=new X({context:this.context,units:"decibels",gain:e});return this.connect(n),n.connect(s),n}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}};vr.buses=new Map;r();r();r();r();var cp=class extends F{constructor(){super(...arguments);this.name="Listener",this.positionX=new rt({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new rt({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new rt({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new rt({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new rt({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new rt({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new rt({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new rt({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new rt({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(F.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}};mr(o=>{o.listener=new cp({context:o})});dr(o=>{o.listener.dispose()});r();r();r();r();r();r();r();r();var QZ=Ot().transport;var ZZ=Ot().destination,KZ=Ot().destination;var JZ=Ot().listener;var t7=Ot().draw;var e7=Ot();function lp(){return it.loaded()}r();var hp=o=>i("div",{className:"btn-play squiggly",...o}),pp=o=>i("div",{className:"btn-record squiggly",...o});r();Ve();r();r();var en,mi=class{constructor(t,e=void 0){switch(t=t.trim(),this.tone=t.charAt(0).toUpperCase()){case"C":this.id=0;break;case"D":this.id=2;break;case"E":this.id=4;break;case"F":this.id=5;break;case"G":this.id=7;break;case"A":this.id=9;break;case"B":this.id=11;break;default:throw new`Excepted tone ([A-G]|[a-g])! Got ${this.tone}.`}switch(t=t.substring(1),t.charAt(0)){case"\u266E":this.semitone="";break;case"#":case"\u266F":this.id=(this.id+1)%12,t=t.substring(1),this.semitone="#";break;case"b":case"\u266D":this.id=((this.id-1)%12+12)%12,t=t.substring(1),this.semitone="b";break;default:this.semitone="";break}if(this.octave=parseInt(t),!(this.octave>=0&&this.octave<=10)){if(t.length>0)throw new`Expected octave number 0-10! Got ${t}.`;this.octave=e||4}if(e&&this.octave!==e)throw new`Two octaves were provided! ${this.octave} and ${e}.`;if(this.id+=this.octave*12,this.id<0||this.id>127)throw new`ID for ${this} is out of MIDI range(0-127)!`}get isBlack(){return Ri(mi,en)[this.id%12]}get isWhite(){return!this.isBlack}get color(){return this.isBlack?"black":"white"}toString(){return`${this.tone}${this.semitone}${this.octave}`}hashCode(){return this.id}},It=mi;en=new WeakMap,Mi(It,en,[!1,!0,!1,!0,!1,!1,!0,!1,!0,!1,!0,!1]);var oo=class{constructor(t){this.pcm=t}static async load(t){if(!t)return;t instanceof Promise&&(t=(await t).default);let s=await(await fetch(t)).arrayBuffer(),n=await new Promise((c,u)=>{oo.ctx.decodeAudioData(s,c,u)});return new oo(n)}play(t=0){let e=this.audioContext.createBufferSource();e.buffer=this.pcm,e.detune.value=t,e.connect(this.audioContext.destination),e.start(0)}get audioContext(){return oo.ctx}get buffer(){return this.pcm}},fp=oo;Ei(fp,"ctx",new(window.AudioContext||window.webkitAudioContext));var h_=o=>[new It("C",o),new It("Db",o),new It("D",o),new It("Eb",o),new It("E",o),new It("F",o),new It("Gb",o),new It("G",o),new It("Ab",o),new It("A",o),new It("Bb",o),new It("B",o)],p_=({note:o,sampler:t,onPress:e=null,onRelease:s=null})=>i("div",{className:`kb-key-${o.color} kb-key-${o.tone} squiggly`,onMouseDown:()=>{t?.triggerAttack(o.toString()),e(o)},onMouseUp:()=>{t?.triggerRelease(o.toString()),s(o)}}),f_=({octave:o,sampler:t,onPress:e=null,onRelease:s=null})=>i("div",{className:"kb-octave"},h_(o).map(n=>i(p_,{note:n,sampler:t,onPress:e,onRelease:s}))),m_=({sampler:o,onPress:t=null,onRelease:e=null},{})=>i("div",{className:"kb-container"},[4,5].map(s=>i(f_,{octave:s,sampler:o,onPress:t,onRelease:e}))),mp=m_;r();Ve();r();Ve();var Yt=class extends de{static get maxLength(){return 30}constructor({data:t=[]}){super();this.state={data:t},this.down=new Map}render=({id:t},{data:e})=>i("div",{className:"track-container squiggly",id:`track-${t}`},e.map(s=>i("div",{className:"track-note",style:`top: ${(1-s.key.id/127)*100}%;left: ${s.start/Yt.maxLength*100}%;width: ${s.duration/Yt.maxLength*100}%;`})));press(t,e){this.down.set(t.id,e)}release(t,e){!this.down.has(t.id)||(this.setState(({data:s})=>({data:[...s,new Yt.Note(t,this.down.get(t.id),e)]})),this.down.delete(t.id))}};Yt.Note=class{constructor(o,t,e){if(typeof o=="string"&&(o=new It(o)),this.key=o,this.start=t,this.end=e,t>e)throw new`Track.Note assertion not met: ${t} < ${e}`}get duration(){return this.end-this.start}};var rn=class extends de{constructor(){super();this.state={time:0,start:void 0,playing:!1},this.drag=!1}get isPlaying(){return this.state.playing}set isPlaying(t){clearTimeout(this.done),t&&(this.done=setTimeout(()=>this.isPlaying=!1,(Yt.maxLength-this.time)*1e3)),this.setState({time:this.time,start:t?Date.now():void 0,playing:t})}get time(){return this.isPlaying?this.state.time+(Date.now()-this.state.start)/1e3:this.state.time}render=({},{})=>i("div",{className:"ph-body",style:this.calcAnim()},i("div",{className:"ph-head",onMouseMove:t=>this.handleDrag(t),onMouseDown:t=>this.drag=!0,onMouseUp:t=>this.drag=!1,onMouseLeave:t=>this.drag=!1}));calcAnim(){return this.isPlaying?(console.log("anim PLAY "+this.time),`
            transition: none;
            /* Percentage in parent div where slide animation will start */
            --start-pos: ${this.time/Yt.maxLength*100}%;
            /* How long it will take to slide */
            animation: ph-slide ${Yt.maxLength-this.time}s linear forwards;`):(console.log("anim PAUSE "+this.time),`
                transition: none;
                /* Percentage in parent div where playhead remains static */
                left: ${this.time/Yt.maxLength*100}%;
                /* Stop animation */
                animation: none;
            `)}handleDrag(t){if(!this.drag)return;t.preventDefault(),this.isPlaying=!1;let e=this.base.parentElement.getBoundingClientRect(),s=(t.pageX-e.left)/e.width;this.base.style.left=`${s*100}%`,this.setState(n=>({...n,time:s*Yt.maxLength}))}};r();r();r();var _p=Pt(di(),1);function gp(o,t="",e){let s=o;e=e||typeof location!="undefined"&&location,o==null&&(o=e.protocol+"//"+e.host),typeof o=="string"&&(o.charAt(0)==="/"&&(o.charAt(1)==="/"?o=e.protocol+o:o=e.host+o),/^(https?|wss?):\/\//.test(o)||(typeof e!="undefined"?o=e.protocol+"//"+o:o="https://"+o),s=(0,_p.default)(o)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";let c=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+c+":"+s.port+t,s.href=s.protocol+"://"+c+(e&&e.port===s.port?"":":"+s.port),s}r();r();r();r();r();r();var yp=Pt(xp(),1);r();var ve=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")())();function gi(o){let t=o.xdomain;try{if(typeof XMLHttpRequest!="undefined"&&(!t||yp.default))return new XMLHttpRequest}catch{}if(!t)try{return new ve[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}r();function sn(o,...t){return t.reduce((e,s)=>(o.hasOwnProperty(s)&&(e[s]=o[s]),e),{})}var y_=setTimeout,v_=clearTimeout;function nr(o,t){t.useNativeTimers?(o.setTimeoutFn=y_.bind(ve),o.clearTimeoutFn=v_.bind(ve)):(o.setTimeoutFn=setTimeout.bind(ve),o.clearTimeoutFn=clearTimeout.bind(ve))}var qp=Pt(Wr(),1);r();r();r();r();r();var Ie=Object.create(null);Ie.open="0";Ie.close="1";Ie.ping="2";Ie.pong="3";Ie.message="4";Ie.upgrade="5";Ie.noop="6";var no=Object.create(null);Object.keys(Ie).forEach(o=>{no[Ie[o]]=o});var wp={type:"error",data:"parser error"};var b_=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",T_=typeof ArrayBuffer=="function",A_=o=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(o):o&&o.buffer instanceof ArrayBuffer,S_=({type:o,data:t},e,s)=>b_&&t instanceof Blob?e?s(t):bp(t,s):T_&&(t instanceof ArrayBuffer||A_(t))?e?s(t):bp(new Blob([t]),s):s(Ie[o]+(t||"")),bp=(o,t)=>{let e=new FileReader;return e.onload=function(){let s=e.result.split(",")[1];t("b"+s)},e.readAsDataURL(o)},on=S_;r();r();var Tp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",io=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(ao=0;ao<Tp.length;ao++)io[Tp.charCodeAt(ao)]=ao;var ao;var Ap=function(o){var t=o.length*.75,e=o.length,s,n=0,c,u,l,h;o[o.length-1]==="="&&(t--,o[o.length-2]==="="&&t--);var p=new ArrayBuffer(t),f=new Uint8Array(p);for(s=0;s<e;s+=4)c=io[o.charCodeAt(s)],u=io[o.charCodeAt(s+1)],l=io[o.charCodeAt(s+2)],h=io[o.charCodeAt(s+3)],f[n++]=c<<2|u>>4,f[n++]=(u&15)<<4|l>>2,f[n++]=(l&3)<<6|h&63;return p};var C_=typeof ArrayBuffer=="function",k_=(o,t)=>{if(typeof o!="string")return{type:"message",data:Sp(o,t)};let e=o.charAt(0);return e==="b"?{type:"message",data:N_(o.substring(1),t)}:no[e]?o.length>1?{type:no[e],data:o.substring(1)}:{type:no[e]}:wp},N_=(o,t)=>{if(C_){let e=Ap(o);return Sp(e,t)}else return{base64:!0,data:o}},Sp=(o,t)=>{switch(t){case"blob":return o instanceof ArrayBuffer?new Blob([o]):o;case"arraybuffer":default:return o}},nn=k_;var Cp=String.fromCharCode(30),kp=(o,t)=>{let e=o.length,s=new Array(e),n=0;o.forEach((c,u)=>{on(c,!1,l=>{s[u]=l,++n===e&&t(s.join(Cp))})})},Np=(o,t)=>{let e=o.split(Cp),s=[];for(let n=0;n<e.length;n++){let c=nn(e[n],t);if(s.push(c),c.type==="error")break}return s},xi=4;var Op=Pt(Wr(),1);var As=class extends Op.Emitter{constructor(t){super();this.writable=!1,nr(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e){let s=new Error(t);return s.type="TransportError",s.description=e,super.emit("error",s),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emit("open")}onData(t){let e=nn(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emit("packet",t)}onClose(){this.readyState="closed",super.emit("close")}};var Ip=Pt(wi(),1),Pp=Pt(cn(),1);var Ti=class extends As{constructor(){super(...arguments);this.polling=!1}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";let e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let s=0;this.polling&&(s++,this.once("pollComplete",function(){--s||e()})),this.writable||(s++,this.once("drain",function(){--s||e()}))}else e()}poll(){this.polling=!0,this.doPoll(),this.emit("poll")}onData(t){let e=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose(),!1;this.onPacket(s)};Np(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){let t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,kp(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emit("drain")})})}uri(){let t=this.query||{},e=this.opts.secure?"https":"http",s="";this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=(0,Ip.default)()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.opts.port&&(e==="https"&&Number(this.opts.port)!==443||e==="http"&&Number(this.opts.port)!==80)&&(s=":"+this.opts.port);let n=Pp.default.encode(t),c=this.opts.hostname.indexOf(":")!==-1;return e+"://"+(c?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(n.length?"?"+n:"")}};function D_(){}var E_=function(){return new gi({xdomain:!1}).responseType!=null}(),Ai=class extends Ti{constructor(t){super(t);if(typeof location!="undefined"){let s=location.protocol==="https:",n=location.port;n||(n=s?"443":"80"),this.xd=typeof location!="undefined"&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==s}let e=t&&t.forceBase64;this.supportsBinary=E_&&!e}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new Pe(this.uri(),t)}doWrite(t,e){let s=this.request({method:"POST",data:t});s.on("success",e),s.on("error",n=>{this.onError("xhr post error",n)})}doPoll(){let t=this.request();t.on("data",this.onData.bind(this)),t.on("error",e=>{this.onError("xhr poll error",e)}),this.pollXhr=t}},Pe=class extends qp.Emitter{constructor(t,e){super();nr(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=e.async!==!1,this.data=e.data!==void 0?e.data:null,this.create()}create(){let t=sn(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;let e=this.xhr=new gi(t);try{e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let s in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(s)&&e.setRequestHeader(s,this.opts.extraHeaders[s])}}catch{}if(this.method==="POST")try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{e.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),e.onreadystatechange=()=>{e.readyState===4&&(e.status===200||e.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof e.status=="number"?e.status:0)},0))},e.send(this.data)}catch(s){this.setTimeoutFn(()=>{this.onError(s)},0);return}typeof document!="undefined"&&(this.index=Pe.requestsCount++,Pe.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(t){this.emit("data",t),this.onSuccess()}onError(t){this.emit("error",t),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.xhr.onreadystatechange=D_,t)try{this.xhr.abort()}catch{}typeof document!="undefined"&&delete Pe.requests[this.index],this.xhr=null}}onLoad(){let t=this.xhr.responseText;t!==null&&this.onData(t)}abort(){this.cleanup()}};Pe.requestsCount=0;Pe.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",Vp);else if(typeof addEventListener=="function"){let o="onpagehide"in ve?"pagehide":"unload";addEventListener(o,Vp,!1)}}function Vp(){for(let o in Pe.requests)Pe.requests.hasOwnProperty(o)&&Pe.requests[o].abort()}r();var Wp=Pt(cn(),1),jp=Pt(wi(),1);r();var Lp=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0))(),Ss=ve.WebSocket||ve.MozWebSocket,un=!0,Bp="arraybuffer";var Gp=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",co=class extends As{constructor(t){super(t);this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;let t=this.uri(),e=this.opts.protocols,s=Gp?{}:sn(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=un&&!Gp?e?new Ss(t,e):new Ss(t):new Ss(t,e,s)}catch(n){return this.emit("error",n)}this.ws.binaryType=this.socket.binaryType||Bp,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){let s=t[e],n=e===t.length-1;on(s,this.supportsBinary,c=>{let u={};un||(s.options&&(u.compress=s.options.compress),this.opts.perMessageDeflate&&(typeof c=="string"?Buffer.byteLength(c):c.length)<this.opts.perMessageDeflate.threshold&&(u.compress=!1));try{un?this.ws.send(c):this.ws.send(c,u)}catch{}n&&Lp(()=>{this.writable=!0,this.emit("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{},e=this.opts.secure?"wss":"ws",s="";this.opts.port&&(e==="wss"&&Number(this.opts.port)!==443||e==="ws"&&Number(this.opts.port)!==80)&&(s=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=(0,jp.default)()),this.supportsBinary||(t.b64=1);let n=Wp.default.encode(t),c=this.opts.hostname.indexOf(":")!==-1;return e+"://"+(c?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(n.length?"?"+n:"")}check(){return!!Ss&&!("__initialize"in Ss&&this.name===co.prototype.name)}};var Si={websocket:co,polling:Ai};var zp=Pt(cn(),1),Ci=Pt(di(),1),Up=Pt(Wr(),1);var we=class extends Up.Emitter{constructor(t,e={}){super();t&&typeof t=="object"&&(e=t,t=null),t?(t=(0,Ci.default)(t),e.hostname=t.host,e.secure=t.protocol==="https"||t.protocol==="wss",e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=(0,Ci.default)(e.host).host),nr(this,e),this.secure=e.secure!=null?e.secure:typeof location!="undefined"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=e.port||(typeof location!="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=zp.default.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){let e=R_(this.opts.query);e.EIO=xi,e.transport=t,this.id&&(e.sid=this.id);let s=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Si[t](s)}open(){let t;if(this.opts.rememberUpgrade&&we.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",()=>{this.onClose("transport close")})}probe(t){let e=this.createTransport(t),s=!1;we.priorWebsocketSuccess=!1;let n=()=>{s||(e.send([{type:"ping",data:"probe"}]),e.once("packet",m=>{if(!s)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;we.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(f(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{let d=new Error("probe error");d.transport=e.name,this.emitReserved("upgradeError",d)}}))};function c(){s||(s=!0,f(),e.close(),e=null)}let u=m=>{let d=new Error("probe error: "+m);d.transport=e.name,c(),this.emitReserved("upgradeError",d)};function l(){u("transport closed")}function h(){u("socket closed")}function p(m){e&&m.name!==e.name&&c()}let f=()=>{e.removeListener("open",n),e.removeListener("error",u),e.removeListener("close",l),this.off("close",h),this.off("upgrading",p)};e.once("open",n),e.once("error",u),e.once("close",l),this.once("close",h),this.once("upgrading",p),e.open()}onOpen(){if(this.readyState="open",we.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){let t=0,e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":let e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}write(t,e,s){return this.sendPacket("message",t,e,s),this}send(t,e,s){return this.sendPacket("message",t,e,s),this}sendPacket(t,e,s,n){if(typeof e=="function"&&(n=e,e=void 0),typeof s=="function"&&(n=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;let c={type:t,data:e,options:s};this.emitReserved("packetCreate",c),this.writeBuffer.push(c),n&&this.once("flush",n),this.flush()}close(){let t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},s=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}onError(t){we.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){let e=[],s=0,n=t.length;for(;s<n;s++)~this.transports.indexOf(t[s])&&e.push(t[s]);return e}};we.protocol=xi;function R_(o){let t={};for(let e in o)o.hasOwnProperty(e)&&(t[e]=o[e]);return t}var DK=we.protocol;r();var Oi={};yf(Oi,{Decoder:()=>ln,Encoder:()=>Zp,PacketType:()=>at,protocol:()=>Qp});r();var Xp=Pt(Wr(),1);r();r();var M_=typeof ArrayBuffer=="function",F_=o=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(o):o.buffer instanceof ArrayBuffer,Hp=Object.prototype.toString,I_=typeof Blob=="function"||typeof Blob!="undefined"&&Hp.call(Blob)==="[object BlobConstructor]",P_=typeof File=="function"||typeof File!="undefined"&&Hp.call(File)==="[object FileConstructor]";function uo(o){return M_&&(o instanceof ArrayBuffer||F_(o))||I_&&o instanceof Blob||P_&&o instanceof File}function lo(o,t){if(!o||typeof o!="object")return!1;if(Array.isArray(o)){for(let e=0,s=o.length;e<s;e++)if(lo(o[e]))return!0;return!1}if(uo(o))return!0;if(o.toJSON&&typeof o.toJSON=="function"&&arguments.length===1)return lo(o.toJSON(),!0);for(let e in o)if(Object.prototype.hasOwnProperty.call(o,e)&&lo(o[e]))return!0;return!1}function Yp(o){let t=[],e=o.data,s=o;return s.data=ki(e,t),s.attachments=t.length,{packet:s,buffers:t}}function ki(o,t){if(!o)return o;if(uo(o)){let e={_placeholder:!0,num:t.length};return t.push(o),e}else if(Array.isArray(o)){let e=new Array(o.length);for(let s=0;s<o.length;s++)e[s]=ki(o[s],t);return e}else if(typeof o=="object"&&!(o instanceof Date)){let e={};for(let s in o)o.hasOwnProperty(s)&&(e[s]=ki(o[s],t));return e}return o}function $p(o,t){return o.data=Ni(o.data,t),o.attachments=void 0,o}function Ni(o,t){if(!o)return o;if(o&&o._placeholder)return t[o.num];if(Array.isArray(o))for(let e=0;e<o.length;e++)o[e]=Ni(o[e],t);else if(typeof o=="object")for(let e in o)o.hasOwnProperty(e)&&(o[e]=Ni(o[e],t));return o}var Qp=5,at;(function(o){o[o.CONNECT=0]="CONNECT",o[o.DISCONNECT=1]="DISCONNECT",o[o.EVENT=2]="EVENT",o[o.ACK=3]="ACK",o[o.CONNECT_ERROR=4]="CONNECT_ERROR",o[o.BINARY_EVENT=5]="BINARY_EVENT",o[o.BINARY_ACK=6]="BINARY_ACK"})(at||(at={}));var Zp=class{encode(t){return(t.type===at.EVENT||t.type===at.ACK)&&lo(t)?(t.type=t.type===at.EVENT?at.BINARY_EVENT:at.BINARY_ACK,this.encodeAsBinary(t)):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===at.BINARY_EVENT||t.type===at.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data)),e}encodeAsBinary(t){let e=Yp(t),s=this.encodeAsString(e.packet),n=e.buffers;return n.unshift(s),n}},ln=class extends Xp.Emitter{constructor(){super()}add(t){let e;if(typeof t=="string")e=this.decodeString(t),e.type===at.BINARY_EVENT||e.type===at.BINARY_ACK?(this.reconstructor=new Kp(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e);else if(uo(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0,s={type:Number(t.charAt(0))};if(at[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===at.BINARY_EVENT||s.type===at.BINARY_ACK){let c=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);let u=t.substring(c,e);if(u!=Number(u)||t.charAt(e)!=="-")throw new Error("Illegal attachments");s.attachments=Number(u)}if(t.charAt(e+1)==="/"){let c=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););s.nsp=t.substring(c,e)}else s.nsp="/";let n=t.charAt(e+1);if(n!==""&&Number(n)==n){let c=e+1;for(;++e;){let u=t.charAt(e);if(u==null||Number(u)!=u){--e;break}if(e===t.length)break}s.id=Number(t.substring(c,e+1))}if(t.charAt(++e)){let c=q_(t.substr(e));if(ln.isPayloadValid(s.type,c))s.data=c;else throw new Error("invalid payload")}return s}static isPayloadValid(t,e){switch(t){case at.CONNECT:return typeof e=="object";case at.DISCONNECT:return e===void 0;case at.CONNECT_ERROR:return typeof e=="string"||typeof e=="object";case at.EVENT:case at.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case at.ACK:case at.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}};function q_(o){try{return JSON.parse(o)}catch{return!1}}var Kp=class{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){let e=$p(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};r();function fe(o,t,e){return o.on(t,e),function(){o.off(t,e)}}var Jp=Pt(Wr(),1),V_=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),ho=class extends Jp.Emitter{constructor(t,e,s){super();this.connected=!1,this.disconnected=!0,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,s&&s.auth&&(this.auth=s.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;let t=this.io;this.subs=[fe(t,"open",this.onopen.bind(this)),fe(t,"packet",this.onpacket.bind(this)),fe(t,"error",this.onerror.bind(this)),fe(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(V_.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');e.unshift(t);let s={type:at.EVENT,data:e};if(s.options={},s.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){let u=this.ids++,l=e.pop();this._registerAckCallback(u,l),s.id=u}let n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)||(this.connected?this.packet(s):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(t,e){let s=this.flags.timeout;if(s===void 0){this.acks[t]=e;return}let n=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===t&&this.sendBuffer.splice(c,1);e.call(this,new Error("operation has timed out"))},s);this.acks[t]=(...c)=>{this.io.clearTimeoutFn(n),e.apply(this,[null,...c])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this.packet({type:at.CONNECT,data:t})}):this.packet({type:at.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t){this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",t)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case at.CONNECT:if(t.data&&t.data.sid){let n=t.data.sid;this.onconnect(n)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case at.EVENT:this.onevent(t);break;case at.BINARY_EVENT:this.onevent(t);break;case at.ACK:this.onack(t);break;case at.BINARY_ACK:this.onack(t);break;case at.DISCONNECT:this.ondisconnect();break;case at.CONNECT_ERROR:this.destroy();let s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){let e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){let e=this._anyListeners.slice();for(let s of e)s.apply(this,t)}super.emit.apply(this,t)}ack(t){let e=this,s=!1;return function(...n){s||(s=!0,e.packet({type:at.ACK,id:t,data:n}))}}onack(t){let e=this.acks[t.id];typeof e=="function"&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t){this.id=t,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>this.packet(t)),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:at.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){let e=this._anyListeners;for(let s=0;s<e.length;s++)if(t===e[s])return e.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}};var rf=Pt(ef(),1),sf=Pt(Wr(),1),po=class extends sf.Emitter{constructor(t,e){var s;super();this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,nr(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((s=e.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new rf.default({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;let n=e.parser||Oi;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new we(this.uri,this.opts);let e=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;let n=fe(e,"open",function(){s.onopen(),t&&t()}),c=fe(e,"error",u=>{s.cleanup(),s._readyState="closed",this.emitReserved("error",u),t?t(u):s.maybeReconnectOnOpen()});if(this._timeout!==!1){let u=this._timeout;u===0&&n();let l=this.setTimeoutFn(()=>{n(),e.close(),e.emit("error",new Error("timeout"))},u);this.opts.autoUnref&&l.unref(),this.subs.push(function(){clearTimeout(l)})}return this.subs.push(n),this.subs.push(c),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let t=this.engine;this.subs.push(fe(t,"ping",this.onping.bind(this)),fe(t,"data",this.ondata.bind(this)),fe(t,"error",this.onerror.bind(this)),fe(t,"close",this.onclose.bind(this)),fe(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved("packet",t)}onerror(t){this.emitReserved("error",t)}socket(t,e){let s=this.nsps[t];return s||(s=new ho(this,t,e),this.nsps[t]=s),s}_destroy(t){let e=Object.keys(this.nsps);for(let s of e)if(this.nsps[s].active)return;this._close()}_packet(t){let e=this.encoder.encode(t);for(let s=0;s<e.length;s++)this.engine.write(e[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let e=this.backoff.duration();this._reconnecting=!0;let s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):t.onreconnect()}))},e);this.opts.autoUnref&&s.unref(),this.subs.push(function(){clearTimeout(s)})}}onreconnect(){let t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}};var fo={};function mo(o,t){typeof o=="object"&&(t=o,o=void 0),t=t||{};let e=gp(o,t.path||"/socket.io"),s=e.source,n=e.id,c=e.path,u=fo[n]&&c in fo[n].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||u,h;return l?h=new po(s,t):(fo[n]||(fo[n]=new po(s,t)),h=fo[n]),e.query&&!t.query&&(t.query=e.queryKey),h.socket(e.path,t)}Object.assign(mo,{Manager:po,Socket:ho,io:mo,connect:mo});Ve();var hn=Rs(),br=mo();br.onAny(o=>console.log(o));br.on("create-game-res",o=>{alert(`Your game ID is: ${o}`)});br.on("start-round",o=>{Tn("/editor"),setTimeout(()=>{console.log(hn.current),hn.current?.setState(t=>({...t,tracks:o}))},1e3)});br.on("error",o=>{alert(o)});var of=()=>{br.emit("create-game")},nf=o=>{console.log(o),br.emit("join-game",o)},af=()=>{br.emit("start-game")},cf=o=>{br.emit("submit-track",o)};var pn=class extends de{#t=Rs();#e=Rs();constructor(){super();this.state={recording:!1,tracks:[],samplers:void 0}}component;async componentDidMount(){let t=new yr({urls:{C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3"},release:1,baseUrl:"https://tonejs.github.io/audio/salamander/"}).toDestination();await lp(),this.setState(e=>({...e,samplers:{piano:t}}))}render=({},{recording:t,samplers:e,tracks:s})=>i("div",{className:"editor-container"},i("div",{className:"editor-header"},i(hp,{onClick:()=>this.togglePlaying()}),i(pp,{onClick:()=>this.toggleRecording()}),"\xA0\xA0",i("button",{onClick:()=>cf(this.#e.current.state.data)},"Done")),i("div",{className:"editor-tracks"},i(rn,{ref:this.#t}),i(Yt,{id:0,data:[],ref:this.#e}),s.map((n,c)=>i(Yt,{id:c+1,data:n}))),i("div",{className:"editor-instrument"},i(mp,{sampler:e?.piano,onPress:n=>this.onInstrumentPress(n),onRelease:n=>this.onInstrumentRelease(n)})));get time(){return this.#t.current.time}get isPlaying(){return this.#t.current.isPlaying}set isPlaying(t){this.#t.current.isPlaying=t}togglePlaying(){this.isPlaying=!this.isPlaying,this.state.recording&&this.toggleRecording()}toggleRecording(){this.isPlaying=!this.state.recording,this.setState({recording:!this.state.recording})}onInstrumentPress(t){!this.state.recording||this.#e.current?.press(t,this.time)}onInstrumentRelease(t){!this.state.recording||this.#e.current?.release(t,this.time)}};r();var L_=()=>i(a,null,i("h1",null,"Jammin'"),i("button",{onClick:()=>of()},"Create Game"),i("form",{onSubmit:o=>{o.preventDefault(),nf(document.getElementById("gameid").value)}},i("label",{for:"gameid"},"Join game"),i("input",{type:"text",name:"gameid",id:"gameid"}),i("input",{type:"submit"})),i("button",{onClick:()=>af()},"Start Game")),uf=L_;var B_=()=>i(a,null,i("div",{id:"paper-overlay"}),i(ma,{history:sa()},i(uf,{path:"/"}),i(pn,{path:"/editor",ref:hn})));Qi(i(B_,null),document.body);})();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */
//# sourceMappingURL=index.js.map
